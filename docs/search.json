[
  {
    "objectID": "04_8563_DDM.html",
    "href": "04_8563_DDM.html",
    "title": "8563_大東銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.0     ✔ readr     2.1.5\n✔ ggplot2   3.5.2     ✔ stringr   1.5.1\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8563_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.1426, 0.1532, 0.2764, 0.2986, 0.3195, 0.3742, 0.4017, 0.3294, 0.3121, 0.3131)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    37             2272\n 2    41             2591\n 3    38             1495\n 4    37             1308\n 5    36             1267\n 6    35             1073\n 7    36             1008\n 8    37             1222\n 9    36             1311\n10    34             1270\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.1426 0.1532 0.2764 0.2986 0.3195 0.3742 0.4017 0.3294 0.3121 0.3131\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 3594 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 427.044 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "04_8563_DDM.html#配当割引モデルの概要",
    "href": "04_8563_DDM.html#配当割引モデルの概要",
    "title": "8563_大東銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "04_8563_DDM.html#前提データの準備",
    "href": "04_8563_DDM.html#前提データの準備",
    "title": "8563_大東銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.0     ✔ readr     2.1.5\n✔ ggplot2   3.5.2     ✔ stringr   1.5.1\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8563_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.1426, 0.1532, 0.2764, 0.2986, 0.3195, 0.3742, 0.4017, 0.3294, 0.3121, 0.3131)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    37             2272\n 2    41             2591\n 3    38             1495\n 4    37             1308\n 5    36             1267\n 6    35             1073\n 7    36             1008\n 8    37             1222\n 9    36             1311\n10    34             1270\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.1426 0.1532 0.2764 0.2986 0.3195 0.3742 0.4017 0.3294 0.3121 0.3131\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 3594 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 427.044 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "05_5338.html",
    "href": "05_5338.html",
    "title": "5338_楽天銀行",
    "section": "",
    "text": "# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.0     ✔ readr     2.1.5\n✔ ggplot2   3.5.2     ✔ stringr   1.5.1\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n## 楽天銀行財務データ読み込み\ndf &lt;- read_csv(\"Processed_PrimeBank/5838.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 532 × 3\n   項目                   金額          年度\n   &lt;chr&gt;                  &lt;chr&gt;        &lt;dbl&gt;\n 1 企業名                 Rakuten Bank  2025\n 2 現金預け金             4791097       2024\n 3 コールローン           6387          2024\n 4 債券貸借取引支払保証金 554524        2024\n 5 買入金銭債権           2550812       2024\n 6 有価証券               1090506       2024\n 7 貸出金                 4069567       2024\n 8 外国為替               25501         2024\n 9 その他資産             345415        2024\n10 有形固定資産           4336          2024\n# ℹ 522 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"借用金\" | df$項目 == \"社債\",]\nD &lt;- sum(as.numeric(D_df_current_data$`金額`)) \n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 39676796 \n\n\n\n\n\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 174482000\nP &lt;- 8426          \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\", E/1e+8, \"億円\\n\")\n\n時価総額 (E): 14701.85 億円\n\n\n\n\n\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.186 %\n\n\n\n\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n\n\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0  #-0.872360575 マイナスのため最小値である０ \n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0 \n\n\n\n\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 1.57 %\n\n\n\n\n\n\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定 \\# 最新の法人実効税率を調べて設定してください。 T \\&lt;- 0.2320 \\# 例示の値 (23.20%)\n\n# WACCの計算\n\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 1.57 %\n\n\n\n\n\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\nFCF_combined_df &lt;- full_join(CFO,CFI, by = \"年度\")\nFCF_combined_df &lt;- FCF_combined_df |&gt; \n  mutate(FCF = as.numeric(金額.x) + as.numeric(金額.y) )\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 4 × 6\n  項目.x                           金額.x   年度 項目.y            金額.y    FCF\n  &lt;chr&gt;                            &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;   &lt;dbl&gt;\n1 営業活動によるキャッシュ・フロー 1027880  2024 投資活動によるキャッシュ・フロー… -3010… 7.27e5\n2 営業活動によるキャッシュ・フロー 594695   2023 投資活動によるキャッシュ・フロー… -1935… 4.01e5\n3 営業活動によるキャッシュ・フロー 1461945  2022 投資活動によるキャッシュ・フロー… -4959… 9.66e5\n4 営業活動によるキャッシュ・フロー 1501494  2021 投資活動によるキャッシュ・フロー… 37548  1.54e6\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n[1]  726822  401117  965965 1539042\n\n\n\n\n\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGR (過去 3年間): 28.41%\n \n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 1539042 1539042 1539042 1539042 1539042\n\n\n\n\n\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 1539042 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 98030798"
  },
  {
    "objectID": "05_5338.html#負債コスト-r_d-の算出",
    "href": "05_5338.html#負債コスト-r_d-の算出",
    "title": "5338_楽天銀行",
    "section": "",
    "text": "負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.186 %\n\n\n\n\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %"
  },
  {
    "objectID": "05_5338.html#β-ベータ",
    "href": "05_5338.html#β-ベータ",
    "title": "5338_楽天銀行",
    "section": "",
    "text": "評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0  #-0.872360575 マイナスのため最小値である０ \n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0 \n\n\n\n\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 1.57 %"
  },
  {
    "objectID": "05_5338.html#waccの最終算出",
    "href": "05_5338.html#waccの最終算出",
    "title": "5338_楽天銀行",
    "section": "",
    "text": "上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定 \\# 最新の法人実効税率を調べて設定してください。 T \\&lt;- 0.2320 \\# 例示の値 (23.20%)\n\n# WACCの計算\n\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 1.57 %"
  },
  {
    "objectID": "05_5338.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "05_5338.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "5338_楽天銀行",
    "section": "",
    "text": "割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\nFCF_combined_df &lt;- full_join(CFO,CFI, by = \"年度\")\nFCF_combined_df &lt;- FCF_combined_df |&gt; \n  mutate(FCF = as.numeric(金額.x) + as.numeric(金額.y) )\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 4 × 6\n  項目.x                           金額.x   年度 項目.y            金額.y    FCF\n  &lt;chr&gt;                            &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;   &lt;dbl&gt;\n1 営業活動によるキャッシュ・フロー 1027880  2024 投資活動によるキャッシュ・フロー… -3010… 7.27e5\n2 営業活動によるキャッシュ・フロー 594695   2023 投資活動によるキャッシュ・フロー… -1935… 4.01e5\n3 営業活動によるキャッシュ・フロー 1461945  2022 投資活動によるキャッシュ・フロー… -4959… 9.66e5\n4 営業活動によるキャッシュ・フロー 1501494  2021 投資活動によるキャッシュ・フロー… 37548  1.54e6\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n[1]  726822  401117  965965 1539042\n\n\n\n\n\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGR (過去 3年間): 28.41%\n \n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 1539042 1539042 1539042 1539042 1539042\n\n\n\n\n\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 1539042 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 98030798"
  },
  {
    "objectID": "05_5338.html#残余利益モデルrim",
    "href": "05_5338.html#残余利益モデルrim",
    "title": "5338_楽天銀行",
    "section": "4.1 残余利益モデル(RIM)",
    "text": "4.1 残余利益モデル(RIM)"
  },
  {
    "objectID": "05_5338.html#残余利益モデルの概要",
    "href": "05_5338.html#残余利益モデルの概要",
    "title": "5338_楽天銀行",
    "section": "4.2 残余利益モデルの概要",
    "text": "4.2 残余利益モデルの概要\n残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]"
  },
  {
    "objectID": "05_5338.html#前提データの準備",
    "href": "05_5338.html#前提データの準備",
    "title": "5338_楽天銀行",
    "section": "4.3 前提データの準備",
    "text": "4.3 前提データの準備\n\nlibrary(stringr)\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(`年度`, `金額`)\n\n# ---\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets_intermediate &lt;- df %&gt;%\n  filter(!str_detect(項目, \"企業名\")) %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  # 金額列を数値に変換する\n  mutate(金額 = parse_number(金額)) %&gt;%\n  group_by(年度)\n\n# 中間経過を出力する\nprint(\"自己資本簿価の途中経過（項目ごとの金額）:\")\n\n[1] \"自己資本簿価の途中経過（項目ごとの金額）:\"\n\nprint(Net_assets_intermediate)\n\n# A tibble: 8 × 3\n# Groups:   年度 [4]\n  項目                         金額  年度\n  &lt;chr&gt;                       &lt;dbl&gt; &lt;dbl&gt;\n1 株主資本合計               264311  2024\n2 その他の包括利益累計額合計  -3662  2024\n3 株主資本合計               216549  2023\n4 その他の包括利益累計額合計  -3517  2023\n5 株主資本合計               187445  2022\n6 その他の包括利益累計額合計   -363  2022\n7 株主資本合計               167405  2021\n8 その他の包括利益累計額合計    568  2021\n\n# 中間結果を使用して最終的な自己資本を計算する\nNet_assets &lt;- Net_assets_intermediate %&gt;%\n  summarise(自己資本 = sum(金額, na.rm = TRUE), .groups = 'drop')\n\n# ---\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 4 × 2\n   年度 金額 \n  &lt;dbl&gt; &lt;chr&gt;\n1  2024 33196\n2  2023 26461\n3  2022 19087\n4  2021 18866\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 4 × 2\n   年度 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1  2021   167973\n2  2022   187082\n3  2023   213032\n4  2024   260649\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.02 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- as.numeric(Net_Income_U$`金額`[t])\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 4 × 2\n   年度 金額 \n  &lt;dbl&gt; &lt;chr&gt;\n1  2024 33196\n2  2023 26461\n3  2022 19087\n4  2021 18866\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: -2,762,514 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 260,649 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 76,735.61 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -3,099,899 百万円"
  },
  {
    "objectID": "05_5338.html#配当割引モデルの概要",
    "href": "05_5338.html#配当割引モデルの概要",
    "title": "5338_楽天銀行",
    "section": "5.1 配当割引モデルの概要",
    "text": "5.1 配当割引モデルの概要\n配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。"
  },
  {
    "objectID": "05_5338.html#前提データの準備-1",
    "href": "05_5338.html#前提データの準備-1",
    "title": "5338_楽天銀行",
    "section": "5.2 前提データの準備",
    "text": "5.2 前提データの準備\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(年度, `金額`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.4946, 0.4299, 0.2924, 0.4520)\n\n# 当期純利益\nprint(Net_Income_U)\n\n# A tibble: 4 × 2\n   年度 金額 \n  &lt;dbl&gt; &lt;chr&gt;\n1  2024 33196\n2  2023 26461\n3  2022 19087\n4  2021 18866\n\n# 配当性向\nprint(Pay_ratio)\n\n[1] 0.4946 0.4299 0.2924 0.4520\n\n\n\nLook_Payratio &lt;- tibble(Year = c( 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) + \n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nt &lt;- 1:length(Net_assets)\n\nP0 &lt;- sum(Net_assets/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 817015.6 百万円\n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 4682.521 円"
  },
  {
    "objectID": "11_create_website.html#gitのインストール",
    "href": "11_create_website.html#gitのインストール",
    "title": "ウェブサイトの作り方",
    "section": "1.1 Gitのインストール",
    "text": "1.1 Gitのインストール\n\nGitはソースコードやドキュメントの変更履歴を管理するツールです。\n\nGit公式サイトからOSに合ったインストーラーをダウンロードし、インストールしてください。"
  },
  {
    "objectID": "11_create_website.html#rのインストール",
    "href": "11_create_website.html#rのインストール",
    "title": "ウェブサイトの作り方",
    "section": "1.2 Rのインストール",
    "text": "1.2 Rのインストール\n\nRは統計解析・データ分析向けのプログラミング言語です。\nCRAN（The Comprehensive R Archive Network）からOSに合ったインストーラーを入手してインストールします。\nインストール後、コマンドラインまたはRStudioからRを起動できることを確認してください。"
  },
  {
    "objectID": "11_create_website.html#rstudioのインストール",
    "href": "11_create_website.html#rstudioのインストール",
    "title": "ウェブサイトの作り方",
    "section": "1.3 RStudioのインストール",
    "text": "1.3 RStudioのインストール\n\nRStudioはRを使いやすくする統合開発環境（IDE）です。\nRStudio公式サイトからインストーラーを取得しインストール。"
  },
  {
    "objectID": "11_create_website.html#quartoのインストール",
    "href": "11_create_website.html#quartoのインストール",
    "title": "ウェブサイトの作り方",
    "section": "1.4 Quartoのインストール",
    "text": "1.4 Quartoのインストール\n\nQuartoはMarkdown形式で文章やサイトを生成するツールです。\nQuarto公式サイトからインストーラーをダウンロードしインストール。\nRStudioのターミナルやコマンドラインで以下を実行し、動作確認します。"
  },
  {
    "objectID": "10_Environment.html",
    "href": "10_Environment.html",
    "title": "環境設定",
    "section": "",
    "text": "sessionInfo()\n\nR version 4.5.1 (2025-06-13 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n  LAPACK version 3.12.1\n\nlocale:\n[1] LC_COLLATE=Japanese_Japan.utf8  LC_CTYPE=Japanese_Japan.utf8   \n[3] LC_MONETARY=Japanese_Japan.utf8 LC_NUMERIC=C                   \n[5] LC_TIME=Japanese_Japan.utf8    \n\ntime zone: Asia/Tokyo\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nloaded via a namespace (and not attached):\n [1] compiler_4.5.1    fastmap_1.2.0     cli_3.6.5         htmltools_0.5.8.1\n [5] tools_4.5.1       rstudioapi_0.17.1 yaml_2.3.10       rmarkdown_2.29   \n [9] knitr_1.50        jsonlite_2.0.0    xfun_0.52         digest_0.6.37    \n[13] rlang_1.1.6       renv_1.1.5        evaluate_1.0.4   \n\n# 使用したパッケージのリスト\nsearch()\n\n [1] \".GlobalEnv\"        \"package:stats\"     \"package:graphics\" \n [4] \"package:grDevices\" \"package:datasets\"  \"renv:shims\"       \n [7] \"package:utils\"     \"package:methods\"   \"Autoloads\"        \n[10] \"package:base\"     \n\nrequired_packages &lt;- c(\"tidyverse\",\"\")"
  },
  {
    "objectID": "00_About_Valuation.html",
    "href": "00_About_Valuation.html",
    "title": "企業価値評価とは",
    "section": "",
    "text": "グローバル経済において、企業の合併・買収(M&A)や新規株式公開(IPO)、資金調達といった場面において、企業価値評価は不可欠なプロセスとして位置づけられる。企業価値評価の基本的な概念、学術的、実務的意義として何があげられるのだろうか\n\n企業価値評価は、企業の事業戦略、財務状態、マクロ経済環境といった要素を統合的に分析する。"
  },
  {
    "objectID": "00_About_Valuation.html#はじめに",
    "href": "00_About_Valuation.html#はじめに",
    "title": "企業価値評価とは",
    "section": "",
    "text": "グローバル経済において、企業の合併・買収(M&A)や新規株式公開(IPO)、資金調達といった場面において、企業価値評価は不可欠なプロセスとして位置づけられる。企業価値評価の基本的な概念、学術的、実務的意義として何があげられるのだろうか\n\n企業価値評価は、企業の事業戦略、財務状態、マクロ経済環境といった要素を統合的に分析する。"
  },
  {
    "objectID": "00_About_Valuation.html#企業価値評価の定義と目的",
    "href": "00_About_Valuation.html#企業価値評価の定義と目的",
    "title": "企業価値評価とは",
    "section": "2 企業価値評価の定義と目的",
    "text": "2 企業価値評価の定義と目的\n\n企業価値評価とは何か？\n企業価値表評価とは、特定の時点における企業の経済的価値を貨幣単位で算定するプロセスを指します。企業の帳簿上の資産価値を算出するものではなく、企業が将来にわたって生み出すとされる利益をを評価するなど将来を見据えた分析手法となっています。\n企業価値は量的なデータを中心として分析されますが、質的データも考慮する必要があります。\n企業価値評価の主要な目的\n\n\nM&A(企業の合併、買収)：買収対象企業の適正な価格を算定し、買収プレミアムの妥当性を判断する際の情報となる、売り手も自社価値を客観的に提示するために評価を行います。\n資金調達（エクイティ・ファイナンス）： 新規株式発行による増資や、未公開企業の株式公開（IPO）に際して、投資家への情報提供と株価設定の根拠として用いられます。投資家は、企業価値評価を基に投資判断を行います。\n事業戦略・経営意思決定：企業内部においては、事業ポートフォリオの見直し、新規事業への投資判断、不採算事業からの撤退判断など、経営資源の最適配分に関する戦略的意思決定の根拠として活用されます。\n組織再編・事業承継： 会社分割、株式交換・移転、事業譲渡といった組織再編時や、非上場企業の事業承継時における株主間の利害調整や課税評価の基礎となります。"
  },
  {
    "objectID": "05_5838.html",
    "href": "05_5838.html",
    "title": "5838_楽天銀行",
    "section": "",
    "text": "# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.0     ✔ readr     2.1.5\n✔ ggplot2   3.5.2     ✔ stringr   1.5.1\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n## 楽天銀行財務データ読み込み\ndf &lt;- read_csv(\"Processed_PrimeBank/5838.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 532 × 3\n   項目                   金額          年度\n   &lt;chr&gt;                  &lt;chr&gt;        &lt;dbl&gt;\n 1 企業名                 Rakuten Bank  2025\n 2 現金預け金             4791097       2024\n 3 コールローン           6387          2024\n 4 債券貸借取引支払保証金 554524        2024\n 5 買入金銭債権           2550812       2024\n 6 有価証券               1090506       2024\n 7 貸出金                 4069567       2024\n 8 外国為替               25501         2024\n 9 その他資産             345415        2024\n10 有形固定資産           4336          2024\n# ℹ 522 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"借用金\" | df$項目 == \"社債\",]\nD &lt;- sum(as.numeric(D_df_current_data$`金額`)) \n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 39676796 \n\n\n\n\n\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 174482000\nP &lt;- 8426          \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\", E/1e+8, \"億円\\n\")\n\n時価総額 (E): 14701.85 億円\n\n\n\n\n\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.186 %\n\n\n\n\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n\n\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0  #-0.872360575 マイナスのため最小値である０ \n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0 \n\n\n\n\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 1.57 %\n\n\n\n\n\n\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定 \\# 最新の法人実効税率を調べて設定してください。 T \\&lt;- 0.2320 \\# 例示の値 (23.20%)\n\n# WACCの計算\n\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 1.57 %\n\n\n\n\n\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\nFCF_combined_df &lt;- full_join(CFO,CFI, by = \"年度\")\nFCF_combined_df &lt;- FCF_combined_df |&gt; \n  mutate(FCF = as.numeric(金額.x) + as.numeric(金額.y) )\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 4 × 6\n  項目.x                           金額.x   年度 項目.y            金額.y    FCF\n  &lt;chr&gt;                            &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;   &lt;dbl&gt;\n1 営業活動によるキャッシュ・フロー 1027880  2024 投資活動によるキャッシュ・フロー… -3010… 7.27e5\n2 営業活動によるキャッシュ・フロー 594695   2023 投資活動によるキャッシュ・フロー… -1935… 4.01e5\n3 営業活動によるキャッシュ・フロー 1461945  2022 投資活動によるキャッシュ・フロー… -4959… 9.66e5\n4 営業活動によるキャッシュ・フロー 1501494  2021 投資活動によるキャッシュ・フロー… 37548  1.54e6\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n[1]  726822  401117  965965 1539042\n\n\n\n\n\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGR (過去 3年間): 28.41%\n \n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 1539042 1539042 1539042 1539042 1539042\n\n\n\n\n\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 1539042 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 98030798",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#負債コスト-r_d-の算出",
    "href": "05_5838.html#負債コスト-r_d-の算出",
    "title": "5838_楽天銀行",
    "section": "",
    "text": "負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.186 %\n\n\n\n\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#β-ベータ",
    "href": "05_5838.html#β-ベータ",
    "title": "5838_楽天銀行",
    "section": "",
    "text": "評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0  #-0.872360575 マイナスのため最小値である０ \n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0 \n\n\n\n\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#waccの最終算出",
    "href": "05_5838.html#waccの最終算出",
    "title": "5838_楽天銀行",
    "section": "",
    "text": "上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定 \\# 最新の法人実効税率を調べて設定してください。 T \\&lt;- 0.2320 \\# 例示の値 (23.20%)\n\n# WACCの計算\n\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "05_5838.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "5838_楽天銀行",
    "section": "",
    "text": "割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\nFCF_combined_df &lt;- full_join(CFO,CFI, by = \"年度\")\nFCF_combined_df &lt;- FCF_combined_df |&gt; \n  mutate(FCF = as.numeric(金額.x) + as.numeric(金額.y) )\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 4 × 6\n  項目.x                           金額.x   年度 項目.y            金額.y    FCF\n  &lt;chr&gt;                            &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;   &lt;dbl&gt;\n1 営業活動によるキャッシュ・フロー 1027880  2024 投資活動によるキャッシュ・フロー… -3010… 7.27e5\n2 営業活動によるキャッシュ・フロー 594695   2023 投資活動によるキャッシュ・フロー… -1935… 4.01e5\n3 営業活動によるキャッシュ・フロー 1461945  2022 投資活動によるキャッシュ・フロー… -4959… 9.66e5\n4 営業活動によるキャッシュ・フロー 1501494  2021 投資活動によるキャッシュ・フロー… 37548  1.54e6\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n[1]  726822  401117  965965 1539042\n\n\n\n\n\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGR (過去 3年間): 28.41%\n \n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 1539042 1539042 1539042 1539042 1539042\n\n\n\n\n\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 1539042 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 98030798",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#残余利益モデルrim",
    "href": "05_5838.html#残余利益モデルrim",
    "title": "5838_楽天銀行",
    "section": "4.1 残余利益モデル(RIM)",
    "text": "4.1 残余利益モデル(RIM)",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#残余利益モデルの概要",
    "href": "05_5838.html#残余利益モデルの概要",
    "title": "5838_楽天銀行",
    "section": "4.2 残余利益モデルの概要",
    "text": "4.2 残余利益モデルの概要\n残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#前提データの準備",
    "href": "05_5838.html#前提データの準備",
    "title": "5838_楽天銀行",
    "section": "4.3 前提データの準備",
    "text": "4.3 前提データの準備\n\nlibrary(stringr)\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(`年度`, `金額`)\n\n# ---\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets_intermediate &lt;- df %&gt;%\n  filter(!str_detect(項目, \"企業名\")) %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  # 金額列を数値に変換する\n  mutate(金額 = parse_number(金額)) %&gt;%\n  group_by(年度)\n\n# 中間経過を出力する\nprint(\"自己資本簿価の途中経過（項目ごとの金額）:\")\n\n[1] \"自己資本簿価の途中経過（項目ごとの金額）:\"\n\nprint(Net_assets_intermediate)\n\n# A tibble: 8 × 3\n# Groups:   年度 [4]\n  項目                         金額  年度\n  &lt;chr&gt;                       &lt;dbl&gt; &lt;dbl&gt;\n1 株主資本合計               264311  2024\n2 その他の包括利益累計額合計  -3662  2024\n3 株主資本合計               216549  2023\n4 その他の包括利益累計額合計  -3517  2023\n5 株主資本合計               187445  2022\n6 その他の包括利益累計額合計   -363  2022\n7 株主資本合計               167405  2021\n8 その他の包括利益累計額合計    568  2021\n\n# 中間結果を使用して最終的な自己資本を計算する\nNet_assets &lt;- Net_assets_intermediate %&gt;%\n  summarise(自己資本 = sum(金額, na.rm = TRUE), .groups = 'drop')\n\n# ---\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 4 × 2\n   年度 金額 \n  &lt;dbl&gt; &lt;chr&gt;\n1  2024 33196\n2  2023 26461\n3  2022 19087\n4  2021 18866\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 4 × 2\n   年度 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1  2021   167973\n2  2022   187082\n3  2023   213032\n4  2024   260649\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.02 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- as.numeric(Net_Income_U$`金額`[t])\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 4 × 2\n   年度 金額 \n  &lt;dbl&gt; &lt;chr&gt;\n1  2024 33196\n2  2023 26461\n3  2022 19087\n4  2021 18866\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: -2,762,514 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 260,649 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 76,735.61 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -3,099,899 百万円",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#配当割引モデルの概要",
    "href": "05_5838.html#配当割引モデルの概要",
    "title": "5838_楽天銀行",
    "section": "5.1 配当割引モデルの概要",
    "text": "5.1 配当割引モデルの概要\n配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#前提データの準備-1",
    "href": "05_5838.html#前提データの準備-1",
    "title": "5838_楽天銀行",
    "section": "5.2 前提データの準備",
    "text": "5.2 前提データの準備\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(年度, `金額`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.4946, 0.4299, 0.2924, 0.4520)\n\n# 当期純利益\nprint(Net_Income_U)\n\n# A tibble: 4 × 2\n   年度 金額 \n  &lt;dbl&gt; &lt;chr&gt;\n1  2024 33196\n2  2023 26461\n3  2022 19087\n4  2021 18866\n\n# 配当性向\nprint(Pay_ratio)\n\n[1] 0.4946 0.4299 0.2924 0.4520\n\n\n\nLook_Payratio &lt;- tibble(Year = c( 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) + \n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nt &lt;- 1:length(Net_assets)\n\nP0 &lt;- sum(Net_assets/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 817015.6 百万円\n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 4682.521 円",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  }
]