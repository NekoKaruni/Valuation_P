[
  {
    "objectID": "02_8383.html#wacc加重平均資本コストの定義と重要性",
    "href": "02_8383.html#wacc加重平均資本コストの定義と重要性",
    "title": "8383_鳥取銀行",
    "section": "1.1 WACC（加重平均資本コスト）の定義と重要性",
    "text": "1.1 WACC（加重平均資本コスト）の定義と重要性\nWACCは、企業が資金を調達するために株主や債権者に平均して支払うコストを表す。企業が将来生み出すフリーキャッシュフロー（FCF）を現在価値に割り引く際の割引率としてWACCを用いることで、企業が継続的に価値を創造するために最低限稼ぐべき収益率を反映した評価が可能となる。WACCの一般的な算出式は以下の通りである。\n\\[WACC = \\frac{D}{D+E} \\times r_D \\times (1-T) + \\frac{E}{D+E} \\times r_E\\]\nここで、各記号は以下の要素を示す。\n\n\\(D\\) : 負債総額\n\\(E\\) : 時価総額\n\\(r\\_D\\) : 負債コスト\n\\(r\\_E\\) : 株主資本コスト\n\\(T\\) : 実効税率",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8383_鳥取銀行"
    ]
  },
  {
    "objectID": "02_8383.html#waccの構成要素の算出",
    "href": "02_8383.html#waccの構成要素の算出",
    "title": "8383_鳥取銀行",
    "section": "1.2 WACCの構成要素の算出",
    "text": "1.2 WACCの構成要素の算出\nWACCを算出するためには、\\(D\\)、\\(E\\)、\\(r\\_D\\)、\\(r\\_E\\) の各要素を正確に特定する必要がある。\n\n1.2.1 前提データの準備\nまずは、分析に必要なライブラリを読み込み、財務データとTOPIXデータを準備します。\n\n# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n## 鳥取銀行財務データ読み込み\ndf &lt;- read_csv(\"ProcessedBankData/8383_processed_data.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,196 × 4\n      No 項目         `金額（百万円）` ファイル名        \n   &lt;dbl&gt; &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;             \n 1     1 現金預け金              54883 838320150311JP.csv\n 2     2 有価証券               185287 838320150311JP.csv\n 3     3 貸出金                 703766 838320150311JP.csv\n 4     4 外国為替                  366 838320150311JP.csv\n 5     5 劣後受益権              10021 838320150311JP.csv\n 6     6 その他資産               3163 838320150311JP.csv\n 7     7 有形固定資産            10836 838320150311JP.csv\n 8     8 建物                     2512 838320150311JP.csv\n 9     9 土地                     6908 838320150311JP.csv\n10    10 リース資産               1058 838320150311JP.csv\n# ℹ 1,186 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\n\n1.2.2 負債総額 (\\(D\\)) の算出\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"借用金\" | df$項目 == \"社債\"|df$項目==\"譲渡性預金\"|df$項目==\"コールマネー及び売渡手形\"|df$項目==\"その他負債\",]\nD &lt;- sum(as.numeric(D_df_current_data$`金額（百万円）`)) \n# 例として22行目と23行目の3列目を合計\n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 8826517 \n\n\n\n\n\n1.2.3 時価総額 (\\(E\\)) の算出\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 9619938\nP &lt;- 1285          \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\", E, \"\\n\")\n\n時価総額 (E): 12361620330 \n\n\n\n\n\n1.2.4 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\"|df$項目==\"譲渡性預金利息\"|df$項目==\"コールマネー利息及び売渡手形利息\"|df$項目==\"債券貸借取引支払利息\"|df$項目==\"その他の支払利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額（百万円）`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.191 %\n\n\n\n\n\n1.2.5 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n1.2.6 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n1.2.7 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0.580596357\n # 例示の値\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0.581 \n\n\n\n\n1.2.8 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n1.2.9 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 5.214 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8383_鳥取銀行"
    ]
  },
  {
    "objectID": "02_8383.html#waccの最終算出",
    "href": "02_8383.html#waccの最終算出",
    "title": "8383_鳥取銀行",
    "section": "1.3 WACCの最終算出",
    "text": "1.3 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定\n# 最新の法人実効税率を調べて設定してください。\nT &lt;- 0.2320 # 例示の値 (23.20%)\n\n# WACCの計算\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 5.21 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8383_鳥取銀行"
    ]
  },
  {
    "objectID": "02_8383.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "02_8383.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8383_鳥取銀行",
    "section": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n1.4.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\n# ここでは、簡便的に過去データを利用していますが、実務では詳細な予測モデルを構築します。\nCFO &lt;- CFO %&gt;% rename(年度 = ファイル名) \nCFI &lt;- CFI %&gt;% rename(年度 = ファイル名) \nFCF_combined_df &lt;- inner_join(\n  CFO %&gt;% select(年度, CFO_金額 = `金額（百万円）`), # CFOデータから年度と金額（CFO_金額としてリネーム）を選択\n  CFI %&gt;% select(年度, CFI_金額 = `金額（百万円）`), # CFIデータから年度と金額（CFI_金額としてリネーム）を選択\n  by = \"年度\"\n) |&gt; \n  mutate(FCF = CFO_金額 - CFI_金額) |&gt; \n  mutate(FCF = replace_na(FCF, 0)) |&gt; \n  arrange(年度)\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 9 × 4\n  年度               CFO_金額 CFI_金額    FCF\n  &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;\n1 838320150315JP.csv   -21145    15610 -36755\n2 838320160315JP.csv     3646    29919 -26273\n3 838320170315JP.csv      418   -18191  18609\n4 838320180315JP.csv   -11834    21639 -33473\n5 838320190315JP.csv    -8683    22208 -30891\n6 838320200315JP.csv   -14191    16077 -30268\n7 838320210315JP.csv    29461   -17479  46940\n8 838320220315JP.csv    12000    -8647  20647\n9 838320240315JP.csv    56655    -4002  60657\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n[1] -36755 -26273  18609 -33473 -30891 -30268  46940  20647  60657\n\n\n\n\n1.4.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\nWarning:\nFCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 60657 60657 60657 60657 60657\n\n\n\n\n\n1.4.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 60657 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 1164206 \n\n\n\n\n\n1.4.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): 1164206 \n\n\n\n\n\n1.4.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 490.688 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8383_鳥取銀行"
    ]
  },
  {
    "objectID": "00_Valuation.html",
    "href": "00_Valuation.html",
    "title": "DCF法",
    "section": "",
    "text": "DCF法(Discounted Cash Flow)は企業価値評価の代表的手法の一つです。企業や事業が将来生み出すと予測されているフリーキャッシュフロー(FCF)を適切な割引率で現在価値に割引き合計することで、企業や事業の価値を算出します。\n現在の10000円は将来の10000円よりも価値があるという、貨幣の時間価値の概念に基づき、将来のキャッシュフローを現在の価値に換算し、評価します。現在の10000円と将来の10000円では価値が変化します。",
    "crumbs": [
      "企業価値評価",
      "DCF法"
    ]
  },
  {
    "objectID": "00_Valuation.html#dcf法とは",
    "href": "00_Valuation.html#dcf法とは",
    "title": "DCF法",
    "section": "",
    "text": "DCF法(Discounted Cash Flow)は企業価値評価の代表的手法の一つです。企業や事業が将来生み出すと予測されているフリーキャッシュフロー(FCF)を適切な割引率で現在価値に割引き合計することで、企業や事業の価値を算出します。\n現在の10000円は将来の10000円よりも価値があるという、貨幣の時間価値の概念に基づき、将来のキャッシュフローを現在の価値に換算し、評価します。現在の10000円と将来の10000円では価値が変化します。",
    "crumbs": [
      "企業価値評価",
      "DCF法"
    ]
  },
  {
    "objectID": "00_Valuation.html#将来の10000円の現在価値を求める式",
    "href": "00_Valuation.html#将来の10000円の現在価値を求める式",
    "title": "DCF法",
    "section": "2 将来の10,000円の現在価値を求める式",
    "text": "2 将来の10,000円の現在価値を求める式\n将来の10,000円（例えば10年後）が、現在価値に換算するといくらになるかを計算する。\n\n2.1 各項目の意味\n\nPV: 現在価値 (Present Value)\nFV: 将来価値 (Future Value) - ここでは10,000円\nr: 割引率 (Discount Rate) - 年利や要求利回りなど、貨幣の時間的価値とリスクを考慮した率　今回は無リスク金利と呼ばれる日本国債利回り1%として\nn: 期間 (Number of Periods) - 将来の時点までの年数　\n\n\n\n2.2 具体例（割引率1%、期間10年の場合）\n例えば、割引率を年利1% (r=0.01)、期間を10年 (n=10) と仮定して、将来の10,000円の現在価値を計算すると以下のようになります。\n\\[\n\\begin{aligned}\nPV = \\frac{10000}{(1 + 0.01)^{10}}\\\\\nPV = \\frac{10000}{(1.01)^{10}}\\\\\nPV =\\frac{10000}{1.104622}\\\\\nPV≈9052.8 7\n\\end{aligned}\n\\]\n計算結果は割引率1%を考慮すると、10年後の10000円は現在の9053円に値するということを意味する。",
    "crumbs": [
      "企業価値評価",
      "DCF法"
    ]
  },
  {
    "objectID": "03_8349_RIM.html",
    "href": "03_8349_RIM.html",
    "title": "8349_東北銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8349_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1347\n 2    40             1960\n 3    39             1795\n 4    38              618\n 5    38              908\n 6    38             1111\n 7    35             1149\n 8    37             1337\n 9    39             1526\n10    38             1376\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    35    38225\n2    36   112361\n3    37   140482\n4    38    72677\n5    39     1698\n6    40     3071\n7    41    12703\n8    42     5659\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.612545762\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 5.414 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1347\n 2    40             1960\n 3    39             1795\n 4    38              618\n 5    38              908\n 6    38             1111\n 7    35             1149\n 8    37             1337\n 9    39             1526\n10    38             1376\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 27,486.08 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 5,659 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 6,108.72 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: 15,718.36 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8349_東北銀行"
    ]
  },
  {
    "objectID": "03_8349_RIM.html#残余利益モデルの概要",
    "href": "03_8349_RIM.html#残余利益モデルの概要",
    "title": "8349_東北銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8349_東北銀行"
    ]
  },
  {
    "objectID": "03_8349_RIM.html#前提データの準備",
    "href": "03_8349_RIM.html#前提データの準備",
    "title": "8349_東北銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8349_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1347\n 2    40             1960\n 3    39             1795\n 4    38              618\n 5    38              908\n 6    38             1111\n 7    35             1149\n 8    37             1337\n 9    39             1526\n10    38             1376\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    35    38225\n2    36   112361\n3    37   140482\n4    38    72677\n5    39     1698\n6    40     3071\n7    41    12703\n8    42     5659\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.612545762\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 5.414 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1347\n 2    40             1960\n 3    39             1795\n 4    38              618\n 5    38              908\n 6    38             1111\n 7    35             1149\n 8    37             1337\n 9    39             1526\n10    38             1376\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 27,486.08 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 5,659 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 6,108.72 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: 15,718.36 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8349_東北銀行"
    ]
  },
  {
    "objectID": "03_8416_RIM.html",
    "href": "03_8416_RIM.html",
    "title": "8416_高知銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8416_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             3922\n 2    38             3105\n 3    36             2307\n 4    39             1828\n 5    37              996\n 6    36             1468\n 7    38              943\n 8    38             1701\n 9    38             1666\n10    37             1358\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 4 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    39   300179\n2    40   310494\n3    43    48747\n4    44    28478\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.873145223\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 7.05 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             3922\n 2    38             3105\n 3    36             2307\n 4    39             1828\n 5    37              996\n 6    36             1468\n 7    38              943\n 8    38             1701\n 9    38             1666\n10    37             1358\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 5,839.82 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 28,478 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: -2,887.34 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -19,750.84 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8416_高知銀行"
    ]
  },
  {
    "objectID": "03_8416_RIM.html#残余利益モデルの概要",
    "href": "03_8416_RIM.html#残余利益モデルの概要",
    "title": "8416_高知銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8416_高知銀行"
    ]
  },
  {
    "objectID": "03_8416_RIM.html#前提データの準備",
    "href": "03_8416_RIM.html#前提データの準備",
    "title": "8416_高知銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8416_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             3922\n 2    38             3105\n 3    36             2307\n 4    39             1828\n 5    37              996\n 6    36             1468\n 7    38              943\n 8    38             1701\n 9    38             1666\n10    37             1358\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 4 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    39   300179\n2    40   310494\n3    43    48747\n4    44    28478\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.873145223\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 7.05 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             3922\n 2    38             3105\n 3    36             2307\n 4    39             1828\n 5    37              996\n 6    36             1468\n 7    38              943\n 8    38             1701\n 9    38             1666\n10    37             1358\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 5,839.82 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 28,478 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: -2,887.34 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -19,750.84 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8416_高知銀行"
    ]
  },
  {
    "objectID": "02_8542.html#wacc加重平均資本コストの定義と重要性",
    "href": "02_8542.html#wacc加重平均資本コストの定義と重要性",
    "title": "8542_トマト銀行",
    "section": "1.1 WACC（加重平均資本コスト）の定義と重要性",
    "text": "1.1 WACC（加重平均資本コスト）の定義と重要性\nWACCは、企業が資金を調達するために株主や債権者に平均して支払うコストを表す。企業が将来生み出すフリーキャッシュフロー（FCF）を現在価値に割り引く際の割引率としてWACCを用いることで、企業が継続的に価値を創造するために最低限稼ぐべき収益率を反映した評価が可能となる。WACCの一般的な算出式は以下の通りである。\n\\[WACC = \\frac{D}{D+E} \\times r_D \\times (1-T) + \\frac{E}{D+E} \\times r_E\\]\nここで、各記号は以下の要素を示す。\n\n\\(D\\) : 負債総額\n\\(E\\) : 時価総額\n\\(r\\_D\\) : 負債コスト\n\\(r\\_E\\) : 株主資本コスト\n\\(T\\) : 実効税率",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8542_トマト銀行"
    ]
  },
  {
    "objectID": "02_8542.html#waccの構成要素の算出",
    "href": "02_8542.html#waccの構成要素の算出",
    "title": "8542_トマト銀行",
    "section": "1.2 WACCの構成要素の算出",
    "text": "1.2 WACCの構成要素の算出\nWACCを算出するためには、\\(D\\)、\\(E\\)、\\(r\\_D\\)、\\(r\\_E\\) の各要素を正確に特定する必要がある。\n\n1.2.1 前提データの準備\nまずは、分析に必要なライブラリを読み込み、財務データとTOPIXデータを準備します。\n\n# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n##じもとホールディングス\n## 財務データ読み込み\ndf &lt;- read_csv(\"ProcessedBankData/8537_processed_data.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,414 × 4\n      No 項目         `金額（百万円）` ファイル名        \n   &lt;dbl&gt; &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;             \n 1     1 現金預け金              62783 853720150311JP.csv\n 2     2 商品有価証券              155 853720150311JP.csv\n 3     3 金銭の信託               2987 853720150311JP.csv\n 4     4 有価証券               361946 853720150311JP.csv\n 5     5 貸出金                 947038 853720150311JP.csv\n 6     6 外国為替                 2601 853720150311JP.csv\n 7     7 その他資産               9598 853720150311JP.csv\n 8     8 有形固定資産            14475 853720150311JP.csv\n 9     9 建物                     3076 853720150311JP.csv\n10    10 土地                    10539 853720150311JP.csv\n# ℹ 1,404 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\n\n1.2.2 負債総額 (\\(D\\)) の算出\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"譲渡性預金\"  |df$項目 == \"借用金\"|df$項目==\"コールマネー及び売渡手形\"|df$項目==\"外国為替\"|df$項目==\"社債\"|df$項目==\"その他負債\" ,]\nD &lt;- sum(as.numeric(D_df_current_data$`金額（百万円）`)) \n# 例として22行目と23行目の3列目を合計\n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 14450997 \n\n\n\n\n\n1.2.3 時価総額 (\\(E\\)) の算出\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 11679 + 1000\nP &lt;- 1277          \n# 時価総額の計算\nE &lt;- N * P\n# 算出結果の確認\ncat(\"時価総額 (E):\", E, \"\\n\")\n\n時価総額 (E): 16191083 \n\n\n\n\n\n1.2.4 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\"|df$項目==\"譲渡性預金利息\"|df$項目==\"その他の支払利息\"|df$項目==\"コールマネー利息及び売渡手形利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額（百万円）`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.099 %\n\n\n\n\n\n1.2.5 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n1.2.6 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n1.2.7 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0.55995099\n # 例示の値\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0.56 \n\n\n\n\n1.2.8 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n1.2.9 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 5.084 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8542_トマト銀行"
    ]
  },
  {
    "objectID": "02_8542.html#waccの最終算出",
    "href": "02_8542.html#waccの最終算出",
    "title": "8542_トマト銀行",
    "section": "1.3 WACCの最終算出",
    "text": "1.3 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定\n# 最新の法人実効税率を調べて設定してください。\nT &lt;- 0.2320 # 例示の値 (23.20%)\n\n# WACCの計算\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 2.722 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8542_トマト銀行"
    ]
  },
  {
    "objectID": "02_8542.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "02_8542.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8542_トマト銀行",
    "section": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n1.4.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\n# ここでは、簡便的に過去データを利用していますが、実務では詳細な予測モデルを構築します。\nCFO &lt;- CFO %&gt;% rename(年度 = ファイル名) \nCFI &lt;- CFI %&gt;% rename(年度 = ファイル名) \nFCF_combined_df &lt;- inner_join(\n  CFO %&gt;% select(年度, CFO_金額 = `金額（百万円）`), # CFOデータから年度と金額（CFO_金額としてリネーム）を選択\n  CFI %&gt;% select(年度, CFI_金額 = `金額（百万円）`), # CFIデータから年度と金額（CFI_金額としてリネーム）を選択\n  by = \"年度\"\n) |&gt; \n  mutate(FCF = CFO_金額 - CFI_金額) |&gt; \n  mutate(FCF = replace_na(FCF, 0)) |&gt; \n  arrange(年度)\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 4\n   年度               CFO_金額 CFI_金額     FCF\n   &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;\n 1 853720150315JP.csv   -19939    10642  -30581\n 2 853720160315JP.csv    13927   -10613   24540\n 3 853720170315JP.csv    -5855    25415  -31270\n 4 853720180315JP.csv       26   -11718   11744\n 5 853720190315JP.csv    44927    -3486   48413\n 6 853720200315JP.csv     -647   -12460   11813\n 7 853720210315JP.csv   143439    -1667  145106\n 8 853720220315JP.csv    -4192    10626  -14818\n 9 853720230315JP.csv  -139400     6615 -146015\n10 853720240315JP.csv     1598   -19399   20997\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]  -30581   24540  -31270   11744   48413   11813  145106  -14818 -146015\n[10]   20997\n\n\n\n\n1.4.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\nWarning:\nFCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 20997 20997 20997 20997 20997\n\n\n\n\n\n1.4.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 20997 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 771341 \n\n\n\n\n\n1.4.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): 771341 \n\n\n\n\n\n1.4.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 129682.5 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8542_トマト銀行"
    ]
  },
  {
    "objectID": "03_8542_RIM.html",
    "href": "03_8542_RIM.html",
    "title": "8542_トマト銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8542_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             1662\n2    38             1843\n3    41             1912\n4    40             1556\n5    42             1753\n6    40             1371\n7    38             1519\n8    36             1879\n9    35             1530\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    37   102245\n2    38   102436\n3    39   178644\n4    40    35537\n5    42     2926\n6    43     2750\n7    44    12613\n8    45     4376\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.55995099\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 5.084 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             1662\n2    38             1843\n3    41             1912\n4    40             1556\n5    42             1753\n6    40             1371\n7    38             1519\n8    36             1879\n9    35             1530\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 39,257.58 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 4,376 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 8,718.5 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: 26,163.08 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8542_トマト銀行"
    ]
  },
  {
    "objectID": "03_8542_RIM.html#残余利益モデルの概要",
    "href": "03_8542_RIM.html#残余利益モデルの概要",
    "title": "8542_トマト銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8542_トマト銀行"
    ]
  },
  {
    "objectID": "03_8542_RIM.html#前提データの準備",
    "href": "03_8542_RIM.html#前提データの準備",
    "title": "8542_トマト銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8542_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             1662\n2    38             1843\n3    41             1912\n4    40             1556\n5    42             1753\n6    40             1371\n7    38             1519\n8    36             1879\n9    35             1530\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    37   102245\n2    38   102436\n3    39   178644\n4    40    35537\n5    42     2926\n6    43     2750\n7    44    12613\n8    45     4376\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.55995099\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 5.084 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             1662\n2    38             1843\n3    41             1912\n4    40             1556\n5    42             1753\n6    40             1371\n7    38             1519\n8    36             1879\n9    35             1530\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 39,257.58 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 4,376 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 8,718.5 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: 26,163.08 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8542_トマト銀行"
    ]
  },
  {
    "objectID": "04_8563_DDM.html",
    "href": "04_8563_DDM.html",
    "title": "8563_大東銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8563_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.1426, 0.1532, 0.2764, 0.2986, 0.3195, 0.3742, 0.4017, 0.3294, 0.3121, 0.3131)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    37             2272\n 2    41             2591\n 3    38             1495\n 4    37             1308\n 5    36             1267\n 6    35             1073\n 7    36             1008\n 8    37             1222\n 9    36             1311\n10    34             1270\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.1426 0.1532 0.2764 0.2986 0.3195 0.3742 0.4017 0.3294 0.3121 0.3131\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 3594 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 427.044 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "04_8563_DDM.html#配当割引モデルの概要",
    "href": "04_8563_DDM.html#配当割引モデルの概要",
    "title": "8563_大東銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "04_8563_DDM.html#前提データの準備",
    "href": "04_8563_DDM.html#前提データの準備",
    "title": "8563_大東銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8563_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.1426, 0.1532, 0.2764, 0.2986, 0.3195, 0.3742, 0.4017, 0.3294, 0.3121, 0.3131)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    37             2272\n 2    41             2591\n 3    38             1495\n 4    37             1308\n 5    36             1267\n 6    35             1073\n 7    36             1008\n 8    37             1222\n 9    36             1311\n10    34             1270\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.1426 0.1532 0.2764 0.2986 0.3195 0.3742 0.4017 0.3294 0.3121 0.3131\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 3594 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 427.044 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "03_7161_RIM.html",
    "href": "03_7161_RIM.html",
    "title": "7161_じもとHD",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/7161_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    39             5986\n2    41             4891\n3    40             4637\n4    39             3027\n5    39             1709\n6    39             1738\n7    39            -3175\n8    39             2593\n9    40            -7078\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 9 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    38   210683\n2    39   112612\n3    40   337714\n4    41   218265\n5    42   -49786\n6    43   210522\n7    44    -5698\n8    45    11488\n9    47    19472\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.384913011\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 3.986 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    39             5986\n2    41             4891\n3    40             4637\n4    39             3027\n5    39             1709\n6    39             1738\n7    39            -3175\n8    39             2593\n9    40            -7078\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: -596,209.1 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 19,472 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 5,563.84 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -621,244.9 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "7161_じもとHD"
    ]
  },
  {
    "objectID": "03_7161_RIM.html#残余利益モデルの概要",
    "href": "03_7161_RIM.html#残余利益モデルの概要",
    "title": "7161_じもとHD",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "7161_じもとHD"
    ]
  },
  {
    "objectID": "03_7161_RIM.html#前提データの準備",
    "href": "03_7161_RIM.html#前提データの準備",
    "title": "7161_じもとHD",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/7161_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    39             5986\n2    41             4891\n3    40             4637\n4    39             3027\n5    39             1709\n6    39             1738\n7    39            -3175\n8    39             2593\n9    40            -7078\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 9 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    38   210683\n2    39   112612\n3    40   337714\n4    41   218265\n5    42   -49786\n6    43   210522\n7    44    -5698\n8    45    11488\n9    47    19472\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.384913011\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 3.986 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    39             5986\n2    41             4891\n3    40             4637\n4    39             3027\n5    39             1709\n6    39             1738\n7    39            -3175\n8    39             2593\n9    40            -7078\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: -596,209.1 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 19,472 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 5,563.84 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -621,244.9 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "7161_じもとHD"
    ]
  },
  {
    "objectID": "04_8537_DDM.html",
    "href": "04_8537_DDM.html",
    "title": "8537_大光銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8537_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.3001, 0.1672, 0.1551, 0.1346, 0.1872, 0.4200, 0.3054, 0.2326, 0.3744, 0.2814)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1637\n 2    40             3004\n 3    38             3180\n 4    37             3579\n 5    39             2609\n 6    39             1165\n 7    37             1596\n 8    40             2074\n 9    39             1315\n10    39             1740\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.3001 0.1672 0.1551 0.1346 0.1872 0.4200 0.3054 0.2326 0.3744 0.2814\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 4434.631 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 526.929 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8537_大光銀行"
    ]
  },
  {
    "objectID": "04_8537_DDM.html#配当割引モデルの概要",
    "href": "04_8537_DDM.html#配当割引モデルの概要",
    "title": "8537_大光銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8537_大光銀行"
    ]
  },
  {
    "objectID": "04_8537_DDM.html#前提データの準備",
    "href": "04_8537_DDM.html#前提データの準備",
    "title": "8537_大光銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8537_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.3001, 0.1672, 0.1551, 0.1346, 0.1872, 0.4200, 0.3054, 0.2326, 0.3744, 0.2814)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1637\n 2    40             3004\n 3    38             3180\n 4    37             3579\n 5    39             2609\n 6    39             1165\n 7    37             1596\n 8    40             2074\n 9    39             1315\n10    39             1740\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.3001 0.1672 0.1551 0.1346 0.1872 0.4200 0.3054 0.2326 0.3744 0.2814\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 4434.631 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 526.929 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8537_大光銀行"
    ]
  },
  {
    "objectID": "02_7161.html#wacc加重平均資本コストの定義と重要性",
    "href": "02_7161.html#wacc加重平均資本コストの定義と重要性",
    "title": "7161_じもとHD",
    "section": "1.1 WACC（加重平均資本コスト）の定義と重要性",
    "text": "1.1 WACC（加重平均資本コスト）の定義と重要性\nWACCは、企業が資金を調達するために株主や債権者に平均して支払うコストを表す。企業が将来生み出すフリーキャッシュフロー（FCF）を現在価値に割り引く際の割引率としてWACCを用いることで、企業が継続的に価値を創造するために最低限稼ぐべき収益率を反映した評価が可能となる。WACCの一般的な算出式は以下の通りである。\n\\[WACC = \\frac{D}{D+E} \\times r_D \\times (1-T) + \\frac{E}{D+E} \\times r_E\\]\nここで、各記号は以下の要素を示す。\n\n\\(D\\) : 負債総額\n\\(E\\) : 時価総額\n\\(r\\_D\\) : 負債コスト\n\\(r\\_E\\) : 株主資本コスト\n\\(T\\) : 実効税率",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "7161_じもとHD"
    ]
  },
  {
    "objectID": "02_7161.html#waccの構成要素の算出",
    "href": "02_7161.html#waccの構成要素の算出",
    "title": "7161_じもとHD",
    "section": "1.2 WACCの構成要素の算出",
    "text": "1.2 WACCの構成要素の算出\nWACCを算出するためには、\\(D\\)、\\(E\\)、\\(r\\_D\\)、\\(r\\_E\\) の各要素を正確に特定する必要がある。\n\n1.2.1 前提データの準備\nまずは、分析に必要なライブラリを読み込み、財務データとTOPIXデータを準備します。\n\n# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n##じもとホールディングス\n## 財務データ読み込み\ndf &lt;- read_csv(\"ProcessedBankData/7161_processed_data.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,437 × 4\n      No 項目         `金額（百万円）` ファイル名        \n   &lt;dbl&gt; &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;             \n 1     1 現金預け金             159638 716120150311JP.csv\n 2     2 買入金銭債権              838 716120150311JP.csv\n 3     3 商品有価証券               26 716120150311JP.csv\n 4     4 有価証券               752854 716120150311JP.csv\n 5     5 貸出金                1600381 716120150311JP.csv\n 6     6 外国為替                  548 716120150311JP.csv\n 7     7 その他資産               6639 716120150311JP.csv\n 8     8 有形固定資産            24899 716120150311JP.csv\n 9     9 建物                     7907 716120150311JP.csv\n10    10 土地                    14406 716120150311JP.csv\n# ℹ 1,427 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\n\n1.2.2 負債総額 (\\(D\\)) の算出\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"譲渡性預金\" |df$項目==\"新株予約権付社債\" |df$項目 == \"借用金\" | df$項目 == \"社債\",]\nD &lt;- sum(as.numeric(D_df_current_data$`金額（百万円）`)) \n# 例として22行目と23行目の3列目を合計\n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 24366624 \n\n\n\n\n\n1.2.3 時価総額 (\\(E\\)) の算出\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 72840263\nP &lt;- 346         \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\", E, \"\\n\")\n\n時価総額 (E): 25202730998 \n\n\n\n\n\n1.2.4 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\"|df$項目==\"譲渡性預金利息\"|df$項目==\"コールマネー利息及び売渡手形利息\"|df$項目==\"その他の支払利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額（百万円）`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.117 %\n\n\n\n\n\n1.2.5 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n1.2.6 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n1.2.7 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0.384913011\n # 例示の値\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0.385 \n\n\n\n\n1.2.8 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n1.2.9 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 3.986 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "7161_じもとHD"
    ]
  },
  {
    "objectID": "02_7161.html#waccの最終算出",
    "href": "02_7161.html#waccの最終算出",
    "title": "7161_じもとHD",
    "section": "1.3 WACCの最終算出",
    "text": "1.3 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定\n# 最新の法人実効税率を調べて設定してください。\nT &lt;- 0.2320 # 例示の値 (23.20%)\n\n# WACCの計算\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 3.982 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "7161_じもとHD"
    ]
  },
  {
    "objectID": "02_7161.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "02_7161.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "7161_じもとHD",
    "section": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n1.4.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\n# ここでは、簡便的に過去データを利用していますが、実務では詳細な予測モデルを構築します。\nCFO &lt;- CFO %&gt;% rename(年度 = ファイル名) \nCFI &lt;- CFI %&gt;% rename(年度 = ファイル名) \nFCF_combined_df &lt;- inner_join(\n  CFO %&gt;% select(年度, CFO_金額 = `金額（百万円）`), # CFOデータから年度と金額（CFO_金額としてリネーム）を選択\n  CFI %&gt;% select(年度, CFI_金額 = `金額（百万円）`), # CFIデータから年度と金額（CFI_金額としてリネーム）を選択\n  by = \"年度\"\n) |&gt; \n  mutate(FCF = CFO_金額 - CFI_金額) |&gt; \n  mutate(FCF = replace_na(FCF, 0)) |&gt; \n  arrange(年度)\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 4\n   年度               CFO_金額 CFI_金額     FCF\n   &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;\n 1 716120150315JP.csv    20043   -14532   34575\n 2 716120160315JP.csv   -80784    58344 -139128\n 3 716120170315JP.csv    20683    42855  -22172\n 4 716120180315JP.csv   -63585    32639  -96224\n 5 716120190315JP.csv   -73709    84546 -158255\n 6 716120200315JP.csv    -7023    35390  -42413\n 7 716120210315JP.csv    96884   -84955  181839\n 8 716120220315JP.csv    28964    -7983   36947\n 9 716120230315JP.csv   -19967    19549  -39516\n10 716120240315JP.csv   -13850   129915 -143765\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]   34575 -139128  -22172  -96224 -158255  -42413  181839   36947  -39516\n[10] -143765\n\n\n\n\n1.4.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\nWarning:\nFCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] -143765 -143765 -143765 -143765 -143765\n\n\n\n\n\n1.4.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): -143765 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): -3610445 \n\n\n\n\n\n1.4.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): -3610445 \n\n\n\n\n\n1.4.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 -570.434 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "7161_じもとHD"
    ]
  },
  {
    "objectID": "02_8537.html#wacc加重平均資本コストの定義と重要性",
    "href": "02_8537.html#wacc加重平均資本コストの定義と重要性",
    "title": "8537_大光銀行",
    "section": "1.1 WACC（加重平均資本コスト）の定義と重要性",
    "text": "1.1 WACC（加重平均資本コスト）の定義と重要性\nWACCは、企業が資金を調達するために株主や債権者に平均して支払うコストを表す。企業が将来生み出すフリーキャッシュフロー（FCF）を現在価値に割り引く際の割引率としてWACCを用いることで、企業が継続的に価値を創造するために最低限稼ぐべき収益率を反映した評価が可能となる。WACCの一般的な算出式は以下の通りである。\n\\[WACC = \\frac{D}{D+E} \\times r_D \\times (1-T) + \\frac{E}{D+E} \\times r_E\\]\nここで、各記号は以下の要素を示す。\n\n\\(D\\) : 負債総額\n\\(E\\) : 時価総額\n\\(r\\_D\\) : 負債コスト\n\\(r\\_E\\) : 株主資本コスト\n\\(T\\) : 実効税率",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8537_大光銀行"
    ]
  },
  {
    "objectID": "02_8537.html#waccの構成要素の算出",
    "href": "02_8537.html#waccの構成要素の算出",
    "title": "8537_大光銀行",
    "section": "1.2 WACCの構成要素の算出",
    "text": "1.2 WACCの構成要素の算出\nWACCを算出するためには、\\(D\\)、\\(E\\)、\\(r\\_D\\)、\\(r\\_E\\) の各要素を正確に特定する必要がある。\n\n1.2.1 前提データの準備\nまずは、分析に必要なライブラリを読み込み、財務データとTOPIXデータを準備します。\n\n# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n##じもとホールディングス\n## 財務データ読み込み\ndf &lt;- read_csv(\"ProcessedBankData/8537_processed_data.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,414 × 4\n      No 項目         `金額（百万円）` ファイル名        \n   &lt;dbl&gt; &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;             \n 1     1 現金預け金              62783 853720150311JP.csv\n 2     2 商品有価証券              155 853720150311JP.csv\n 3     3 金銭の信託               2987 853720150311JP.csv\n 4     4 有価証券               361946 853720150311JP.csv\n 5     5 貸出金                 947038 853720150311JP.csv\n 6     6 外国為替                 2601 853720150311JP.csv\n 7     7 その他資産               9598 853720150311JP.csv\n 8     8 有形固定資産            14475 853720150311JP.csv\n 9     9 建物                     3076 853720150311JP.csv\n10    10 土地                    10539 853720150311JP.csv\n# ℹ 1,404 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\n\n1.2.2 負債総額 (\\(D\\)) の算出\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"コールマネー及び売渡手形\"  |df$項目 == \"借用金\" |df$項目==\"社債\"|df$項目==\"その他負債\",]\nD &lt;- sum(as.numeric(D_df_current_data$`金額（百万円）`)) \n# 例として22行目と23行目の3列目を合計\n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 14056839 \n\n\n\n\n\n1.2.3 時価総額 (\\(E\\)) の算出\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 9671000\nP &lt;- 1628          \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\", E, \"\\n\")\n\n時価総額 (E): 15744388000 \n\n\n\n\n\n1.2.4 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\"|df$項目==\"コールマネー及び売渡手形利息\"|df$項目==\"その他の支払利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額（百万円）`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.099 %\n\n\n\n\n\n1.2.5 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n1.2.6 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n1.2.7 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0.601711789\n # 例示の値\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0.602 \n\n\n\n\n1.2.8 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n1.2.9 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 5.346 %\n\n\n\n\n\n1.2.10 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定\n# 最新の法人実効税率を調べて設定してください。\nT &lt;- 0.2320 # 例示の値 (23.20%)\n\n# WACCの計算\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 5.342 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8537_大光銀行"
    ]
  },
  {
    "objectID": "02_8537.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "02_8537.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8537_大光銀行",
    "section": "1.3 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "1.3 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n1.3.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\n# ここでは、簡便的に過去データを利用していますが、実務では詳細な予測モデルを構築します。\nCFO &lt;- CFO %&gt;% rename(年度 = ファイル名) \nCFI &lt;- CFI %&gt;% rename(年度 = ファイル名) \nFCF_combined_df &lt;- inner_join(\n  CFO %&gt;% select(年度, CFO_金額 = `金額（百万円）`), # CFOデータから年度と金額（CFO_金額としてリネーム）を選択\n  CFI %&gt;% select(年度, CFI_金額 = `金額（百万円）`), # CFIデータから年度と金額（CFI_金額としてリネーム）を選択\n  by = \"年度\"\n) |&gt; \n  mutate(FCF = CFO_金額 - CFI_金額) |&gt; \n  mutate(FCF = replace_na(FCF, 0)) |&gt; \n  arrange(年度)\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 4\n   年度               CFO_金額 CFI_金額     FCF\n   &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;\n 1 853720150315JP.csv   -19939    10642  -30581\n 2 853720160315JP.csv    13927   -10613   24540\n 3 853720170315JP.csv    -5855    25415  -31270\n 4 853720180315JP.csv       26   -11718   11744\n 5 853720190315JP.csv    44927    -3486   48413\n 6 853720200315JP.csv     -647   -12460   11813\n 7 853720210315JP.csv   143439    -1667  145106\n 8 853720220315JP.csv    -4192    10626  -14818\n 9 853720230315JP.csv  -139400     6615 -146015\n10 853720240315JP.csv     1598   -19399   20997\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]  -30581   24540  -31270   11744   48413   11813  145106  -14818 -146015\n[10]   20997\n\n\n\n\n1.3.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\nWarning:\nFCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 20997 20997 20997 20997 20997\n\n\n\n\n\n1.3.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 20997 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 393085 \n\n\n\n\n\n1.3.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): 393085 \n\n\n\n\n\n1.3.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 133.362 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8537_大光銀行"
    ]
  },
  {
    "objectID": "04_8349_DDM.html",
    "href": "04_8349_DDM.html",
    "title": "8349_東北銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8349_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.3501, 0.2679, 0.2556, 0.4387, 0.3650, 0.3412, 0.4008, 0.3701, 0.3342, 0.3580)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1347\n 2    40             1960\n 3    39             1795\n 4    38              618\n 5    38              908\n 6    38             1111\n 7    35             1149\n 8    37             1337\n 9    39             1526\n10    38             1376\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.3501 0.2679 0.2556 0.4387 0.3650 0.3412 0.4008 0.3701 0.3342 0.3580\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 4019.681 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 477.624 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8349_東北銀行"
    ]
  },
  {
    "objectID": "04_8349_DDM.html#配当割引モデルの概要",
    "href": "04_8349_DDM.html#配当割引モデルの概要",
    "title": "8349_東北銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8349_東北銀行"
    ]
  },
  {
    "objectID": "04_8349_DDM.html#前提データの準備",
    "href": "04_8349_DDM.html#前提データの準備",
    "title": "8349_東北銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8349_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.3501, 0.2679, 0.2556, 0.4387, 0.3650, 0.3412, 0.4008, 0.3701, 0.3342, 0.3580)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1347\n 2    40             1960\n 3    39             1795\n 4    38              618\n 5    38              908\n 6    38             1111\n 7    35             1149\n 8    37             1337\n 9    39             1526\n10    38             1376\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.3501 0.2679 0.2556 0.4387 0.3650 0.3412 0.4008 0.3701 0.3342 0.3580\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 4019.681 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 477.624 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8349_東北銀行"
    ]
  },
  {
    "objectID": "04_8383_DDM.html",
    "href": "04_8383_DDM.html",
    "title": "8383_鳥取銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8383_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.2586, 0.2667, 0.4340, 0.5135, 0.5989, 0.5236, 0.4829, 0.5389, 0.4658, 0.4506)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             2137\n2    38             1992\n3    37             1311\n4    36             1108\n5    38              957\n6    38              898\n7    35             1008\n8    40              901\n9    37             1062\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.2586 0.2667 0.4340 0.5135 0.5989 0.5236 0.4829 0.5389 0.4658 0.4506\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 4427.456 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 526.076 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8383_鳥取銀行"
    ]
  },
  {
    "objectID": "04_8383_DDM.html#配当割引モデルの概要",
    "href": "04_8383_DDM.html#配当割引モデルの概要",
    "title": "8383_鳥取銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8383_鳥取銀行"
    ]
  },
  {
    "objectID": "04_8383_DDM.html#前提データの準備",
    "href": "04_8383_DDM.html#前提データの準備",
    "title": "8383_鳥取銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8383_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.2586, 0.2667, 0.4340, 0.5135, 0.5989, 0.5236, 0.4829, 0.5389, 0.4658, 0.4506)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             2137\n2    38             1992\n3    37             1311\n4    36             1108\n5    38              957\n6    38              898\n7    35             1008\n8    40              901\n9    37             1062\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.2586 0.2667 0.4340 0.5135 0.5989 0.5236 0.4829 0.5389 0.4658 0.4506\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 4427.456 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 526.076 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8383_鳥取銀行"
    ]
  },
  {
    "objectID": "05_5838.html",
    "href": "05_5838.html",
    "title": "5838_楽天銀行",
    "section": "",
    "text": "# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n## 楽天銀行財務データ読み込み\ndf &lt;- read_csv(\"Processed_PrimeBank/5838.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 532 × 3\n   項目                   金額          年度\n   &lt;chr&gt;                  &lt;chr&gt;        &lt;dbl&gt;\n 1 企業名                 Rakuten Bank  2025\n 2 現金預け金             4791097       2024\n 3 コールローン           6387          2024\n 4 債券貸借取引支払保証金 554524        2024\n 5 買入金銭債権           2550812       2024\n 6 有価証券               1090506       2024\n 7 貸出金                 4069567       2024\n 8 外国為替               25501         2024\n 9 その他資産             345415        2024\n10 有形固定資産           4336          2024\n# ℹ 522 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"借用金\" | df$項目 == \"社債\",]\nD &lt;- sum(as.numeric(D_df_current_data$`金額`)) \n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 39676796 \n\n\n\n\n\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 174482000\nP &lt;- 8426          \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\", E/1e+8, \"億円\\n\")\n\n時価総額 (E): 14701.85 億円\n\n\n\n\n\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.186 %\n\n\n\n\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n\n\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0  #-0.872360575 マイナスのため最小値である０ \n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0 \n\n\n\n\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 1.57 %\n\n\n\n\n\n\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定 \\# 最新の法人実効税率を調べて設定してください。 T \\&lt;- 0.2320 \\# 例示の値 (23.20%)\n\n# WACCの計算\n\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 1.57 %\n\n\n\n\n\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\nFCF_combined_df &lt;- full_join(CFO,CFI, by = \"年度\")\nFCF_combined_df &lt;- FCF_combined_df |&gt; \n  mutate(FCF = as.numeric(金額.x) + as.numeric(金額.y) )\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 4 × 6\n  項目.x                           金額.x   年度 項目.y            金額.y    FCF\n  &lt;chr&gt;                            &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;   &lt;dbl&gt;\n1 営業活動によるキャッシュ・フロー 1027880  2024 投資活動によるキャッシュ・フロー… -3010… 7.27e5\n2 営業活動によるキャッシュ・フロー 594695   2023 投資活動によるキャッシュ・フロー… -1935… 4.01e5\n3 営業活動によるキャッシュ・フロー 1461945  2022 投資活動によるキャッシュ・フロー… -4959… 9.66e5\n4 営業活動によるキャッシュ・フロー 1501494  2021 投資活動によるキャッシュ・フロー… 37548  1.54e6\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n[1]  726822  401117  965965 1539042\n\n\n\n\n\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGR (過去 3年間): 28.41%\n \n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 1539042 1539042 1539042 1539042 1539042\n\n\n\n\n\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 1539042 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 98030798",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#負債コスト-r_d-の算出",
    "href": "05_5838.html#負債コスト-r_d-の算出",
    "title": "5838_楽天銀行",
    "section": "",
    "text": "負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.186 %\n\n\n\n\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#β-ベータ",
    "href": "05_5838.html#β-ベータ",
    "title": "5838_楽天銀行",
    "section": "",
    "text": "評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0  #-0.872360575 マイナスのため最小値である０ \n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0 \n\n\n\n\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#waccの最終算出",
    "href": "05_5838.html#waccの最終算出",
    "title": "5838_楽天銀行",
    "section": "",
    "text": "上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定 \\# 最新の法人実効税率を調べて設定してください。 T \\&lt;- 0.2320 \\# 例示の値 (23.20%)\n\n# WACCの計算\n\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "05_5838.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "5838_楽天銀行",
    "section": "",
    "text": "割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\nFCF_combined_df &lt;- full_join(CFO,CFI, by = \"年度\")\nFCF_combined_df &lt;- FCF_combined_df |&gt; \n  mutate(FCF = as.numeric(金額.x) + as.numeric(金額.y) )\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 4 × 6\n  項目.x                           金額.x   年度 項目.y            金額.y    FCF\n  &lt;chr&gt;                            &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;   &lt;dbl&gt;\n1 営業活動によるキャッシュ・フロー 1027880  2024 投資活動によるキャッシュ・フロー… -3010… 7.27e5\n2 営業活動によるキャッシュ・フロー 594695   2023 投資活動によるキャッシュ・フロー… -1935… 4.01e5\n3 営業活動によるキャッシュ・フロー 1461945  2022 投資活動によるキャッシュ・フロー… -4959… 9.66e5\n4 営業活動によるキャッシュ・フロー 1501494  2021 投資活動によるキャッシュ・フロー… 37548  1.54e6\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n[1]  726822  401117  965965 1539042\n\n\n\n\n\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGR (過去 3年間): 28.41%\n \n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 1539042 1539042 1539042 1539042 1539042\n\n\n\n\n\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 1539042 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 98030798",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#残余利益モデルrim",
    "href": "05_5838.html#残余利益モデルrim",
    "title": "5838_楽天銀行",
    "section": "4.1 残余利益モデル(RIM)",
    "text": "4.1 残余利益モデル(RIM)",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#残余利益モデルの概要",
    "href": "05_5838.html#残余利益モデルの概要",
    "title": "5838_楽天銀行",
    "section": "4.2 残余利益モデルの概要",
    "text": "4.2 残余利益モデルの概要\n残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#前提データの準備",
    "href": "05_5838.html#前提データの準備",
    "title": "5838_楽天銀行",
    "section": "4.3 前提データの準備",
    "text": "4.3 前提データの準備\n\nlibrary(stringr)\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(`年度`, `金額`)\n\n# ---\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets_intermediate &lt;- df %&gt;%\n  filter(!str_detect(項目, \"企業名\")) %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  # 金額列を数値に変換する\n  mutate(金額 = parse_number(金額)) %&gt;%\n  group_by(年度)\n\n# 中間経過を出力する\nprint(\"自己資本簿価の途中経過（項目ごとの金額）:\")\n\n[1] \"自己資本簿価の途中経過（項目ごとの金額）:\"\n\nprint(Net_assets_intermediate)\n\n# A tibble: 8 × 3\n# Groups:   年度 [4]\n  項目                         金額  年度\n  &lt;chr&gt;                       &lt;dbl&gt; &lt;dbl&gt;\n1 株主資本合計               264311  2024\n2 その他の包括利益累計額合計  -3662  2024\n3 株主資本合計               216549  2023\n4 その他の包括利益累計額合計  -3517  2023\n5 株主資本合計               187445  2022\n6 その他の包括利益累計額合計   -363  2022\n7 株主資本合計               167405  2021\n8 その他の包括利益累計額合計    568  2021\n\n# 中間結果を使用して最終的な自己資本を計算する\nNet_assets &lt;- Net_assets_intermediate %&gt;%\n  summarise(自己資本 = sum(金額, na.rm = TRUE), .groups = 'drop')\n\n# ---\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 4 × 2\n   年度 金額 \n  &lt;dbl&gt; &lt;chr&gt;\n1  2024 33196\n2  2023 26461\n3  2022 19087\n4  2021 18866\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 4 × 2\n   年度 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1  2021   167973\n2  2022   187082\n3  2023   213032\n4  2024   260649\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.02 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- as.numeric(Net_Income_U$`金額`[t])\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 4 × 2\n   年度 金額 \n  &lt;dbl&gt; &lt;chr&gt;\n1  2024 33196\n2  2023 26461\n3  2022 19087\n4  2021 18866\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: -2,762,514 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 260,649 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 76,735.61 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -3,099,899 百万円",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#配当割引モデルの概要",
    "href": "05_5838.html#配当割引モデルの概要",
    "title": "5838_楽天銀行",
    "section": "5.1 配当割引モデルの概要",
    "text": "5.1 配当割引モデルの概要\n配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "05_5838.html#前提データの準備-1",
    "href": "05_5838.html#前提データの準備-1",
    "title": "5838_楽天銀行",
    "section": "5.2 前提データの準備",
    "text": "5.2 前提データの準備\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(年度, `金額`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.4946, 0.4299, 0.2924, 0.4520)\n\n# 当期純利益\nprint(Net_Income_U)\n\n# A tibble: 4 × 2\n   年度 金額 \n  &lt;dbl&gt; &lt;chr&gt;\n1  2024 33196\n2  2023 26461\n3  2022 19087\n4  2021 18866\n\n# 配当性向\nprint(Pay_ratio)\n\n[1] 0.4946 0.4299 0.2924 0.4520\n\n\n\nLook_Payratio &lt;- tibble(Year = c( 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) + \n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nt &lt;- 1:length(Net_assets)\n\nP0 &lt;- sum(Net_assets/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 817015.6 百万円\n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 4682.521 円",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "5838_楽天銀行"
    ]
  },
  {
    "objectID": "04_8365_DDM.html",
    "href": "04_8365_DDM.html",
    "title": "8365_富山銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8365_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.2384, 0.2827, 0.2405, 0.2141, 0.1965, 0.3824, 0.5156, 0.8902, 0.2862, 0.4442)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             1261\n 2    33             1070\n 3    34             1242\n 4    36             1370\n 5    36             1441\n 6    35              738\n 7    37              587\n 8    37              357\n 9    37              996\n10    35              648\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.2384 0.2827 0.2405 0.2141 0.1965 0.3824 0.5156 0.8902 0.2862 0.4442\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 2737.044 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 325.219 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8365_富山銀行"
    ]
  },
  {
    "objectID": "04_8365_DDM.html#配当割引モデルの概要",
    "href": "04_8365_DDM.html#配当割引モデルの概要",
    "title": "8365_富山銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8365_富山銀行"
    ]
  },
  {
    "objectID": "04_8365_DDM.html#前提データの準備",
    "href": "04_8365_DDM.html#前提データの準備",
    "title": "8365_富山銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8365_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.2384, 0.2827, 0.2405, 0.2141, 0.1965, 0.3824, 0.5156, 0.8902, 0.2862, 0.4442)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             1261\n 2    33             1070\n 3    34             1242\n 4    36             1370\n 5    36             1441\n 6    35              738\n 7    37              587\n 8    37              357\n 9    37              996\n10    35              648\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.2384 0.2827 0.2405 0.2141 0.1965 0.3824 0.5156 0.8902 0.2862 0.4442\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 2737.044 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 325.219 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8365_富山銀行"
    ]
  },
  {
    "objectID": "00_About_Valuation.html",
    "href": "00_About_Valuation.html",
    "title": "企業価値評価とは",
    "section": "",
    "text": "グローバル経済において、企業の合併・買収(M&A)や新規株式公開(IPO)、資金調達といった場面において、企業価値評価は不可欠なプロセスとして位置づけられる。企業価値評価の基本的な概念、学術的、実務的意義として何があげられるのだろうか\n\n企業価値評価は、企業の事業戦略、財務状態、マクロ経済環境といった要素を統合的に分析する。"
  },
  {
    "objectID": "00_About_Valuation.html#はじめに",
    "href": "00_About_Valuation.html#はじめに",
    "title": "企業価値評価とは",
    "section": "",
    "text": "グローバル経済において、企業の合併・買収(M&A)や新規株式公開(IPO)、資金調達といった場面において、企業価値評価は不可欠なプロセスとして位置づけられる。企業価値評価の基本的な概念、学術的、実務的意義として何があげられるのだろうか\n\n企業価値評価は、企業の事業戦略、財務状態、マクロ経済環境といった要素を統合的に分析する。"
  },
  {
    "objectID": "00_About_Valuation.html#企業価値評価の定義と目的",
    "href": "00_About_Valuation.html#企業価値評価の定義と目的",
    "title": "企業価値評価とは",
    "section": "2 企業価値評価の定義と目的",
    "text": "2 企業価値評価の定義と目的\n\n企業価値評価とは何か？\n企業価値表評価とは、特定の時点における企業の経済的価値を貨幣単位で算定するプロセスを指します。企業の帳簿上の資産価値を算出するものではなく、企業が将来にわたって生み出すとされる利益をを評価するなど将来を見据えた分析手法となっています。\n企業価値は量的なデータを中心として分析されますが、質的データも考慮する必要があります。\n企業価値評価の主要な目的\n\n\nM&A(企業の合併、買収)：買収対象企業の適正な価格を算定し、買収プレミアムの妥当性を判断する際の情報となる、売り手も自社価値を客観的に提示するために評価を行います。\n資金調達（エクイティ・ファイナンス）： 新規株式発行による増資や、未公開企業の株式公開（IPO）に際して、投資家への情報提供と株価設定の根拠として用いられます。投資家は、企業価値評価を基に投資判断を行います。\n事業戦略・経営意思決定：企業内部においては、事業ポートフォリオの見直し、新規事業への投資判断、不採算事業からの撤退判断など、経営資源の最適配分に関する戦略的意思決定の根拠として活用されます。\n組織再編・事業承継： 会社分割、株式交換・移転、事業譲渡といった組織再編時や、非上場企業の事業承継時における株主間の利害調整や課税評価の基礎となります。"
  },
  {
    "objectID": "03_8537_RIM.html",
    "href": "03_8537_RIM.html",
    "title": "8537_大光銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8537_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1637\n 2    40             3004\n 3    38             3180\n 4    37             3579\n 5    39             2609\n 6    39             1165\n 7    37             1596\n 8    40             2074\n 9    39             1315\n10    39             1740\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 9 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    38    73242\n2    39   147341\n3    40   141497\n4    42    59880\n5    43   137175\n6    44   144040\n7    46    19031\n8    47    33113\n9    48    27244\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.601711789\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 5.346 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1637\n 2    40             3004\n 3    38             3180\n 4    37             3579\n 5    39             2609\n 6    39             1165\n 7    37             1596\n 8    40             2074\n 9    39             1315\n10    39             1740\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 18,132.62 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 27,244 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 3,170.38 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -12,281.76 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8537_大光銀行"
    ]
  },
  {
    "objectID": "03_8537_RIM.html#残余利益モデルの概要",
    "href": "03_8537_RIM.html#残余利益モデルの概要",
    "title": "8537_大光銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8537_大光銀行"
    ]
  },
  {
    "objectID": "03_8537_RIM.html#前提データの準備",
    "href": "03_8537_RIM.html#前提データの準備",
    "title": "8537_大光銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8537_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1637\n 2    40             3004\n 3    38             3180\n 4    37             3579\n 5    39             2609\n 6    39             1165\n 7    37             1596\n 8    40             2074\n 9    39             1315\n10    39             1740\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 9 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    38    73242\n2    39   147341\n3    40   141497\n4    42    59880\n5    43   137175\n6    44   144040\n7    46    19031\n8    47    33113\n9    48    27244\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.601711789\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 5.346 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             1637\n 2    40             3004\n 3    38             3180\n 4    37             3579\n 5    39             2609\n 6    39             1165\n 7    37             1596\n 8    40             2074\n 9    39             1315\n10    39             1740\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 18,132.62 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 27,244 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 3,170.38 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -12,281.76 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8537_大光銀行"
    ]
  },
  {
    "objectID": "02_8416.html#wacc加重平均資本コストの定義と重要性",
    "href": "02_8416.html#wacc加重平均資本コストの定義と重要性",
    "title": "8416_高知銀行",
    "section": "1.1 WACC（加重平均資本コスト）の定義と重要性",
    "text": "1.1 WACC（加重平均資本コスト）の定義と重要性\nWACCは、企業が資金を調達するために株主や債権者に平均して支払うコストを表す。企業が将来生み出すフリーキャッシュフロー（FCF）を現在価値に割り引く際の割引率としてWACCを用いることで、企業が継続的に価値を創造するために最低限稼ぐべき収益率を反映した評価が可能となる。WACCの一般的な算出式は以下の通りである。\n\\[WACC = \\frac{D}{D+E} \\times r_D \\times (1-T) + \\frac{E}{D+E} \\times r_E\\]\nここで、各記号は以下の要素を示す。\n\n\\(D\\) : 負債総額\n\\(E\\) : 時価総額\n\\(r\\_D\\) : 負債コスト\n\\(r\\_E\\) : 株主資本コスト\n\\(T\\) : 実効税率",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8416_高知銀行"
    ]
  },
  {
    "objectID": "02_8416.html#waccの構成要素の算出",
    "href": "02_8416.html#waccの構成要素の算出",
    "title": "8416_高知銀行",
    "section": "1.2 WACCの構成要素の算出",
    "text": "1.2 WACCの構成要素の算出\nWACCを算出するためには、\\(D\\)、\\(E\\)、\\(r\\_D\\)、\\(r\\_E\\) の各要素を正確に特定する必要がある。\n\n1.2.1 前提データの準備\nまずは、分析に必要なライブラリを読み込み、財務データとTOPIXデータを準備します。\n\n# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n##じもとホールディングス\n## 財務データ読み込み\ndf &lt;- read_csv(\"ProcessedBankData/8416_processed_data.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,384 × 4\n      No 項目                         `金額（百万円）` ファイル名        \n   &lt;dbl&gt; &lt;chr&gt;                                   &lt;dbl&gt; &lt;chr&gt;             \n 1     1 現金預け金                              47150 841620150311JP.csv\n 2     2 金銭の信託                               1069 841620150311JP.csv\n 3     3 有価証券                               308966 841620150311JP.csv\n 4     4 貸出金                                 672592 841620150311JP.csv\n 5     5 外国為替                                 1074 841620150311JP.csv\n 6     6 リース債権及びリース投資資産             7330 841620150311JP.csv\n 7     7 その他資産                               7363 841620150311JP.csv\n 8     8 有形固定資産                            15553 841620150311JP.csv\n 9     9 建物                                     3742 841620150311JP.csv\n10    10 土地                                    10795 841620150311JP.csv\n# ℹ 1,374 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\n\n1.2.2 負債総額 (\\(D\\)) の算出\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"外国為替\"  |df$項目 == \"借用金\" ,]\nD &lt;- sum(as.numeric(D_df_current_data$`金額（百万円）`)) \n# 例として22行目と23行目の3列目を合計\n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 10227343 \n\n\n\n\n\n1.2.3 時価総額 (\\(E\\)) の算出\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 10244000 + 680\nP &lt;- 805           \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\", E, \"\\n\")\n\n時価総額 (E): 8246967400 \n\n\n\n\n\n1.2.4 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"コールマネー利息及び売渡手形利息\"|df$項目==\"譲渡性預金利息\"|df$項目==\"その他の支払利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額（百万円）`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.19 %\n\n\n\n\n\n1.2.5 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n1.2.6 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n1.2.7 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0.873145223\n # 例示の値\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0.873 \n\n\n\n\n1.2.8 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n1.2.9 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 7.05 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8416_高知銀行"
    ]
  },
  {
    "objectID": "02_8416.html#waccの最終算出",
    "href": "02_8416.html#waccの最終算出",
    "title": "8416_高知銀行",
    "section": "1.3 WACCの最終算出",
    "text": "1.3 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定\n# 最新の法人実効税率を調べて設定してください。\nT &lt;- 0.2320 # 例示の値 (23.20%)\n\n# WACCの計算\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 7.041 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8416_高知銀行"
    ]
  },
  {
    "objectID": "02_8416.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "02_8416.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8416_高知銀行",
    "section": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n1.4.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\n# ここでは、簡便的に過去データを利用していますが、実務では詳細な予測モデルを構築します。\nCFO &lt;- CFO %&gt;% rename(年度 = ファイル名) \nCFI &lt;- CFI %&gt;% rename(年度 = ファイル名) \nFCF_combined_df &lt;- inner_join(\n  CFO %&gt;% select(年度, CFO_金額 = `金額（百万円）`), # CFOデータから年度と金額（CFO_金額としてリネーム）を選択\n  CFI %&gt;% select(年度, CFI_金額 = `金額（百万円）`), # CFIデータから年度と金額（CFI_金額としてリネーム）を選択\n  by = \"年度\"\n) |&gt; \n  mutate(FCF = CFO_金額 - CFI_金額) |&gt; \n  mutate(FCF = replace_na(FCF, 0)) |&gt; \n  arrange(年度)\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 4\n   年度               CFO_金額 CFI_金額    FCF\n   &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;\n 1 841620150315JP.csv    17828    -1290  19118\n 2 841620160315JP.csv    -1010    -2010   1000\n 3 841620170315JP.csv    26874    -7439  34313\n 4 841620180315JP.csv    19187    -4084  23271\n 5 841620190315JP.csv   -20315    10291 -30606\n 6 841620200315JP.csv    18194    -3032  21226\n 7 841620210315JP.csv    80494     -513  81007\n 8 841620220315JP.csv   -34283     2488 -36771\n 9 841620230315JP.csv   -31976     6114 -38090\n10 841620240315JP.csv   -22071    -5936 -16135\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]  19118   1000  34313  23271 -30606  21226  81007 -36771 -38090 -16135\n\n\n\n\n1.4.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\nWarning:\nFCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] -16135 -16135 -16135 -16135 -16135\n\n\n\n\n\n1.4.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): -16135 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): -229150 \n\n\n\n\n\n1.4.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): -229150 \n\n\n\n\n\n1.4.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 -195.648 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8416_高知銀行"
    ]
  },
  {
    "objectID": "02_8562.html#wacc加重平均資本コストの定義と重要性",
    "href": "02_8562.html#wacc加重平均資本コストの定義と重要性",
    "title": "8562_福島銀行",
    "section": "1.1 WACC（加重平均資本コスト）の定義と重要性",
    "text": "1.1 WACC（加重平均資本コスト）の定義と重要性\nWACCは、企業が資金を調達するために株主や債権者に平均して支払うコストを表す。企業が将来生み出すフリーキャッシュフロー（FCF）を現在価値に割り引く際の割引率としてWACCを用いることで、企業が継続的に価値を創造するために最低限稼ぐべき収益率を反映した評価が可能となる。WACCの一般的な算出式は以下の通りである。\n\\[WACC = \\frac{D}{D+E} \\times r_D \\times (1-T) + \\frac{E}{D+E} \\times r_E\\]\nここで、各記号は以下の要素を示す。\n\n\\(D\\) : 負債総額\n\\(E\\) : 時価総額\n\\(r\\_D\\) : 負債コスト\n\\(r\\_E\\) : 株主資本コスト\n\\(T\\) : 実効税率",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8562_福島銀行"
    ]
  },
  {
    "objectID": "02_8562.html#waccの構成要素の算出",
    "href": "02_8562.html#waccの構成要素の算出",
    "title": "8562_福島銀行",
    "section": "1.2 WACCの構成要素の算出",
    "text": "1.2 WACCの構成要素の算出\nWACCを算出するためには、\\(D\\)、\\(E\\)、\\(r\\_D\\)、\\(r\\_E\\) の各要素を正確に特定する必要がある。\n\n1.2.1 前提データの準備\nまずは、分析に必要なライブラリを読み込み、財務データとTOPIXデータを準備します。\n\n# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n##じもとホールディングス\n## 財務データ読み込み\ndf &lt;- read_csv(\"ProcessedBankData/8562_processed_data.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,287 × 4\n      No 項目                         `金額（百万円）` ファイル名        \n   &lt;dbl&gt; &lt;chr&gt;                                   &lt;dbl&gt; &lt;chr&gt;             \n 1     1 現金預け金                              36795 856220150311JP.csv\n 2     2 商品有価証券                              106 856220150311JP.csv\n 3     3 金銭の信託                               1690 856220150311JP.csv\n 4     4 有価証券                               236007 856220150311JP.csv\n 5     5 貸出金                                 474227 856220150311JP.csv\n 6     6 外国為替                                  256 856220150311JP.csv\n 7     7 リース債権及びリース投資資産             2886 856220150311JP.csv\n 8     8 その他資産                               6307 856220150311JP.csv\n 9     9 有形固定資産                            11331 856220150311JP.csv\n10    10 建物                                     4685 856220150311JP.csv\n# ℹ 1,277 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\n\n1.2.2 負債総額 (\\(D\\)) の算出\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"譲渡性預金\"  |df$項目 == \"借用金\"|df$項目==\"外国為替\" | df$項目 == \"社債\"  |df$項目 == \"その他負債\" ,]\nD &lt;- sum(as.numeric(D_df_current_data$`金額（百万円）`)) \n# 例として22行目と23行目の3列目を合計\n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 7605514 \n\n\n\n\n\n1.2.3 時価総額 (\\(E\\)) の算出\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 34900000\nP &lt;- 232          \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\", E, \"\\n\")\n\n時価総額 (E): 8096800000 \n\n\n\n\n\n1.2.4 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\"|df$項目==\"譲渡性預金利息\"|df$項目==\"その他の支払利息\"|df$項目==\"債券貸借取引支払利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額（百万円）`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.106 %\n\n\n\n\n\n1.2.5 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n1.2.6 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n1.2.7 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 1.114919103\n # 例示の値\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 1.115 \n\n\n\n\n1.2.8 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n1.2.9 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 8.567 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8562_福島銀行"
    ]
  },
  {
    "objectID": "02_8562.html#waccの最終算出",
    "href": "02_8562.html#waccの最終算出",
    "title": "8562_福島銀行",
    "section": "1.3 WACCの最終算出",
    "text": "1.3 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定\n# 最新の法人実効税率を調べて設定してください。\nT &lt;- 0.2320 # 例示の値 (23.20%)\n\n# WACCの計算\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 8.559 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8562_福島銀行"
    ]
  },
  {
    "objectID": "02_8562.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "02_8562.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8562_福島銀行",
    "section": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n1.4.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\n# ここでは、簡便的に過去データを利用していますが、実務では詳細な予測モデルを構築します。\nCFO &lt;- CFO %&gt;% rename(年度 = ファイル名) \nCFI &lt;- CFI %&gt;% rename(年度 = ファイル名) \nFCF_combined_df &lt;- inner_join(\n  CFO %&gt;% select(年度, CFO_金額 = `金額（百万円）`), # CFOデータから年度と金額（CFO_金額としてリネーム）を選択\n  CFI %&gt;% select(年度, CFI_金額 = `金額（百万円）`), # CFIデータから年度と金額（CFI_金額としてリネーム）を選択\n  by = \"年度\"\n) |&gt; \n  mutate(FCF = CFO_金額 - CFI_金額) |&gt; \n  mutate(FCF = replace_na(FCF, 0)) |&gt; \n  arrange(年度)\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 4\n   年度               CFO_金額 CFI_金額    FCF\n   &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;\n 1 856220150315JP.csv    26020   -14975  40995\n 2 856220160315JP.csv   -11250    70193 -81443\n 3 856220170315JP.csv   -11859     4047 -15906\n 4 856220180315JP.csv   -19942     1057 -20999\n 5 856220190315JP.csv    25292    14227  11065\n 6 856220200315JP.csv   -39120    15236 -54356\n 7 856220210315JP.csv    39072   -23078  62150\n 8 856220220315JP.csv    13184   -14219  27403\n 9 856220230315JP.csv    -7431    -6454   -977\n10 856220240315JP.csv     1184     1489   -305\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]  40995 -81443 -15906 -20999  11065 -54356  62150  27403   -977   -305\n\n\n\n\n1.4.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\nWarning:\nFCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] -305 -305 -305 -305 -305\n\n\n\n\n\n1.4.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): -305 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): -3563 \n\n\n\n\n\n1.4.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): -3563 \n\n\n\n\n\n1.4.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 -3.767 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8562_福島銀行"
    ]
  },
  {
    "objectID": "02_8365.html#wacc加重平均資本コストの定義と重要性",
    "href": "02_8365.html#wacc加重平均資本コストの定義と重要性",
    "title": "8365_富山銀行",
    "section": "1.1 WACC（加重平均資本コスト）の定義と重要性",
    "text": "1.1 WACC（加重平均資本コスト）の定義と重要性\nWACCは、企業が資金を調達するために株主や債権者に平均して支払うコストを表す。企業が将来生み出すフリーキャッシュフロー（FCF）を現在価値に割り引く際の割引率としてWACCを用いることで、企業が継続的に価値を創造するために最低限稼ぐべき収益率を反映した評価が可能となる。WACCの一般的な算出式は以下の通りである。\n\\[WACC = \\frac{D}{D+E} \\times r_D \\times (1-T) + \\frac{E}{D+E} \\times r_E\\]\nここで、各記号は以下の要素を示す。\n\n\\(D\\) : 負債総額\n\\(E\\) : 時価総額\n\\(r\\_D\\) : 負債コスト\n\\(r\\_E\\) : 株主資本コスト\n\\(T\\) : 実効税率",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8365_富山銀行"
    ]
  },
  {
    "objectID": "02_8365.html#waccの構成要素の算出",
    "href": "02_8365.html#waccの構成要素の算出",
    "title": "8365_富山銀行",
    "section": "1.2 WACCの構成要素の算出",
    "text": "1.2 WACCの構成要素の算出\nWACCを算出するためには、\\(D\\)、\\(E\\)、\\(r\\_D\\)、\\(r\\_E\\) の各要素を正確に特定する必要がある。\n\n1.2.1 前提データの準備\nまずは、分析に必要なライブラリを読み込み、財務データとTOPIXデータを準備します。\n\n# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n##じもとホールディングス\n## 財務データ読み込み\ndf &lt;- read_csv(\"ProcessedBankData/8365_processed_data.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,305 × 4\n      No 項目                         `金額（百万円）` ファイル名        \n   &lt;dbl&gt; &lt;chr&gt;                                   &lt;dbl&gt; &lt;chr&gt;             \n 1     1 現金預け金                              28430 836520150311JP.csv\n 2     2 有価証券                               166365 836520150311JP.csv\n 3     3 貸出金                                 273589 836520150311JP.csv\n 4     4 外国為替                                  680 836520150311JP.csv\n 5     5 リース債権及びリース投資資産             3795 836520150311JP.csv\n 6     6 その他資産                               2210 836520150311JP.csv\n 7     7 有形固定資産                             4645 836520150311JP.csv\n 8     8 建物                                     1012 836520150311JP.csv\n 9     9 土地                                     3313 836520150311JP.csv\n10    10 リース資産                                  7 836520150311JP.csv\n# ℹ 1,295 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\n\n1.2.2 負債総額 (\\(D\\)) の算出\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" |df$項目 == \"借用金\" ,]\nD &lt;- sum(as.numeric(D_df_current_data$`金額（百万円）`)) \n# 例として22行目と23行目の3列目を合計\n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 4698015 \n\n\n\n\n\n1.2.3 時価総額 (\\(E\\)) の算出\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 5444000\nP &lt;- 1550          \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\",round(E / 100000000 ,2),\"億円\\n\")\n\n時価総額 (E): 84.38 億円\n\n\n\n\n\n1.2.4 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\"|df$項目==\"債権貸借取引支払利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額（百万円）`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.067 %\n\n\n\n\n\n1.2.5 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n1.2.6 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n1.2.7 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 1.088892856\n\n # 例示の値\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 1.089 \n\n\n\n\n1.2.8 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n1.2.9 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 8.404 %\n\n\n\n\n\n1.2.10 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定\n# 最新の法人実効税率を調べて設定してください。\nT &lt;- 0.2320 # 例示の値 (23.20%)\n\n# WACCの計算\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 8.399 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8365_富山銀行"
    ]
  },
  {
    "objectID": "02_8365.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "02_8365.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8365_富山銀行",
    "section": "1.3 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "1.3 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n1.3.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\n# ここでは、簡便的に過去データを利用していますが、実務では詳細な予測モデルを構築します。\nCFO &lt;- CFO %&gt;% rename(年度 = ファイル名) \nCFI &lt;- CFI %&gt;% rename(年度 = ファイル名) \nFCF_combined_df &lt;- inner_join(\n  CFO %&gt;% select(年度, CFO_金額 = `金額（百万円）`), # CFOデータから年度と金額（CFO_金額としてリネーム）を選択\n  CFI %&gt;% select(年度, CFI_金額 = `金額（百万円）`), # CFIデータから年度と金額（CFI_金額としてリネーム）を選択\n  by = \"年度\"\n) |&gt; \n  mutate(FCF = CFO_金額 - CFI_金額) |&gt; \n  mutate(FCF = replace_na(FCF, 0)) |&gt; \n  arrange(年度)\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 4\n   年度               CFO_金額 CFI_金額    FCF\n   &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;\n 1 836520150315JP.csv    25178    -4809  29987\n 2 836520160315JP.csv    -2581    18025 -20606\n 3 836520170315JP.csv    -2743    -2062   -681\n 4 836520180315JP.csv     2858     2890    -32\n 5 836520190315JP.csv    -8514     7215 -15729\n 6 836520200315JP.csv   -11156    16654 -27810\n 7 836520210315JP.csv    11688   -19213  30901\n 8 836520220315JP.csv    11281   -13302  24583\n 9 836520230315JP.csv   -19220    13789 -33009\n10 836520240315JP.csv     2641      972   1669\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]  29987 -20606   -681    -32 -15729 -27810  30901  24583 -33009   1669\n\n\n\n\n1.3.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGR (過去 9年間): -27.45%\n \n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 1669 1669 1669 1669 1669\n\n\n\n\n\n1.3.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 1669 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 19871 \n\n\n\n\n\n1.3.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation/100,2), \"億円\\n\")\n\nDCF法による企業価値評価 (Valuation): 198.71 億円\n\n\n\n\n\n1.3.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 19.779 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8365_富山銀行"
    ]
  },
  {
    "objectID": "03_8562_RIM.html",
    "href": "03_8562_RIM.html",
    "title": "8562_福島銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8562_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             3453\n 2    40             2681\n 3    39             1254\n 4    41            -3120\n 5    38              532\n 6    37              413\n 7    38            -1717\n 8    38              833\n 9    34              879\n10    35              869\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 7 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    35    61103\n2    36    59409\n3    37   118622\n4    39    48096\n5    40    -4372\n6    41     -812\n7    43     5795\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.114919103\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.567 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             3453\n 2    40             2681\n 3    39             1254\n 4    41            -3120\n 5    38              532\n 6    37              413\n 7    38            -1717\n 8    38              833\n 9    34              879\n10    35              869\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 6,425.17 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 5,795 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 140.51 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: 489.66 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8562_福島銀行"
    ]
  },
  {
    "objectID": "03_8562_RIM.html#残余利益モデルの概要",
    "href": "03_8562_RIM.html#残余利益モデルの概要",
    "title": "8562_福島銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8562_福島銀行"
    ]
  },
  {
    "objectID": "03_8562_RIM.html#前提データの準備",
    "href": "03_8562_RIM.html#前提データの準備",
    "title": "8562_福島銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8562_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             3453\n 2    40             2681\n 3    39             1254\n 4    41            -3120\n 5    38              532\n 6    37              413\n 7    38            -1717\n 8    38              833\n 9    34              879\n10    35              869\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 7 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    35    61103\n2    36    59409\n3    37   118622\n4    39    48096\n5    40    -4372\n6    41     -812\n7    43     5795\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.114919103\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.567 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             3453\n 2    40             2681\n 3    39             1254\n 4    41            -3120\n 5    38              532\n 6    37              413\n 7    38            -1717\n 8    38              833\n 9    34              879\n10    35              869\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 6,425.17 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 5,795 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 140.51 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: 489.66 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8562_福島銀行"
    ]
  },
  {
    "objectID": "02_8563.html#wacc加重平均資本コストの定義と重要性",
    "href": "02_8563.html#wacc加重平均資本コストの定義と重要性",
    "title": "8563_大東銀行",
    "section": "1.1 WACC（加重平均資本コスト）の定義と重要性",
    "text": "1.1 WACC（加重平均資本コスト）の定義と重要性\nWACCは、企業が資金を調達するために株主や債権者に平均して支払うコストを表す。企業が将来生み出すフリーキャッシュフロー（FCF）を現在価値に割り引く際の割引率としてWACCを用いることで、企業が継続的に価値を創造するために最低限稼ぐべき収益率を反映した評価が可能となる。WACCの一般的な算出式は以下の通りである。\n\\[WACC = \\frac{D}{D+E} \\times r_D \\times (1-T) + \\frac{E}{D+E} \\times r_E\\]\nここで、各記号は以下の要素を示す。\n\n\\(D\\) : 負債総額\n\\(E\\) : 時価総額\n\\(r\\_D\\) : 負債コスト\n\\(r\\_E\\) : 株主資本コスト\n\\(T\\) : 実効税率",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "02_8563.html#waccの構成要素の算出",
    "href": "02_8563.html#waccの構成要素の算出",
    "title": "8563_大東銀行",
    "section": "1.2 WACCの構成要素の算出",
    "text": "1.2 WACCの構成要素の算出\nWACCを算出するためには、\\(D\\)、\\(E\\)、\\(r\\_D\\)、\\(r\\_E\\) の各要素を正確に特定する必要がある。\n\n1.2.1 前提データの準備\nまずは、分析に必要なライブラリを読み込み、財務データとTOPIXデータを準備します。\n\n# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n##じもとホールディングス\n## 財務データ読み込み\ndf &lt;- read_csv(\"ProcessedBankData/8563_processed_data.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,296 × 4\n      No 項目                         `金額（百万円）` ファイル名        \n   &lt;dbl&gt; &lt;chr&gt;                                   &lt;dbl&gt; &lt;chr&gt;             \n 1     1 現金預け金                              70944 856320150311JP.csv\n 2     2 コールローン及び買入手形                 5000 856320150311JP.csv\n 3     3 有価証券                               234701 856320150311JP.csv\n 4     4 貸出金                                 472194 856320150311JP.csv\n 5     5 外国為替                                  337 856320150311JP.csv\n 6     6 リース債権及びリース投資資産             1995 856320150311JP.csv\n 7     7 その他資産                               3291 856320150311JP.csv\n 8     8 有形固定資産                            12932 856320150311JP.csv\n 9     9 建物                                     2297 856320150311JP.csv\n10    10 土地                                     9646 856320150311JP.csv\n# ℹ 1,286 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\n\n1.2.2 負債総額 (\\(D\\)) の算出\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"譲渡性預金\"  |df$項目 == \"借用金\" |df$項目==\"社債\"|df$項目==\"その他負債\",]\nD &lt;- sum(as.numeric(D_df_current_data$`金額（百万円）`)) \n# 例として22行目と23行目の3列目を合計\n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 8047847 \n\n\n\n\n\n1.2.3 時価総額 (\\(E\\)) の算出\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 12701000\nP &lt;- 729          \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\", E, \"\\n\")\n\n時価総額 (E): 9259029000 \n\n\n\n\n\n1.2.4 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\"|df$項目==\"譲渡性預金利息\"|df$項目==\"その他の支払利息\"|df$項目==\"コールマネー利息及び売渡手形利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額（百万円）`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.075 %\n\n\n\n\n\n1.2.5 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n1.2.6 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n1.2.7 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0.801695869\n # 例示の値\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0.802 \n\n\n\n\n1.2.8 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n1.2.9 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 6.601 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "02_8563.html#waccの最終算出",
    "href": "02_8563.html#waccの最終算出",
    "title": "8563_大東銀行",
    "section": "1.3 WACCの最終算出",
    "text": "1.3 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定\n# 最新の法人実効税率を調べて設定してください。\nT &lt;- 0.2320 # 例示の値 (23.20%)\n\n# WACCの計算\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 6.596 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "02_8563.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "02_8563.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8563_大東銀行",
    "section": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n1.4.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\n# ここでは、簡便的に過去データを利用していますが、実務では詳細な予測モデルを構築します。\nCFO &lt;- CFO %&gt;% rename(年度 = ファイル名) \nCFI &lt;- CFI %&gt;% rename(年度 = ファイル名) \nFCF_combined_df &lt;- inner_join(\n  CFO %&gt;% select(年度, CFO_金額 = `金額（百万円）`), # CFOデータから年度と金額（CFO_金額としてリネーム）を選択\n  CFI %&gt;% select(年度, CFI_金額 = `金額（百万円）`), # CFIデータから年度と金額（CFI_金額としてリネーム）を選択\n  by = \"年度\"\n) |&gt; \n  mutate(FCF = CFO_金額 - CFI_金額) |&gt; \n  mutate(FCF = replace_na(FCF, 0)) |&gt; \n  arrange(年度)\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 4\n   年度               CFO_金額 CFI_金額     FCF\n   &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;\n 1 856320150315JP.csv     8415    10252   -1837\n 2 856320160315JP.csv   -11904    -3518   -8386\n 3 856320170315JP.csv    -3266     8523  -11789\n 4 856320180315JP.csv   -15481    -4083  -11398\n 5 856320190315JP.csv   -21118    24111  -45229\n 6 856320200315JP.csv    -2256    13876  -16132\n 7 856320210315JP.csv   113437     2134  111303\n 8 856320220315JP.csv   -33868     4577  -38445\n 9 856320230315JP.csv   -92826    31352 -124178\n10 856320240315JP.csv    -9113     9423  -18536\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]   -1837   -8386  -11789  -11398  -45229  -16132  111303  -38445 -124178\n[10]  -18536\n\n\n\n\n1.4.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\nWarning:\nFCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] -18536 -18536 -18536 -18536 -18536\n\n\n\n\n\n1.4.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): -18536 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): -281032 \n\n\n\n\n\n1.4.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): -281032 \n\n\n\n\n\n1.4.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 -200.194 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "00_RIM.html",
    "href": "00_RIM.html",
    "title": "RIM法",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[\n\\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*}\n\\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\n\\(A_t\\)：\\(t\\)期の当期純利益\n\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[\nC_t = C_{t-1} + A_t - d_t\\\n\\]",
    "crumbs": [
      "企業価値評価",
      "RIM法"
    ]
  },
  {
    "objectID": "00_RIM.html#残余利益モデルrim",
    "href": "00_RIM.html#残余利益モデルrim",
    "title": "RIM法",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[\n\\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*}\n\\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\n\\(A_t\\)：\\(t\\)期の当期純利益\n\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[\nC_t = C_{t-1} + A_t - d_t\\\n\\]",
    "crumbs": [
      "企業価値評価",
      "RIM法"
    ]
  },
  {
    "objectID": "04_7161_DDM.html",
    "href": "04_7161_DDM.html",
    "title": "7161_じもとHD",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7161_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.896, 0.8976, 0.8771,  0.9041, 0.8865, 0.7246, 1.0757, 1.8867, 0, 0)\n# 2023、2024年は当期純損失があったため無配\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    39             5986\n2    41             4891\n3    40             4637\n4    39             3027\n5    39             1709\n6    39             1738\n7    39            -3175\n8    39             2593\n9    40            -7078\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.8960 0.8976 0.8771 0.9041 0.8865 0.7246 1.0757 1.8867 0.0000 0.0000\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 2301.453 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 273.462 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "7161_じもとHD"
    ]
  },
  {
    "objectID": "04_7161_DDM.html#配当割引モデルの概要",
    "href": "04_7161_DDM.html#配当割引モデルの概要",
    "title": "7161_じもとHD",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "7161_じもとHD"
    ]
  },
  {
    "objectID": "04_7161_DDM.html#前提データの準備",
    "href": "04_7161_DDM.html#前提データの準備",
    "title": "7161_じもとHD",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7161_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.896, 0.8976, 0.8771,  0.9041, 0.8865, 0.7246, 1.0757, 1.8867, 0, 0)\n# 2023、2024年は当期純損失があったため無配\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    39             5986\n2    41             4891\n3    40             4637\n4    39             3027\n5    39             1709\n6    39             1738\n7    39            -3175\n8    39             2593\n9    40            -7078\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.8960 0.8976 0.8771 0.9041 0.8865 0.7246 1.0757 1.8867 0.0000 0.0000\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 2301.453 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 273.462 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "7161_じもとHD"
    ]
  },
  {
    "objectID": "03_7150_RIM.html",
    "href": "03_7150_RIM.html",
    "title": "7150_島根銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7150_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    33    23727\n2    35    57234\n3    36    16195\n4    37    28224\n5    39    31835\n6    40     2383\n7    41     2125\n8    43    17480\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.02 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 864.14 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 17,480 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: -8,217.29 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -8,398.57 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "7150_島根銀行"
    ]
  },
  {
    "objectID": "03_7150_RIM.html#残余利益モデルの概要",
    "href": "03_7150_RIM.html#残余利益モデルの概要",
    "title": "7150_島根銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "7150_島根銀行"
    ]
  },
  {
    "objectID": "03_7150_RIM.html#前提データの準備",
    "href": "03_7150_RIM.html#前提データの準備",
    "title": "7150_島根銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7150_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    33    23727\n2    35    57234\n3    36    16195\n4    37    28224\n5    39    31835\n6    40     2383\n7    41     2125\n8    43    17480\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.02 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 864.14 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 17,480 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: -8,217.29 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -8,398.57 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "7150_島根銀行"
    ]
  },
  {
    "objectID": "02_8349.html#wacc加重平均資本コストの定義と重要性",
    "href": "02_8349.html#wacc加重平均資本コストの定義と重要性",
    "title": "8349_東北銀行",
    "section": "1.1 WACC（加重平均資本コスト）の定義と重要性",
    "text": "1.1 WACC（加重平均資本コスト）の定義と重要性\nWACCは、企業が資金を調達するために株主や債権者に平均して支払うコストを表す。企業が将来生み出すフリーキャッシュフロー（FCF）を現在価値に割り引く際の割引率としてWACCを用いることで、企業が継続的に価値を創造するために最低限稼ぐべき収益率を反映した評価が可能となる。WACCの一般的な算出式は以下の通りである。\n\\[WACC = \\frac{D}{D+E} \\times r_D \\times (1-T) + \\frac{E}{D+E} \\times r_E\\]\nここで、各記号は以下の要素を示す。\n\n\\(D\\) : 負債総額\n\\(E\\) : 時価総額\n\\(r\\_D\\) : 負債コスト\n\\(r\\_E\\) : 株主資本コスト\n\\(T\\) : 実効税率",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8349_東北銀行"
    ]
  },
  {
    "objectID": "02_8349.html#waccの構成要素の算出",
    "href": "02_8349.html#waccの構成要素の算出",
    "title": "8349_東北銀行",
    "section": "1.2 WACCの構成要素の算出",
    "text": "1.2 WACCの構成要素の算出\nWACCを算出するためには、\\(D\\)、\\(E\\)、\\(r\\_D\\)、\\(r\\_E\\) の各要素を正確に特定する必要がある。\n\n1.2.1 前提データの準備\nまずは、分析に必要なライブラリを読み込み、財務データとTOPIXデータを準備します。\n\n# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n##じもとホールディングス\n## 財務データ読み込み\ndf &lt;- read_csv(\"ProcessedBankData/7161_processed_data.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,437 × 4\n      No 項目         `金額（百万円）` ファイル名        \n   &lt;dbl&gt; &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;             \n 1     1 現金預け金             159638 716120150311JP.csv\n 2     2 買入金銭債権              838 716120150311JP.csv\n 3     3 商品有価証券               26 716120150311JP.csv\n 4     4 有価証券               752854 716120150311JP.csv\n 5     5 貸出金                1600381 716120150311JP.csv\n 6     6 外国為替                  548 716120150311JP.csv\n 7     7 その他資産               6639 716120150311JP.csv\n 8     8 有形固定資産            24899 716120150311JP.csv\n 9     9 建物                     7907 716120150311JP.csv\n10    10 土地                    14406 716120150311JP.csv\n# ℹ 1,427 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows\n\n\n\n\n\n1.2.2 負債総額 (\\(D\\)) の算出\nWACCにおける負債総額 (\\(D\\)) は、企業が利子を支払う義務のある負債、すなわち有利子負債を指す。銀行株を分析する際、預金については一般的な有利子負債とは性質が異なり、多くの場合、低金利で調達される。そのため、本評価においては、預金に対して通常の有利子負債とは異なる特定の金利を別途調査し、\\(r\\_D\\) の算出に際して適切に加味する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\n# 財務データから有利子負債の項目を抽出\nD_df_current_data &lt;- df[df$項目==\"預金\" | df$項目 == \"譲渡性預金\"  |df$項目 == \"借用金\" ,]\nD &lt;- sum(as.numeric(D_df_current_data$`金額（百万円）`)) \n# 例として22行目と23行目の3列目を合計\n\n# 算出結果の確認\ncat(\"負債総額 (D):\", D, \"\\n\")\n\n負債総額 (D): 24336824 \n\n\n\n\n\n1.2.3 時価総額 (\\(E\\)) の算出\n時価総額 (\\(E\\)) は、評価対象企業の発行済み株式総数に現在の株価を乗じた値として算出する。\n\n# 発行済み株式総数:Nと現在の株価:Pを定義\nN &lt;- 13509963\nP &lt;- 1127          \n# 時価総額の計算\nE &lt;- N * P\n\n# 算出結果の確認\ncat(\"時価総額 (E):\", E, \"\\n\")\n\n時価総額 (E): 15225728301 \n\n\n\n\n\n1.2.4 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\"|df$項目==\"譲渡性預金利息\"|df$項目==\"その他の支払利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額（百万円）`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.118 %\n\n\n\n\n\n1.2.5 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n1.2.6 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %\n\n\n\n\n1.2.7 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0.612545762\n # 例示の値\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0.613 \n\n\n\n\n1.2.8 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n1.2.9 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 5.414 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8349_東北銀行"
    ]
  },
  {
    "objectID": "02_8349.html#waccの最終算出",
    "href": "02_8349.html#waccの最終算出",
    "title": "8349_東北銀行",
    "section": "1.3 WACCの最終算出",
    "text": "1.3 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定\n# 最新の法人実効税率を調べて設定してください。\nT &lt;- 0.2320 # 例示の値 (23.20%)\n\n# WACCの計算\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 5.406 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8349_東北銀行"
    ]
  },
  {
    "objectID": "02_8349.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "02_8349.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8349_東北銀行",
    "section": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "1.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n1.4.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\n# ここでは、簡便的に過去データを利用していますが、実務では詳細な予測モデルを構築します。\nCFO &lt;- CFO %&gt;% rename(年度 = ファイル名) \nCFI &lt;- CFI %&gt;% rename(年度 = ファイル名) \nFCF_combined_df &lt;- inner_join(\n  CFO %&gt;% select(年度, CFO_金額 = `金額（百万円）`), # CFOデータから年度と金額（CFO_金額としてリネーム）を選択\n  CFI %&gt;% select(年度, CFI_金額 = `金額（百万円）`), # CFIデータから年度と金額（CFI_金額としてリネーム）を選択\n  by = \"年度\"\n) |&gt; \n  mutate(FCF = CFO_金額 - CFI_金額) |&gt; \n  mutate(FCF = replace_na(FCF, 0)) |&gt; \n  arrange(年度)\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 4\n   年度               CFO_金額 CFI_金額     FCF\n   &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;\n 1 716120150315JP.csv    20043   -14532   34575\n 2 716120160315JP.csv   -80784    58344 -139128\n 3 716120170315JP.csv    20683    42855  -22172\n 4 716120180315JP.csv   -63585    32639  -96224\n 5 716120190315JP.csv   -73709    84546 -158255\n 6 716120200315JP.csv    -7023    35390  -42413\n 7 716120210315JP.csv    96884   -84955  181839\n 8 716120220315JP.csv    28964    -7983   36947\n 9 716120230315JP.csv   -19967    19549  -39516\n10 716120240315JP.csv   -13850   129915 -143765\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]   34575 -139128  -22172  -96224 -158255  -42413  181839   36947  -39516\n[10] -143765\n\n\n\n\n1.4.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\nWarning:\nFCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] -143765 -143765 -143765 -143765 -143765\n\n\n\n\n\n1.4.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): -143765 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): -2659463 \n\n\n\n\n\n1.4.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): -2659463 \n\n\n\n\n\n1.4.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 -944.224 %",
    "crumbs": [
      "企業価値評価",
      "DCF法",
      "8349_東北銀行"
    ]
  },
  {
    "objectID": "04_8542_DDM.html",
    "href": "04_8542_DDM.html",
    "title": "8542_トマト銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8542_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.3558, 0.3178, 0.3136, 0.4206, 0.5189, 0.5502, 0.4768, 0.4226, 0.3724, 0.4613)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             1662\n2    38             1843\n3    41             1912\n4    40             1556\n5    42             1753\n6    40             1371\n7    38             1519\n8    36             1879\n9    35             1530\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.3558 0.3178 0.3136 0.4206 0.5189 0.5502 0.4768 0.4226 0.3724 0.4613\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 5730.544 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 680.911 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8542_トマト銀行"
    ]
  },
  {
    "objectID": "04_8542_DDM.html#配当割引モデルの概要",
    "href": "04_8542_DDM.html#配当割引モデルの概要",
    "title": "8542_トマト銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8542_トマト銀行"
    ]
  },
  {
    "objectID": "04_8542_DDM.html#前提データの準備",
    "href": "04_8542_DDM.html#前提データの準備",
    "title": "8542_トマト銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8542_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.3558, 0.3178, 0.3136, 0.4206, 0.5189, 0.5502, 0.4768, 0.4226, 0.3724, 0.4613)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             1662\n2    38             1843\n3    41             1912\n4    40             1556\n5    42             1753\n6    40             1371\n7    38             1519\n8    36             1879\n9    35             1530\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.3558 0.3178 0.3136 0.4206 0.5189 0.5502 0.4768 0.4226 0.3724 0.4613\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 5730.544 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 680.911 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8542_トマト銀行"
    ]
  },
  {
    "objectID": "03_8563_RIM.html",
    "href": "03_8563_RIM.html",
    "title": "8563_大東銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8563_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    37             2272\n 2    41             2591\n 3    38             1495\n 4    37             1308\n 5    36             1267\n 6    35             1073\n 7    36             1008\n 8    37             1222\n 9    36             1311\n10    34             1270\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 7 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    35   151505\n2    36   149410\n3    39     1017\n4    40    37147\n5    41    33245\n6    44     6355\n7    45     6344\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.801695869\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 6.601 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    37             2272\n 2    41             2591\n 3    38             1495\n 4    37             1308\n 5    36             1267\n 6    35             1073\n 7    36             1008\n 8    37             1222\n 9    36             1311\n10    34             1270\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 15,547.83 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 6,344 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 5,805.05 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: 3,398.77 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "03_8563_RIM.html#残余利益モデルの概要",
    "href": "03_8563_RIM.html#残余利益モデルの概要",
    "title": "8563_大東銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "03_8563_RIM.html#前提データの準備",
    "href": "03_8563_RIM.html#前提データの準備",
    "title": "8563_大東銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8563_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    37             2272\n 2    41             2591\n 3    38             1495\n 4    37             1308\n 5    36             1267\n 6    35             1073\n 7    36             1008\n 8    37             1222\n 9    36             1311\n10    34             1270\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 7 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    35   151505\n2    36   149410\n3    39     1017\n4    40    37147\n5    41    33245\n6    44     6355\n7    45     6344\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.801695869\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 6.601 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    37             2272\n 2    41             2591\n 3    38             1495\n 4    37             1308\n 5    36             1267\n 6    35             1073\n 7    36             1008\n 8    37             1222\n 9    36             1311\n10    34             1270\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 15,547.83 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 6,344 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 5,805.05 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: 3,398.77 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8563_大東銀行"
    ]
  },
  {
    "objectID": "00_TOPIX.html",
    "href": "00_TOPIX.html",
    "title": "TOPIX",
    "section": "",
    "text": "library(\"tidyverse\")\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\nTOPIX &lt;- read_csv(\"^tpx_y.csv\")\n\nRows: 57 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl  (5): Open, High, Low, Close, Volume\ndate (1): Date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n## TOPIXの算出が始まり、切りのいい1970年から算出\n# 年初始値と年末終値をベクトルにまとめるx\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 年度\nyears &lt;- 1970:2024\n\n# データフレーム化して見やすく表示\ntopix_df &lt;- tibble(\n  Year = years,\n  Open = TOPIX_OPEN,\n  Close = TOPIX_CLOSE,\n  Return = round(topix_return * 100, 2)  # パーセント表示\n)\n\n# 期待収益率（年平均リターン）\nexpected_return &lt;- mean(topix_return)\n\n# 結果の表示\nprint(topix_df)\n\n# A tibble: 55 × 4\n    Year  Open Close Return\n   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1  1970  179.  148. -17.3 \n 2  1971  148.  199.  34.4 \n 3  1972  199.  402. 101.  \n 4  1973  402.  306. -23.7 \n 5  1974  306.  278.  -9.17\n 6  1975  278.  323.  16.2 \n 7  1976  323.  384.  18.7 \n 8  1977  384.  364.  -5.16\n 9  1978  364.  450.  23.5 \n10  1979  450.  460.   2.24\n# ℹ 45 more rows\n\ncat(\"期待収益率（1970～2024年の平均）:\", round(expected_return * 100, 3), \"%\\n\")\n\n期待収益率（1970～2024年の平均）: 7.846 %\n\n\n\n# ------------------------------------------------------------\n# ライブラリ読み込み\n# ------------------------------------------------------------\nlibrary(tidyverse)\nlibrary(ggrepel)\n\n# ------------------------------------------------------------\n# データ読み込み\n# ------------------------------------------------------------\nTOPIX &lt;- read_csv(\"^tpx_y.csv\")\n\nRows: 57 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl  (5): Open, High, Low, Close, Volume\ndate (1): Date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# 年初始値と年末終値\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 年度\nyears &lt;- 1970:2024\n\n# データフレーム化\ntopix_df &lt;- tibble(\n  Year = years,\n  Open = TOPIX_OPEN,\n  Close = TOPIX_CLOSE,\n  Return = round(topix_return * 100, 2)  # パーセント表示\n)\n\n# coefを計算（Returnの最大値に合わせる）\ncoef &lt;- max(topix_df$Close) / max(topix_df$Return)\n\n# pivot_longerで長い形式\nTOPIX_df_long &lt;- pivot_longer(topix_df, cols = c(\"Close\", \"Return\"),\n                              names_to = \"項目\", values_to = \"値\")\n\n# ------------------------------------------------------------\n# ±30%以上のReturnイベント抽出\n# ------------------------------------------------------------\nthreshold &lt;- 30\nextreme_events &lt;- topix_df %&gt;%\n  filter(abs(Return) &gt;= threshold) %&gt;%\n  mutate(\n    type = ifelse(Return &gt; 0, \"上昇\", \"下落\"),\n    # 上下交互にラベルをずらす\n    y_label = Close + ifelse(row_number() %% 2 == 0, 1, -1) * max(topix_df$Close) * 0.05\n  )\n\n# ラベルを手動で設定\nextreme_events$label[extreme_events$Year == 1989] &lt;- \"バブル崩壊\"\n\nWarning: Unknown or uninitialised column: `label`.\n\n# ------------------------------------------------------------\n# グラフ作成\n# ------------------------------------------------------------\nggplot(TOPIX_df_long, aes(x = Year)) +\n  geom_line(aes(y = ifelse(項目 == \"Return\", 値 * coef, 値), color = 項目),\n            linewidth = 1.2, alpha = 0.8) +\n  # 縦線\n  geom_vline(data = extreme_events, aes(xintercept = Year, color = type),\n             linetype = \"dotted\", linewidth = 0.8, show.legend = FALSE) +\n  # ラベル横書き・上下交互\n  geom_text_repel(\n    data = extreme_events %&gt;% filter(!is.na(label)),\n    aes(x = Year, y = y_label, label = label),\n    angle = 0,            # 横書き\n    nudge_y = 0,\n    size = 3,\n    color = \"gray30\",\n    segment.size = 0.5,\n    segment.color = \"gray50\",\n    force = 1,\n    max.overlaps = Inf\n  ) +\n  # y軸と副軸\n  scale_y_continuous(\n    name = \"TOPIX指数\",\n    sec.axis = sec_axis(~ . / coef, name = \"値上がり率（%）\")\n  ) +\n  # 色の設定\n  scale_color_manual(values = c(\"Close\" = \"black\", \"Return\" = \"gray\",\n                                \"上昇\" = \"red\", \"下落\" = \"blue\"),\n                     labels = c(\"TOPIX指数\", \"値上がり率（%）\",\"\",\"\")) +\n  labs(\n    title = \"TOPIX指数と日本経済主要イベント\",\n    x = \"年\"\n  ) +\n  theme_classic() +\n  theme(\n    legend.position = \"top\",\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.title.y = element_text(color = \"black\"),\n    axis.title.y.right = element_text(color = \"black\")\n  )"
  },
  {
    "objectID": "05_8410.html",
    "href": "05_8410.html",
    "title": "8410_セブン銀行",
    "section": "",
    "text": "# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n## セブン銀行財務データ読み込み\ndf &lt;- read_csv(\"Processed_PrimeBank/8410.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,344 × 3\n   項目         金額        年度\n   &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt;\n 1 企業名       Seven Bank  2025\n 2 現金預け金   988932      2024\n 3 コールローン 50000       2024\n 4 有価証券     118077      2024\n 5 貸出金       56289       2024\n 6 外国為替     0           2024\n 7 ＡＴＭ仮払金 205420      2024\n 8 会員未収金   134340      2024\n 9 その他資産   76038       2024\n10 有形固定資産 39150       2024\n# ℹ 1,334 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8410_セブン銀行"
    ]
  },
  {
    "objectID": "05_8410.html#負債コスト-r_d-の算出",
    "href": "05_8410.html#負債コスト-r_d-の算出",
    "title": "8410_セブン銀行",
    "section": "0.1 負債コスト (\\(r\\_D\\)) の算出",
    "text": "0.1 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.326 %\n\n\n\n0.1.1 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n0.1.2 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8410_セブン銀行"
    ]
  },
  {
    "objectID": "05_8410.html#β-ベータ",
    "href": "05_8410.html#β-ベータ",
    "title": "8410_セブン銀行",
    "section": "0.2 β (ベータ)",
    "text": "0.2 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0 #-0.25529545 マイナスのため最小値である０\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0 \n\n\n\n0.2.1 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n0.2.2 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8410_セブン銀行"
    ]
  },
  {
    "objectID": "05_8410.html#waccの最終算出",
    "href": "05_8410.html#waccの最終算出",
    "title": "8410_セブン銀行",
    "section": "0.3 WACCの最終算出",
    "text": "0.3 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定 \\# 最新の法人実効税率を調べて設定してください。 T \\&lt;- 0.2320 \\# 例示の値 (23.20%)\n\n# WACCの計算\n\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8410_セブン銀行"
    ]
  },
  {
    "objectID": "05_8410.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "05_8410.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8410_セブン銀行",
    "section": "0.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "0.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n0.4.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\nFCF_combined_df &lt;- full_join(CFO,CFI, by = \"年度\")\nFCF_combined_df &lt;- FCF_combined_df |&gt; \n  mutate(FCF = as.numeric(金額.x) + as.numeric(金額.y) )\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 6\n   項目.x                           金額.x  年度 項目.y            金額.y    FCF\n   &lt;chr&gt;                            &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;   &lt;dbl&gt;\n 1 営業活動によるキャッシュ・フロー 100751  2024 投資活動によるキャッシュ・フロー… -51937  48814\n 2 営業活動によるキャッシュ・フロー 66577   2023 投資活動によるキャッシュ・フロー… -36191  30386\n 3 営業活動によるキャッシュ・フロー 41311   2022 投資活動によるキャッシュ・フロー… -36114   5197\n 4 営業活動によるキャッシュ・フロー 136039  2021 投資活動によるキャッシュ・フロー… -32770 103269\n 5 営業活動によるキャッシュ・フロー 89619   2020 投資活動によるキャッシュ・フロー… -5801   83818\n 6 営業活動によるキャッシュ・フロー 117471  2019 投資活動によるキャッシュ・フロー… -34882  82589\n 7 営業活動によるキャッシュ・フロー 31466   2018 投資活動によるキャッシュ・フロー… -3649   27817\n 8 営業活動によるキャッシュ・フロー 88118   2017 投資活動によるキャッシュ・フロー… -28818  59300\n 9 営業活動によるキャッシュ・フロー 66482   2016 投資活動によるキャッシュ・フロー… -11634  54848\n10 営業活動によるキャッシュ・フロー 99931   2015 投資活動によるキャッシュ・フロー… 4994   104925\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]  48814  30386   5197 103269  83818  82589  27817  59300  54848 104925\n\n\n\n\n0.4.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGR (過去 9年間): 8.87%\n \n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 104925 104925 104925 104925 104925\n\n\n\n\n0.4.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 104925 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 6683279 \n\n\n\n\n0.4.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): 6683279 \n\n\n\n\n0.4.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 30.893 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8410_セブン銀行"
    ]
  },
  {
    "objectID": "05_8410.html#残余利益モデルrim",
    "href": "05_8410.html#残余利益モデルrim",
    "title": "8410_セブン銀行",
    "section": "2.1 残余利益モデル(RIM)",
    "text": "2.1 残余利益モデル(RIM)",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8410_セブン銀行"
    ]
  },
  {
    "objectID": "05_8410.html#残余利益モデルの概要",
    "href": "05_8410.html#残余利益モデルの概要",
    "title": "8410_セブン銀行",
    "section": "2.2 残余利益モデルの概要",
    "text": "2.2 残余利益モデルの概要\n残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8410_セブン銀行"
    ]
  },
  {
    "objectID": "05_8410.html#前提データの準備",
    "href": "05_8410.html#前提データの準備",
    "title": "8410_セブン銀行",
    "section": "2.3 前提データの準備",
    "text": "2.3 前提データの準備\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7150_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    33    23727\n2    35    57234\n3    36    16195\n4    37    28224\n5    39    31835\n6    40     2383\n7    41     2125\n8    43    17480\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.02 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 864.14 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 17,480 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: -8,217.29 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -8,398.57 百万円",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8410_セブン銀行"
    ]
  },
  {
    "objectID": "05_8410.html#配当割引モデルの概要",
    "href": "05_8410.html#配当割引モデルの概要",
    "title": "8410_セブン銀行",
    "section": "3.1 配当割引モデルの概要",
    "text": "3.1 配当割引モデルの概要\n配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8410_セブン銀行"
    ]
  },
  {
    "objectID": "05_8410.html#前提データの準備-1",
    "href": "05_8410.html#前提データの準備-1",
    "title": "8410_セブン銀行",
    "section": "3.2 前提データの準備",
    "text": "3.2 前提データの準備\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7150_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.4946, 0.4299, 0.2924, 0.4520, 0.3431, 0, 0.1302, 0.3003, 0.2187, 0.2157)\n\n# 当期純利益\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\n# 配当性向\nprint(Pay_ratio)\n\n [1] 0.4946 0.4299 0.2924 0.4520 0.3431 0.0000 0.1302 0.3003 0.2187 0.2157\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) + \n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 1561.03 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 185.484 円",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8410_セブン銀行"
    ]
  },
  {
    "objectID": "04_8416_DDM.html",
    "href": "04_8416_DDM.html",
    "title": "8416_高知銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8416_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.707, 0.932, 0.1322, 0.1730, 0.3535, 0.2356, 0.4178, 0.1878, 0.1958, 0.2475)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             3922\n 2    38             3105\n 3    36             2307\n 4    39             1828\n 5    37              996\n 6    36             1468\n 7    38              943\n 8    38             1701\n 9    38             1666\n10    37             1358\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.7070 0.9320 0.1322 0.1730 0.3535 0.2356 0.4178 0.1878 0.1958 0.2475\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 7535.502 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 895.378 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8416_高知銀行"
    ]
  },
  {
    "objectID": "04_8416_DDM.html#配当割引モデルの概要",
    "href": "04_8416_DDM.html#配当割引モデルの概要",
    "title": "8416_高知銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8416_高知銀行"
    ]
  },
  {
    "objectID": "04_8416_DDM.html#前提データの準備",
    "href": "04_8416_DDM.html#前提データの準備",
    "title": "8416_高知銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8416_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.707, 0.932, 0.1322, 0.1730, 0.3535, 0.2356, 0.4178, 0.1878, 0.1958, 0.2475)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             3922\n 2    38             3105\n 3    36             2307\n 4    39             1828\n 5    37              996\n 6    36             1468\n 7    38              943\n 8    38             1701\n 9    38             1666\n10    37             1358\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.7070 0.9320 0.1322 0.1730 0.3535 0.2356 0.4178 0.1878 0.1958 0.2475\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 7535.502 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 895.378 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8416_高知銀行"
    ]
  },
  {
    "objectID": "00_Exponsmooth.html",
    "href": "00_Exponsmooth.html",
    "title": "指数平滑法",
    "section": "",
    "text": "指数平滑法は過去のデータを下に未来の値を予測するための手法であり、特に時系列データの分析において重要な役割を果たしています。\n指数平滑法を用いることで、データの変動を考慮しながら、より正確な予測が可能となります。"
  },
  {
    "objectID": "00_Exponsmooth.html#指数平滑法exponential-smoothing",
    "href": "00_Exponsmooth.html#指数平滑法exponential-smoothing",
    "title": "指数平滑法",
    "section": "",
    "text": "指数平滑法は過去のデータを下に未来の値を予測するための手法であり、特に時系列データの分析において重要な役割を果たしています。\n指数平滑法を用いることで、データの変動を考慮しながら、より正確な予測が可能となります。"
  },
  {
    "objectID": "00_Exponsmooth.html#単純指数平滑法",
    "href": "00_Exponsmooth.html#単純指数平滑法",
    "title": "指数平滑法",
    "section": "2 単純指数平滑法",
    "text": "2 単純指数平滑法\n\\[\nS_t = \\alpha Y_t + (1 - \\alpha) S_{t-1}\n\\]\n展開すると次のようになります：\n\\[\n\\begin{aligned}\nS_t &= \\alpha Y_t + (1 - \\alpha) S_{t-1} \\\\\n    &= \\alpha Y_t + \\alpha (1 - \\alpha) Y_{t-1} + \\alpha (1 - \\alpha)^2 Y_{t-2} + \\cdots\n\\end{aligned}\n\\]\n\n2.1 記号の意味\n\n\\(S_t\\): 時点 \\(t\\) における平滑化された値（予測値）\n\n\\(Y_t\\): 時点 \\(t\\) の実測値\n\n\\(S_{t-1}\\): 前期の平滑化値\n\n\\(\\alpha\\): 平滑化係数（\\(0 &lt; \\alpha &lt; 1\\)）"
  },
  {
    "objectID": "00_Exponsmooth.html#αの選択",
    "href": "00_Exponsmooth.html#αの選択",
    "title": "指数平滑法",
    "section": "3 αの選択",
    "text": "3 αの選択\nαの値は0から1の間であり、1に近いほど直近のデータが重視されます。最近のトレンドを重視する場合は1よりに、長期的に変化が少ないようなデータであれば、αの値を0に近くしても良いと思われる。"
  },
  {
    "objectID": "04_8562_DDM.html",
    "href": "04_8562_DDM.html",
    "title": "8562_福島銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8562_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.1045, 0.1959, 0.4255, 0, 0.1390, 0.1358, 0 , 0.1693, 0.1769, 0.1245)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             3453\n 2    40             2681\n 3    39             1254\n 4    41            -3120\n 5    38              532\n 6    37              413\n 7    38            -1717\n 8    38              833\n 9    34              879\n10    35              869\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.1045 0.1959 0.4255 0.0000 0.1390 0.1358 0.0000 0.1693 0.1769 0.1245\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 1794.327 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 213.204 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8562_福島銀行"
    ]
  },
  {
    "objectID": "04_8562_DDM.html#配当割引モデルの概要",
    "href": "04_8562_DDM.html#配当割引モデルの概要",
    "title": "8562_福島銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8562_福島銀行"
    ]
  },
  {
    "objectID": "04_8562_DDM.html#前提データの準備",
    "href": "04_8562_DDM.html#前提データの準備",
    "title": "8562_福島銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/8562_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.1045, 0.1959, 0.4255, 0, 0.1390, 0.1358, 0 , 0.1693, 0.1769, 0.1245)\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    39             3453\n 2    40             2681\n 3    39             1254\n 4    41            -3120\n 5    38              532\n 6    37              413\n 7    38            -1717\n 8    38              833\n 9    34              879\n10    35              869\n\nprint(\"配当性向:\")\n\n[1] \"配当性向:\"\n\nprint(Pay_ratio)\n\n [1] 0.1045 0.1959 0.4255 0.0000 0.1390 0.1358 0.0000 0.1693 0.1769 0.1245\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) +\n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 1794.327 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 213.204 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "8562_福島銀行"
    ]
  },
  {
    "objectID": "00_DDM.html",
    "href": "00_DDM.html",
    "title": "DDM法",
    "section": "",
    "text": "配当割引モデル（DDM: Dividend Discount Model）は、\n株式の価値を将来の配当の現在価値の合計として評価するモデルです。\n\n\n\n将来の配当が一定（成長しない）と仮定すると：\n\\[\nP_0 = \\frac{D}{r}\n\\]\n\n(P_0)：株式の現在価値（理論株価）\n\n(D)：1株あたりの配当\n\n(r)：投資家の要求収益率（割引率）\n\n\n\n\n\n配当が毎年一定の割合 (g) で成長すると仮定すると：\n\\[\nP_0 = \\frac{D_1}{r - g}\n\\]\n\n(D_1)：来期の配当\n\n(g)：配当の成長率\n\n(r)：投資家の要求収益率\n\n\n\n\n\n\n成熟企業（銀行、電力、食品など）の評価に有効\n\n配当を支払わない企業には適用困難\n\n成長率 (g) と割引率 (r) の仮定に大きく依存する\n\n\n\n\n\n配当割引モデル（DDM）は：\n\n「将来の配当の現在価値 = 株式の理論的価値」\n\nという考えに基づく、株式評価の基本モデルである。",
    "crumbs": [
      "企業価値評価",
      "DDM法"
    ]
  },
  {
    "objectID": "00_DDM.html#基本形ゼロ成長モデル",
    "href": "00_DDM.html#基本形ゼロ成長モデル",
    "title": "DDM法",
    "section": "",
    "text": "将来の配当が一定（成長しない）と仮定すると：\n\\[\nP_0 = \\frac{D}{r}\n\\]\n\n(P_0)：株式の現在価値（理論株価）\n\n(D)：1株あたりの配当\n\n(r)：投資家の要求収益率（割引率）",
    "crumbs": [
      "企業価値評価",
      "DDM法"
    ]
  },
  {
    "objectID": "00_DDM.html#成長を考慮したモデルゴードン成長モデル",
    "href": "00_DDM.html#成長を考慮したモデルゴードン成長モデル",
    "title": "DDM法",
    "section": "",
    "text": "配当が毎年一定の割合 (g) で成長すると仮定すると：\n\\[\nP_0 = \\frac{D_1}{r - g}\n\\]\n\n(D_1)：来期の配当\n\n(g)：配当の成長率\n\n(r)：投資家の要求収益率",
    "crumbs": [
      "企業価値評価",
      "DDM法"
    ]
  },
  {
    "objectID": "00_DDM.html#特徴と限界",
    "href": "00_DDM.html#特徴と限界",
    "title": "DDM法",
    "section": "",
    "text": "成熟企業（銀行、電力、食品など）の評価に有効\n\n配当を支払わない企業には適用困難\n\n成長率 (g) と割引率 (r) の仮定に大きく依存する",
    "crumbs": [
      "企業価値評価",
      "DDM法"
    ]
  },
  {
    "objectID": "00_DDM.html#まとめ",
    "href": "00_DDM.html#まとめ",
    "title": "DDM法",
    "section": "",
    "text": "配当割引モデル（DDM）は：\n\n「将来の配当の現在価値 = 株式の理論的価値」\n\nという考えに基づく、株式評価の基本モデルである。",
    "crumbs": [
      "企業価値評価",
      "DDM法"
    ]
  },
  {
    "objectID": "04_7150_DDM.html",
    "href": "04_7150_DDM.html",
    "title": "7150_島根銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7150_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.4946, 0.4299, 0.2924, 0.4520, 0.3431, 0, 0.1302, 0.3003, 0.2187, 0.2157)\n\n# 当期純利益\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\n# 配当性向\nprint(Pay_ratio)\n\n [1] 0.4946 0.4299 0.2924 0.4520 0.3431 0.0000 0.1302 0.3003 0.2187 0.2157\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) + \n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 1561.03 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 185.484 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "7150_島根銀行"
    ]
  },
  {
    "objectID": "04_7150_DDM.html#配当割引モデルの概要",
    "href": "04_7150_DDM.html#配当割引モデルの概要",
    "title": "7150_島根銀行",
    "section": "",
    "text": "配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "7150_島根銀行"
    ]
  },
  {
    "objectID": "04_7150_DDM.html#前提データの準備",
    "href": "04_7150_DDM.html#前提データの準備",
    "title": "7150_島根銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7150_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.4946, 0.4299, 0.2924, 0.4520, 0.3431, 0, 0.1302, 0.3003, 0.2187, 0.2157)\n\n# 当期純利益\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\n# 配当性向\nprint(Pay_ratio)\n\n [1] 0.4946 0.4299 0.2924 0.4520 0.3431 0.0000 0.1302 0.3003 0.2187 0.2157\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) + \n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 1561.03 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 185.484 円",
    "crumbs": [
      "企業価値評価",
      "DDM法",
      "7150_島根銀行"
    ]
  },
  {
    "objectID": "10_Environment.html",
    "href": "10_Environment.html",
    "title": "環境設定",
    "section": "",
    "text": "sessionInfo()\n\nR version 4.5.1 (2025-06-13)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS Tahoe 26.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Tokyo\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.4 compiler_4.5.1    fastmap_1.2.0     cli_3.6.5        \n [5] tools_4.5.1       htmltools_0.5.8.1 rstudioapi_0.17.1 yaml_2.3.10      \n [9] rmarkdown_2.30    knitr_1.50        jsonlite_2.0.0    xfun_0.53        \n[13] digest_0.6.37     rlang_1.1.6       evaluate_1.0.5   \n\n# 使用したパッケージのリスト\nsearch()\n\n[1] \".GlobalEnv\"        \"package:stats\"     \"package:graphics\" \n[4] \"package:grDevices\" \"package:utils\"     \"package:datasets\" \n[7] \"package:methods\"   \"Autoloads\"         \"package:base\"     \n\nrequired_packages &lt;- c(\"tidyverse\",\"\")"
  },
  {
    "objectID": "03_8365_RIM.html",
    "href": "03_8365_RIM.html",
    "title": "8365_富山銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8365_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             1261\n 2    33             1070\n 3    34             1242\n 4    36             1370\n 5    36             1441\n 6    35              738\n 7    37              587\n 8    37              357\n 9    37              996\n10    35              648\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 9 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    36    21758\n2    37    43194\n3    38    24923\n4    39   128540\n5    40    35814\n6    41    23233\n7    42    10183\n8    43    31426\n9    44     4638\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.088892856\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.404 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             1261\n 2    33             1070\n 3    34             1242\n 4    36             1370\n 5    36             1441\n 6    35              738\n 7    37              587\n 8    37              357\n 9    37              996\n10    35              648\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 4,789.85 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 4,638 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 2,489.59 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -2,337.74 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8365_富山銀行"
    ]
  },
  {
    "objectID": "03_8365_RIM.html#残余利益モデルの概要",
    "href": "03_8365_RIM.html#残余利益モデルの概要",
    "title": "8365_富山銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8365_富山銀行"
    ]
  },
  {
    "objectID": "03_8365_RIM.html#前提データの準備",
    "href": "03_8365_RIM.html#前提データの準備",
    "title": "8365_富山銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8365_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             1261\n 2    33             1070\n 3    34             1242\n 4    36             1370\n 5    36             1441\n 6    35              738\n 7    37              587\n 8    37              357\n 9    37              996\n10    35              648\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 9 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    36    21758\n2    37    43194\n3    38    24923\n4    39   128540\n5    40    35814\n6    41    23233\n7    42    10183\n8    43    31426\n9    44     4638\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.088892856\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.404 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    35             1261\n 2    33             1070\n 3    34             1242\n 4    36             1370\n 5    36             1441\n 6    35              738\n 7    37              587\n 8    37              357\n 9    37              996\n10    35              648\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 4,789.85 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 4,638 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 2,489.59 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -2,337.74 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8365_富山銀行"
    ]
  },
  {
    "objectID": "03_8383_RIM.html",
    "href": "03_8383_RIM.html",
    "title": "8383_鳥取銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]\n\n\n\n\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8383_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             2137\n2    38             1992\n3    37             1311\n4    36             1108\n5    38              957\n6    38              898\n7    35             1008\n8    40              901\n9    37             1062\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    37    47641\n2    38   225693\n3    39    46022\n4    41    85224\n5    42     2262\n6    43    19380\n7    44     3319\n8    46    16578\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.580596357\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 5.214 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             2137\n2    38             1992\n3    37             1311\n4    36             1108\n5    38              957\n6    38              898\n7    35             1008\n8    40              901\n9    37             1062\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 13,042.52 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 16,578 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 1,726.54 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -5,262.02 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8383_鳥取銀行"
    ]
  },
  {
    "objectID": "03_8383_RIM.html#残余利益モデルの概要",
    "href": "03_8383_RIM.html#残余利益モデルの概要",
    "title": "8383_鳥取銀行",
    "section": "",
    "text": "残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8383_鳥取銀行"
    ]
  },
  {
    "objectID": "03_8383_RIM.html#前提データの準備",
    "href": "03_8383_RIM.html#前提データの準備",
    "title": "8383_鳥取銀行",
    "section": "",
    "text": "# パッケージの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\ndf &lt;- read_csv(\"ProcessedBankData/8383_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             2137\n2    38             1992\n3    37             1311\n4    36             1108\n5    38              957\n6    38              898\n7    35             1008\n8    40              901\n9    37             1062\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    37    47641\n2    38   225693\n3    39    46022\n4    41    85224\n5    42     2262\n6    43    19380\n7    44     3319\n8    46    16578\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 0.580596357\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 5.214 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.03 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 9 × 2\n     No `金額（百万円）`\n  &lt;dbl&gt;            &lt;dbl&gt;\n1    40             2137\n2    38             1992\n3    37             1311\n4    36             1108\n5    38              957\n6    38              898\n7    35             1008\n8    40              901\n9    37             1062\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 13,042.52 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 16,578 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: 1,726.54 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -5,262.02 百万円",
    "crumbs": [
      "企業価値評価",
      "RIM法",
      "8383_鳥取銀行"
    ]
  },
  {
    "objectID": "05_8334.html",
    "href": "05_8334.html",
    "title": "8334_群馬銀行",
    "section": "",
    "text": "# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n## 群馬銀行財務データ読み込み\ndf &lt;- read_csv(\"Processed_PrimeBank/8334.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,653 × 3\n   項目                         金額            年度\n   &lt;chr&gt;                        &lt;chr&gt;          &lt;dbl&gt;\n 1 企業名                       The Gunma Bank  2025\n 2 現金預け金                   1844728         2024\n 3 商品有価証券                 268             2024\n 4 金銭の信託                   12251           2024\n 5 有価証券                     2290971         2024\n 6 貸出金                       6406055         2024\n 7 外国為替                     8445            2024\n 8 リース債権及びリース投資資産 63506           2024\n 9 その他資産                   109746          2024\n10 有形固定資産                 64772           2024\n# ℹ 1,643 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8334_群馬銀行"
    ]
  },
  {
    "objectID": "05_8334.html#負債コスト-r_d-の算出",
    "href": "05_8334.html#負債コスト-r_d-の算出",
    "title": "8334_群馬銀行",
    "section": "0.1 負債コスト (\\(r\\_D\\)) の算出",
    "text": "0.1 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$`金額`)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.271 %\n\n\n\n0.1.1 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n0.1.2 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8334_群馬銀行"
    ]
  },
  {
    "objectID": "05_8334.html#β-ベータ",
    "href": "05_8334.html#β-ベータ",
    "title": "8334_群馬銀行",
    "section": "0.2 β (ベータ)",
    "text": "0.2 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0 #-0.229544259 マイナスのため最小値である０ \n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0 \n\n\n\n0.2.1 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n0.2.2 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8334_群馬銀行"
    ]
  },
  {
    "objectID": "05_8334.html#waccの最終算出",
    "href": "05_8334.html#waccの最終算出",
    "title": "8334_群馬銀行",
    "section": "0.3 WACCの最終算出",
    "text": "0.3 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定 \\# 最新の法人実効税率を調べて設定してください。 T \\&lt;- 0.2320 \\# 例示の値 (23.20%)\n\n# WACCの計算\n\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8334_群馬銀行"
    ]
  },
  {
    "objectID": "05_8334.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "05_8334.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8334_群馬銀行",
    "section": "0.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "0.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n0.4.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\nFCF_combined_df &lt;- full_join(CFO,CFI, by = \"年度\")\nFCF_combined_df &lt;- FCF_combined_df |&gt; \n  mutate(FCF = as.numeric(金額.x) + as.numeric(金額.y) )\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 6\n   項目.x                           金額.x   年度 項目.y          金額.y     FCF\n   &lt;chr&gt;                            &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;    &lt;dbl&gt;\n 1 営業活動によるキャッシュ・フロー -394524  2024 投資活動によるキャッシュ・フ… 411002   16478\n 2 営業活動によるキャッシュ・フロー -656166  2023 投資活動によるキャッシュ・フ… -1533… -809485\n 3 営業活動によるキャッシュ・フロー 459588   2022 投資活動によるキャッシュ・フ… -1278…  331781\n 4 営業活動によるキャッシュ・フロー 1987175  2021 投資活動によるキャッシュ・フ… -4983… 1488806\n 5 営業活動によるキャッシュ・フロー 316974   2020 投資活動によるキャッシュ・フ… -2079…  109057\n 6 営業活動によるキャッシュ・フロー 126908   2019 投資活動によるキャッシュ・フ… 50850   177758\n 7 営業活動によるキャッシュ・フロー -266292  2018 投資活動によるキャッシュ・フ… 301136   34844\n 8 営業活動によるキャッシュ・フロー 177143   2017 投資活動によるキャッシュ・フ… 31866   209009\n 9 営業活動によるキャッシュ・フロー 49820    2016 投資活動によるキャッシュ・フ… 123024  172844\n10 営業活動によるキャッシュ・フロー 34765    2015 投資活動によるキャッシュ・フ… 9386     44151\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]   16478 -809485  331781 1488806  109057  177758   34844  209009  172844\n[10]   44151\n\n\n\n\n0.4.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGR (過去 9年間): 11.57%\n \n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 44151 44151 44151 44151 44151\n\n\n\n\n0.4.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 44151 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 2812499 \n\n\n\n\n0.4.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): 2812499 \n\n\n\n\n0.4.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 6.662 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8334_群馬銀行"
    ]
  },
  {
    "objectID": "05_8334.html#残余利益モデルrim",
    "href": "05_8334.html#残余利益モデルrim",
    "title": "8334_群馬銀行",
    "section": "2.1 残余利益モデル(RIM)",
    "text": "2.1 残余利益モデル(RIM)",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8334_群馬銀行"
    ]
  },
  {
    "objectID": "05_8334.html#残余利益モデルの概要",
    "href": "05_8334.html#残余利益モデルの概要",
    "title": "8334_群馬銀行",
    "section": "2.2 残余利益モデルの概要",
    "text": "2.2 残余利益モデルの概要\n残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8334_群馬銀行"
    ]
  },
  {
    "objectID": "05_8334.html#前提データの準備",
    "href": "05_8334.html#前提データの準備",
    "title": "8334_群馬銀行",
    "section": "2.3 前提データの準備",
    "text": "2.3 前提データの準備\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7150_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    33    23727\n2    35    57234\n3    36    16195\n4    37    28224\n5    39    31835\n6    40     2383\n7    41     2125\n8    43    17480\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.02 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 864.14 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 17,480 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: -8,217.29 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -8,398.57 百万円",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8334_群馬銀行"
    ]
  },
  {
    "objectID": "05_8334.html#配当割引モデルの概要",
    "href": "05_8334.html#配当割引モデルの概要",
    "title": "8334_群馬銀行",
    "section": "3.1 配当割引モデルの概要",
    "text": "3.1 配当割引モデルの概要\n配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8334_群馬銀行"
    ]
  },
  {
    "objectID": "05_8334.html#前提データの準備-1",
    "href": "05_8334.html#前提データの準備-1",
    "title": "8334_群馬銀行",
    "section": "3.2 前提データの準備",
    "text": "3.2 前提データの準備\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7150_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nPay_ratio &lt;- c(0.4946, 0.4299, 0.2924, 0.4520, 0.3431, 0, 0.1302, 0.3003, 0.2187, 0.2157)\n\n# 当期純利益\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\n# 配当性向\nprint(Pay_ratio)\n\n [1] 0.4946 0.4299 0.2924 0.4520 0.3431 0.0000 0.1302 0.3003 0.2187 0.2157\n\n# C0（最も直近の自己資本簿価）の定義\nd &lt;- Net_Income_U * Pay_ratio\n\n\nLook_Payratio &lt;- tibble(Year = c(2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024), Pay_ratio)\n\n# 折れ線グラフの作成\nggplot(Look_Payratio, aes(x = Year, y = Pay_ratio * 100)) + \n  geom_line(linewidth = 0.5) +\n  geom_point(size = 1) +\n  geom_text(aes(label = round(Pay_ratio *100, 1)), vjust = -1, size = 3, color = \"darkblue\") +\n  coord_cartesian(ylim = c(0, 200))+\n  labs(\n    title = \"年度別配当性向の推移\",\n    x = \"年度\",\n    y = \"配当性向 (%)\"\n  ) +\n  scale_x_continuous(breaks = unique(Look_Payratio$Year)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\", margin = margin(b = 30)),\n    axis.text.x = element_text(size = 12, vjust = 1, margin = margin(t = 5)),  # 年度ラベルの下に余白\n    axis.title.x = element_text(size = 14, margin = margin(t = 30)),\n    axis.title.y = element_text(size = 14, margin = margin(r = 30))\n  )\n\n\n\n\n\n\n\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\nt &lt;- 1:length(d)\n\nP0 &lt;- sum(d/(1+rE)^t)\n\ncat(\"株式価値:\", round(P0,3),\"百万円\\n\")\n\n株式価値: 1561.03 百万円\n\nN &lt;- 8416000 \n\ncat(\"理想株価:\", round((P0 * 1e6)/N,3),\"円\\n\")\n\n理想株価: 185.484 円",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8334_群馬銀行"
    ]
  },
  {
    "objectID": "Last.html",
    "href": "Last.html",
    "title": "last",
    "section": "",
    "text": "1 データ加工\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.1     ✔ stringr   1.5.2\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\ndf7150 &lt;- read_csv(\"ProcessedBankData/7150_processed_data.csv\")\n\nRows: 1303 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): 項目, ファイル名\ndbl (2): No, 金額（百万円）\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nresult &lt;- df7150 |&gt; \n  mutate(年度 = str_sub(ファイル名, 5, 8)) %&gt;%\n  filter(!is.na(`金額（百万円）`), `金額（百万円）` != 0) %&gt;%\n  group_by(年度) %&gt;%\n  summarise(\n    D  = sum(`金額（百万円）`[項目 %in% c(\"預金\", \"借用金\", \"社債\")], na.rm = TRUE),\n    DU = sum(`金額（百万円）`[項目 %in% c(\"預金利息\", \"借用金利息\", \"社債利息\")], na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(rD = DU / D)\n\nNet_income &lt;- df7150 |&gt; \n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) |&gt; \n  slice(seq(1, n(), by = 2)) |&gt;   # 奇数行抽出\n  pull(`金額（百万円）`)\n\nNet_asset &lt;- df7150 |&gt; \n  filter(項目 == \"純資産の部合計\") |&gt; \n  pull(`金額（百万円）`)\n\nCFO_V &lt;- df7150 |&gt; \n  filter(項目==\"営業活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nCFI_V &lt;- df7150 |&gt; \n  filter(項目==\"投資活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nresult &lt;- result |&gt; \n  mutate(\n    Net_income = Net_income,\n    Net_asset  = Net_asset,\n    CFO = CFO_V,\n    CFI = CFI_V,\n    FCF = CFO_V + CFI_V\n  )\n\nwrite_csv(result,\"bf/bf7150.csv\")\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\n\ndf7161 &lt;- read_csv(\"ProcessedBankData/7161_processed_data.csv\")\n\nRows: 1437 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): 項目, ファイル名\ndbl (2): No, 金額（百万円）\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nresult &lt;- df7161 |&gt; \n  mutate(年度 = str_sub(ファイル名, 5, 8)) %&gt;%\n  filter(!is.na(`金額（百万円）`), `金額（百万円）` != 0) %&gt;%\n  group_by(年度) %&gt;%\n  summarise(\n    D  = sum(`金額（百万円）`[項目 %in% c(\"預金\", \"借用金\", \"社債\")], na.rm = TRUE),\n    DU = sum(`金額（百万円）`[項目 %in% c(\"預金利息\", \"借用金利息\", \"社債利息\")], na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(rD = DU / D)\n\nNet_income &lt;- df7161 |&gt; \n  filter(項目 %in% c(\"当期純利益\",     \"当期純利益又は当期純損失（△）\")) |&gt; \n  slice(seq(1, n(), by = 2)) |&gt;   # 奇数行抽出\n  pull(`金額（百万円）`)\n\nNet_income &lt;- c(Net_income,-23462)\n\nNet_asset &lt;- df7161 |&gt; \n  filter(項目 == \"純資産の部合計\") |&gt; \n  pull(`金額（百万円）`)\n\nCFO_V &lt;- df7161 |&gt; \n  filter(項目==\"営業活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nCFI_V &lt;- df7161 |&gt; \n  filter(項目==\"投資活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nresult &lt;- result |&gt; \n  mutate(\n    Net_income = Net_income,\n    Net_asset  = Net_asset,\n    CFO = CFO_V,\n    CFI = CFI_V,\n    FCF = CFO_V + CFI_V\n  )\n\nwrite_csv(result,\"bf/bf7161.csv\") \n\n\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\n\ndf8349 &lt;- read_csv(\"ProcessedBankData/8349_processed_data.csv\")\n\nRows: 1299 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): 項目, ファイル名\ndbl (2): No, 金額（百万円）\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nresult &lt;- df8349 |&gt; \n  mutate(年度 = str_sub(ファイル名, 5, 8)) %&gt;%\n  filter(!is.na(`金額（百万円）`), `金額（百万円）` != 0) %&gt;%\n  group_by(年度) %&gt;%\n  summarise(\n    D  = sum(`金額（百万円）`[項目 %in% c(\"預金\", \"借用金\", \"社債\")], na.rm = TRUE),\n    DU = sum(`金額（百万円）`[項目 %in% c(\"預金利息\", \"借用金利息\", \"社債利息\")], na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(rD = DU / D)\n\nNet_income &lt;- df8349 |&gt; \n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) |&gt; \n  slice(seq(1, n(), by = 2)) |&gt;  \n  pull(`金額（百万円）`)\n\nNet_asset &lt;- df8349 |&gt; \n  filter(項目 == \"純資産の部合計\") |&gt; \n  pull(`金額（百万円）`)\n\nCFO_V &lt;- df8349 |&gt; \n  filter(項目==\"営業活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nCFI_V &lt;- df8349 |&gt; \n  filter(項目==\"投資活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nresult &lt;- result |&gt; \n  mutate(\n    Net_income = Net_income,\n    Net_asset  = Net_asset,\n    CFO = CFO_V,\n    CFI = CFI_V,\n    FCF = CFO_V + CFI_V\n  )\n\nwrite_csv(result,\"bf/bf8349.csv\")\n\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\n\ndf8365 &lt;- read_csv(\"ProcessedBankData/8365_processed_data.csv\")\n\nRows: 1305 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): 項目, ファイル名\ndbl (2): No, 金額（百万円）\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nresult &lt;- df8365 |&gt; \n  mutate(年度 = str_sub(ファイル名, 5, 8)) %&gt;%\n  filter(!is.na(`金額（百万円）`), `金額（百万円）` != 0) %&gt;%\n  group_by(年度) %&gt;%\n  summarise(\n    D  = sum(`金額（百万円）`[項目 %in% c(\"預金\", \"借用金\", \"社債\")], na.rm = TRUE),\n    DU = sum(`金額（百万円）`[項目 %in% c(\"預金利息\", \"借用金利息\", \"社債利息\")], na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(rD = DU / D)\n\nNet_income &lt;- df8365 |&gt; \n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) |&gt; \n  slice(seq(1, n(), by = 2)) |&gt;  \n  pull(`金額（百万円）`)\n\nNet_asset &lt;- df8365 |&gt; \n  filter(項目 == \"純資産の部合計\") |&gt; \n  pull(`金額（百万円）`)\n\nCFO_V &lt;- df8365 |&gt; \n  filter(項目==\"営業活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nCFI_V &lt;- df8365 |&gt; \n  filter(項目==\"投資活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nresult &lt;- result |&gt; \n  mutate(\n    Net_income = Net_income,\n    Net_asset  = Net_asset,\n    CFO = CFO_V,\n    CFI = CFI_V,\n    FCF = CFO_V + CFI_V\n  )\n\nwrite_csv(result,\"bf/bf8365.csv\")\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\n\ndf8383 &lt;- read_csv(\"ProcessedBankData/8383_processed_data.csv\")\n\nRows: 1196 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): 項目, ファイル名\ndbl (2): No, 金額（百万円）\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nresult &lt;- df8383 |&gt; \n  mutate(年度 = str_sub(ファイル名, 5, 8)) %&gt;%\n  filter(!is.na(`金額（百万円）`), `金額（百万円）` != 0) %&gt;%\n  group_by(年度) %&gt;%\n  summarise(\n    D  = sum(`金額（百万円）`[項目 %in% c(\"預金\", \"借用金\", \"社債\")], na.rm = TRUE),\n    DU = sum(`金額（百万円）`[項目 %in% c(\"預金利息\", \"借用金利息\", \"社債利息\")], na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(rD = DU / D)\n\nNet_income &lt;- df8383 |&gt; \n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) |&gt; \n  slice(seq(1, n(), by = 2)) |&gt;  \n  pull(`金額（百万円）`)\n\nNet_asset &lt;- df8383 |&gt; \n  filter(項目 == \"純資産の部合計\") |&gt; \n  pull(`金額（百万円）`)\n\nCFO_V &lt;- df8383 |&gt; \n  filter(項目==\"営業活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nCFI_V &lt;- df8383 |&gt; \n  filter(項目==\"投資活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\n# 9行目に追加する行を作成\nnew_row &lt;- tibble(\n  年度 = \"2023\",\n  D     = NA,\n  DU    = NA,\n  rD    = NA,\n)\n\n# 8行目まで + 新しい9行目 + 残り\nresult &lt;- bind_rows(\n  result[1:8, ],   # 元の1〜8行目\n  new_row,         # 9行目に2023とNA\n  result[9:nrow(result), ]  # 元の9行目以降を10行目以降にずらす\n)\n\n\n\n# 各列ベクトルを作成\nNet_income_vec &lt;- c(Net_income[1:8], NA, Net_income[9:length(Net_income)])\nNet_asset_vec  &lt;- c(Net_asset[1:8], NA, Net_asset[9:length(Net_asset)])\nCFO_vec        &lt;- c(CFO_V[1:8], NA, CFO_V[9:length(CFO_V)])\nCFI_vec        &lt;- c(CFI_V[1:8], NA, CFI_V[9:length(CFI_V)])\nFCF_vec        &lt;- CFO_vec + CFI_vec\n\n# result に追加\nresult &lt;- result |&gt; \n  mutate(\n    Net_income = Net_income_vec,\n    Net_asset  = Net_asset_vec,\n    CFO        = CFO_vec,\n    CFI        = CFI_vec,\n    FCF        = FCF_vec\n  )\n\n\nwrite_csv(result,\"bf/bf8383.csv\")\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\n\ndf8416 &lt;- read_csv(\"ProcessedBankData/8416_processed_data.csv\")\n\nRows: 1384 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): 項目, ファイル名\ndbl (2): No, 金額（百万円）\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nresult &lt;- df8416 |&gt; \n  mutate(年度 = str_sub(ファイル名, 5, 8)) %&gt;%\n  filter(!is.na(`金額（百万円）`), `金額（百万円）` != 0) %&gt;%\n  group_by(年度) %&gt;%\n  summarise(\n    D  = sum(`金額（百万円）`[項目 %in% c(\"預金\", \"借用金\", \"社債\")], na.rm = TRUE),\n    DU = sum(`金額（百万円）`[項目 %in% c(\"預金利息\", \"借用金利息\", \"社債利息\")], na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(rD = DU / D)\n\nNet_income &lt;- df8416 |&gt; \n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) |&gt; \n  slice(seq(1, n(), by = 2)) |&gt;   # 奇数行抽出\n  pull(`金額（百万円）`)\n\nNet_asset &lt;- df8416 |&gt; \n  filter(項目 == \"純資産の部合計\") |&gt; \n  pull(`金額（百万円）`)\n\nCFO_V &lt;- df8416 |&gt; \n  filter(項目==\"営業活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nCFI_V &lt;- df8416 |&gt; \n  filter(項目==\"投資活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nresult &lt;- result |&gt; \n  mutate(\n    Net_income = Net_income,\n    Net_asset  = Net_asset,\n    CFO = CFO_V,\n    CFI = CFI_V,\n    FCF = CFO_V + CFI_V\n  )\n\nwrite_csv(result, \"bf/bf8416.csv\")\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\n\ndf8537 &lt;- read_csv(\"ProcessedBankData/8537_processed_data.csv\")\n\nRows: 1414 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): 項目, ファイル名\ndbl (2): No, 金額（百万円）\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nresult &lt;- df8537 |&gt; \n  mutate(年度 = str_sub(ファイル名, 5, 8)) %&gt;%\n  filter(!is.na(`金額（百万円）`), `金額（百万円）` != 0) %&gt;%\n  group_by(年度) %&gt;%\n  summarise(\n    D  = sum(`金額（百万円）`[項目 %in% c(\"預金\", \"借用金\", \"社債\")], na.rm = TRUE),\n    DU = sum(`金額（百万円）`[項目 %in% c(\"預金利息\", \"借用金利息\", \"社債利息\")], na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(rD = DU / D)\n\nNet_income &lt;- df8537 |&gt; \n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) |&gt; \n  slice(seq(1, n(), by = 2)) |&gt;   # 奇数行抽出\n  pull(`金額（百万円）`)\n\nNet_asset &lt;- df8537 |&gt; \n  filter(項目 == \"純資産の部合計\") |&gt; \n  pull(`金額（百万円）`)\n\nCFO_V &lt;- df8537 |&gt; \n  filter(項目==\"営業活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nCFI_V &lt;- df8537 |&gt; \n  filter(項目==\"投資活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nresult &lt;- result |&gt; \n  mutate(\n    Net_income = Net_income,\n    Net_asset  = Net_asset,\n    CFO = CFO_V,\n    CFI = CFI_V,\n    FCF = CFO_V + CFI_V\n  )\n\nwrite_csv(result, \"bf/bf8537.csv\")\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\n\ndf8542 &lt;- read_csv(\"ProcessedBankData/8542_processed_data.csv\")\n\nRows: 1239 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): 項目, ファイル名\ndbl (2): No, 金額（百万円）\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nresult &lt;- df8542 |&gt; \n  mutate(年度 = str_sub(ファイル名, 5, 8)) %&gt;%\n  filter(!is.na(`金額（百万円）`), `金額（百万円）` != 0) %&gt;%\n  group_by(年度) %&gt;%\n  summarise(\n    D  = sum(`金額（百万円）`[項目 %in% c(\"預金\", \"借用金\", \"社債\")], na.rm = TRUE),\n    DU = sum(`金額（百万円）`[項目 %in% c(\"預金利息\", \"借用金利息\", \"社債利息\")], na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(rD = DU / D)\n\nNet_income &lt;- df8542 |&gt; \n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) |&gt; \n  slice(seq(1, n(), by = 2)) |&gt;  \n  pull(`金額（百万円）`)\n\nNet_asset &lt;- df8542 |&gt; \n  filter(項目 == \"純資産の部合計\") |&gt; \n  pull(`金額（百万円）`)\n\nCFO_V &lt;- df8542 |&gt; \n  filter(項目==\"営業活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nCFI_V &lt;- df8542 |&gt; \n  filter(項目==\"投資活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\n# 8行目に追加する行を作成（7行目まで + 8行目NA）\nnew_row &lt;- tibble(\n  年度 = \"2022\",\n  D     = NA,\n  DU    = NA,\n  rD    = NA\n)\n\n# 7行目まで + 新しい8行目 + 残りを9行目以降にずらす\nresult &lt;- bind_rows(\n  result[1:7, ],\n  new_row,\n  result[8:nrow(result), ]\n)\n\n# 各列ベクトルを作成\nNet_income_vec &lt;- c(Net_income[1:7], NA, Net_income[8:length(Net_income)])\nNet_asset_vec  &lt;- c(Net_asset[1:7], NA, Net_asset[8:length(Net_asset)])\nCFO_vec        &lt;- c(CFO_V[1:7], NA, CFO_V[8:length(CFO_V)])\nCFI_vec        &lt;- c(CFI_V[1:7], NA, CFI_V[8:length(CFI_V)])\nFCF_vec        &lt;- CFO_vec + CFI_vec\n\n# result に追加\nresult &lt;- result |&gt; \n  mutate(\n    Net_income = Net_income_vec,\n    Net_asset  = Net_asset_vec,\n    CFO        = CFO_vec,\n    CFI        = CFI_vec,\n    FCF        = FCF_vec\n  )\n\nwrite_csv(result, \"bf/bf8542.csv\")\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\n\ndf8562 &lt;- read_csv(\"ProcessedBankData/8562_processed_data.csv\")\n\nRows: 1287 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): 項目, ファイル名\ndbl (2): No, 金額（百万円）\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nresult &lt;- df8562 |&gt; \n  mutate(年度 = str_sub(ファイル名, 5, 8)) %&gt;%\n  filter(!is.na(`金額（百万円）`), `金額（百万円）` != 0) %&gt;%\n  group_by(年度) %&gt;%\n  summarise(\n    D  = sum(`金額（百万円）`[項目 %in% c(\"預金\", \"借用金\", \"社債\")], na.rm = TRUE),\n    DU = sum(`金額（百万円）`[項目 %in% c(\"預金利息\", \"借用金利息\", \"社債利息\")], na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(rD = DU / D)\n\nNet_income &lt;- df8562 |&gt; \n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) |&gt; \n  slice(seq(1, n(), by = 2)) |&gt;   # 奇数行抽出\n  pull(`金額（百万円）`)\n\nNet_asset &lt;- df8562 |&gt; \n  filter(項目 == \"純資産の部合計\") |&gt; \n  pull(`金額（百万円）`)\n\nCFO_V &lt;- df8562 |&gt; \n  filter(項目==\"営業活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nCFI_V &lt;- df8562 |&gt; \n  filter(項目==\"投資活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nresult &lt;- result |&gt; \n  mutate(\n    Net_income = Net_income,\n    Net_asset  = Net_asset,\n    CFO = CFO_V,\n    CFI = CFI_V,\n    FCF = CFO_V + CFI_V\n  )\n\nwrite_csv(result, \"bf/bf8562.csv\")\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\n\ndf8563 &lt;- read_csv(\"ProcessedBankData/8563_processed_data.csv\")\n\nRows: 1296 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): 項目, ファイル名\ndbl (2): No, 金額（百万円）\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nresult &lt;- df8563 |&gt; \n  mutate(年度 = str_sub(ファイル名, 5, 8)) %&gt;%\n  filter(!is.na(`金額（百万円）`), `金額（百万円）` != 0) %&gt;%\n  group_by(年度) %&gt;%\n  summarise(\n    D  = sum(`金額（百万円）`[項目 %in% c(\"預金\", \"借用金\", \"社債\")], na.rm = TRUE),\n    DU = sum(`金額（百万円）`[項目 %in% c(\"預金利息\", \"借用金利息\", \"社債利息\")], na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(rD = DU / D)\n\nNet_income &lt;- df8563 |&gt; \n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) |&gt; \n  slice(seq(1, n(), by = 2)) |&gt;   # 奇数行抽出\n  pull(`金額（百万円）`)\n\nNet_asset &lt;- df8563 |&gt; \n  filter(項目 == \"純資産の部合計\") |&gt; \n  pull(`金額（百万円）`)\n\nCFO_V &lt;- df8563 |&gt; \n  filter(項目==\"営業活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nCFI_V &lt;- df8563 |&gt; \n  filter(項目==\"投資活動によるキャッシュ・フロー\") |&gt; \n  pull(`金額（百万円）`)\n\nresult &lt;- result |&gt; \n  mutate(\n    Net_income = Net_income,\n    Net_asset  = Net_asset,\n    CFO = CFO_V,\n    CFI = CFI_V,\n    FCF = CFO_V + CFI_V\n  )\n\nwrite_csv(result, \"bf/bf8563.csv\")\n\n\nbf7150 &lt;- read_csv(\"bf/bf7150.csv\")\n\nRows: 10 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (9): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\naf &lt;- bf7150 |&gt; \n  mutate(\n    price = c(1395, 1426, 1370, 1380, 658, 661, 619, 543, 460, 515),   # 10年分\n    N = 8416000,           # 発行済株式数\n    beta = 1.0803,\n    Pay_ratio = c(0.4946, 0.4299, 0.2924, 0.4520, 0.3431, 0, 0.1302, 0.3003, 0.2187, 0.2157),\n    NP = N * price\n  )\n\nwrite_csv(af,\"af/7150.csv\")\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーー\n\nbf7161 &lt;- read_csv(\"bf/bf7161.csv\")\n\nRows: 10 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (9): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\naf &lt;- bf7161 |&gt; \n  mutate(\n    price = c(2290,1990,1980,1950,1250,1130,821,642,440,545),\n    N = 72840263,\n    beta = 0.3849,\n    Pay_ratio = c(0.896, 0.8976, 0.8771,  0.9041, 0.8865, 0.7246, 1.0757, 1.8867, 0, 0),\n    NP = N * price\n  )\n\nwrite_csv(af,\"af/7161.csv\")\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\nbf8349 &lt;- read_csv(\"bf/bf8349.csv\")\n\nRows: 10 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (9): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\naf &lt;- bf8349 |&gt; \n  mutate(\n    price = c(1570, 1580, 1580, 1513, 1111, 1027, 1125, 1006, 1026, 1170),\n    N = 9509963,\n    beta = 0.6125,\n    Pay_ratio = c(0.3501, 0.2679, 0.2556, 0.4387, 0.3650, 0.3412, 0.4008, 0.3701, 0.3342, 0.3580),\n    NP = N * price\n  )\n\nwrite_csv(af,\"af/8349.csv\")\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\nbf8365 &lt;- read_csv(\"bf/bf8365.csv\")\n\nRows: 10 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (9): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\naf &lt;- bf8365 |&gt; \n  mutate(\n    price = c(2500, 4440, 4500, 4360, 3095, 2412, 2944, 1791, 1764, 1695),\n    N = 5444400,\n    beta = 1.0889,\n    Pay_ratio = c(0.2384, 0.2827, 0.2405, 0.2141, 0.1965, 0.3824, 0.5156, 0.8902, 0.2862, 0.4442),\n    NP = N * price\n  )\n\nwrite_csv(af,\"af/8365.csv\")\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーー\nbf8383 &lt;- read_csv(\"bf/bf8383.csv\")\n\nRows: 10 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (9): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\naf &lt;- bf8383 |&gt; \n  mutate(\n    price = c(2380, 2170, 1936, 1808, 1424, 1387, 1133, 1163, 1146, 1358),\n    N = 9619398,\n    beta = 0.5806,\n    Pay_ratio = c(0.2586, 0.2667, 0.4340, 0.5135, 0.5989, 0.5236, 0.4829, 0.5389, 0.4658, 0.4506),\n    NP = N * price\n  )\n\nwrite_csv(af,\"af/8383.csv\")\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\nbf8416 &lt;- read_csv(\"bf/bf8416.csv\")\n\nRows: 10 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (9): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\naf &lt;- bf8416 |&gt; \n  mutate(\n    price = c(1590, 1420, 1340, 1319, 740, 889, 722, 770, 716, 935 ),\n    N = 10244800,\n    beta = 0.8731,\n    Pay_ratio = c(0.707, 0.932, 0.1322, 0.1730, 0.3535, 0.2356, 0.4178, 0.1878, 0.1958, 0.2475),\n    NP = N * price\n  )\n\nwrite_csv(af,\"af/8416.csv\")\n\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\nbf8537 &lt;- read_csv(\"bf/bf8537.csv\")\n\nRows: 10 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (9): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\naf &lt;- bf8537 |&gt; \n  mutate(\n    price = c(2210, 2460, 2630, 2520, 1781, 1672, 1339, 1360, 1254, 1282),\n    N = 9671400,\n    beta = 0.6017,\n    Pay_ratio = c(0.3001, 0.1672, 0.1551, 0.1346, 0.1872, 0.4200, 0.3054, 0.2326, 0.3744, 0.2814),\n    NP = N * price\n  )\n\nwrite_csv(af,\"af/8537.csv\")\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\nbf8542 &lt;- read_csv(\"bf/bf8542.csv\")\n\nRows: 10 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (9): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\naf &lt;- bf8542 |&gt; \n  mutate(\n    price = c(1780, 1740, 1585, 1558, 1081, 1074, 1060, 1070, 1045, 1155),\n    N = 11679030,\n    beta = 0.5599,\n    Pay_ratio = c(0.3558, 0.3178, 0.3136, 0.4206, 0.5189, 0.5502, 0.4768, 0.4226, 0.3724, 0.4613),\n    NP = N * price\n  )\n\nwrite_csv(af,\"af/8542.csv\")\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\nbf8562 &lt;- read_csv(\"bf/bf8562.csv\")\n\nRows: 10 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (9): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\naf &lt;- bf8562 |&gt; \n  mutate(\n    price = c(940, 960, 980, 944, 390, 273, 198, 235, 258, 235),\n    N = 34900000,\n    beta = 1.1149,\n    Pay_ratio = c(0.1045, 0.1959, 0.4255, 0, 0.1390, 0.1358, 0 , 0.1693, 0.1769, 0.1245),\n    NP = N * price\n  )\n\nwrite_csv(af,\"af/8562.csv\")\n#ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー\n\nbf8563 &lt;- read_csv(\"bf/bf8563.csv\")\n\nRows: 10 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (9): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\naf &lt;- bf8563 |&gt; \n  mutate(\n    price = c(1410, 2080, 1680, 1651, 601, 648, 639, 761, 681, 740),\n    N = 12701000,\n    beta = 0.8016,\n    Pay_ratio = c(0.1426, 0.1532, 0.2764, 0.2986, 0.3195, 0.3742, 0.4017, 0.3294, 0.3121, 0.3131),\n    NP = N * price\n  )\n\nwrite_csv(af,\"af/8563.csv\")\n\n\n\n2 計算式\n\ndf7150 &lt;- read_csv(\"af/7150.csv\")\n\nRows: 10 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF, price, N, bet...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ndf7161 &lt;- read_csv(\"af/7161.csv\")\n\nRows: 10 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF, price, N, bet...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ndf8349 &lt;- read_csv(\"af/8349.csv\")\n\nRows: 10 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF, price, N, bet...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ndf8365 &lt;- read_csv(\"af/8365.csv\")\n\nRows: 10 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF, price, N, bet...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ndf8383 &lt;- read_csv(\"af/8383.csv\")\n\nRows: 10 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF, price, N, bet...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ndf8416 &lt;- read_csv(\"af/8416.csv\")\n\nRows: 10 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF, price, N, bet...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ndf8537 &lt;- read_csv(\"af/8537.csv\")\n\nRows: 10 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF, price, N, bet...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ndf8542 &lt;- read_csv(\"af/8542.csv\")\n\nRows: 10 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF, price, N, bet...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ndf8562 &lt;- read_csv(\"af/8562.csv\")\n\nRows: 10 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF, price, N, bet...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ndf8563 &lt;- read_csv(\"af/8563.csv\")\n\nRows: 10 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): 年度, D, DU, rD, Net_income, Net_asset, CFO, CFI, FCF, price, N, bet...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ncalc_wacc &lt;- function(df, Rf = 0.0157, Rm = 0.05, Tax = 0.2320) {\n  \n  wacc &lt;- df |&gt; \n    mutate(\n      rE = Rf + beta * (Rm - Rf),     # CAPMで株主資本コスト\n      V  = D + NP,                    # 企業価値（負債＋株主資本）\n      WACC = (NP / V) * rE + (D / V) * rD * (1 - Tax)\n    )\n  \n  return(wacc)\n}\n\n\nwacc7150 &lt;- calc_wacc(df7150)\n\nwacc7161 &lt;- calc_wacc(df7161)\n\nwacc8349 &lt;- calc_wacc(df8349)\n\nwacc8365 &lt;- calc_wacc(df8365)\n\nwacc8383 &lt;- calc_wacc(df8383)\n\nwacc8416 &lt;- calc_wacc(df8416)\n\nwacc8537 &lt;- calc_wacc(df8537)\n\nwacc8542 &lt;- calc_wacc(df8542)\n\nwacc8562 &lt;- calc_wacc(df8562)\n\nwacc8563 &lt;- calc_wacc(df8563)\n# -----------------------------\n# 企業価値計算関数まとめ\n# -----------------------------\n\ncalculate_valuation_env &lt;- function(codes, g = 0.02, rE = 0.08, path = \"Valuation_results.csv\") {\n  \n  # DCF計算（過去データ加重平均、将来5年割引）\n  DCF_value &lt;- function(df, g) {\n    fcf &lt;- df$FCF\n    years &lt;- df$年度\n    weights &lt;- ifelse(is.na(years), 0, seq_along(fcf))\n    weights &lt;- weights / sum(weights)\n    FCF_base &lt;- sum(fcf * weights, na.rm = TRUE)\n    \n    FCF_future &lt;- FCF_base * (1 + g)^(1:5)\n    discount_factors &lt;- (1 + df$WACC[1])^(1:5)\n    sum(FCF_future / discount_factors)\n  }\n  \n  # RIM計算（Net_income の加重平均使用）\n  RIM_value &lt;- function(df, rE, g) {\n    netinc &lt;- df$Net_income\n    years &lt;- df$年度\n    weights &lt;- ifelse(is.na(years), 0, seq_along(netinc))\n    weights &lt;- weights / sum(weights)\n    NetIncome_base &lt;- sum(netinc * weights, na.rm = TRUE)\n    \n    df$Net_asset[nrow(df)] + (NetIncome_base * (1 + g)) / rE\n  }\n  \n  # DDM計算（配当ベース）\n  DDM_value &lt;- function(df, rE, g, horizon = 5) {\n  netinc &lt;- df$Net_income\n  payratio &lt;- df$Pay_ratio\n  years &lt;- df$年度\n  \n  # 過去配当の加重平均\n  weights &lt;- ifelse(is.na(years), 0, seq_along(netinc))\n  weights &lt;- weights / sum(weights)\n  Div_base &lt;- sum(netinc * payratio * weights, na.rm = TRUE)\n  \n  # 最初のhorizon年間の配当予測\n  Div_future &lt;- Div_base * (1 + g)^(1:horizon)\n  discount_factors &lt;- (1 + rE)^(1:horizon)\n  PV_initial &lt;- sum(Div_future / discount_factors)\n  \n  # horizon年目の配当\n  D_horizon &lt;- Div_base * (1 + g)^horizon\n  \n  # 定率成長モデルによる永続価値\n  PV_terminal &lt;- D_horizon * (1 + g) / (rE - g) / ((1 + rE)^horizon)\n  \n  # 合計企業価値\n  V &lt;- PV_initial + PV_terminal\n  return(V)\n}\n  \n  # 結果格納用\n  results &lt;- tibble(df = character(),\n                    DCF_value = numeric(),\n                    RIM_value = numeric(),\n                    DDM_value = numeric(),\n                    g = numeric(),\n                    NP_latest = numeric())\n  \n  # 企業ごとにループ\n  for(code in codes) {\n    # 環境からデータフレーム取得\n    df_name &lt;- paste0(\"wacc\", code)\n    if(!exists(df_name)) next\n    df &lt;- get(df_name)\n    \n    # 各モデル計算\n    dcf &lt;- DCF_value(df, g)\n    rim &lt;- RIM_value(df, rE, g)\n    ddm &lt;- DDM_value(df, rE, g)\n    np_latest &lt;- tail(df$NP, 1)  # 最新年度のNP\n    \n    results &lt;- bind_rows(results,\n                         tibble(df = code,\n                                DCF_value = dcf,\n                                RIM_value = rim,\n                                DDM_value = ddm,\n                                g = g,\n                                NP_latest = np_latest))\n  }\n  \n  write_csv(results, path)\n  return(results)\n}\n\n\nlibrary(tidyverse)\nlibrary(showtext)\n\nLoading required package: sysfonts\n\n\nLoading required package: showtextdb\n\nshowtext_auto()\n# macOS のヒラギノを登録\nfont_add(\"hiragino\", \"/System/Library/Fonts/ヒラギノ角ゴシック W3.ttc\")\ntheme(text = element_text(family = \"hiragino\"))\n\n&lt;theme&gt; List of 1\n $ text: &lt;ggplot2::element_text&gt;\n  ..@ family       : chr \"hiragino\"\n  ..@ face         : NULL\n  ..@ italic       : chr NA\n  ..@ fontweight   : num NA\n  ..@ fontwidth    : num NA\n  ..@ colour       : NULL\n  ..@ size         : NULL\n  ..@ hjust        : NULL\n  ..@ vjust        : NULL\n  ..@ angle        : NULL\n  ..@ lineheight   : NULL\n  ..@ margin       : NULL\n  ..@ debug        : NULL\n  ..@ inherit.blank: logi FALSE\n @ complete: logi FALSE\n @ validate: logi TRUE\n\ndf &lt;- read_csv(\"Valuation_results.csv\")\n\nRows: 10 Columns: 6\n\n\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (6): df, DCF_value, RIM_value, DDM_value, g, NP_latest\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ndf\n\n# A tibble: 10 × 6\n      df DCF_value RIM_value DDM_value     g   NP_latest\n   &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;\n 1  7150    -5958.    20673.      488.  0.02  4334240000\n 2  7161   147045.    28211.     5198.  0.02 39697943335\n 3  8349    25231.    55796.     1891.  0.02 11126656710\n 4  8365      392.    42117.     1244.  0.02  9228258000\n 5  8383    66347.    61508.     1795.  0.02 13063142484\n 6  8416    -3146.    82114.     2012.  0.02  9578888000\n 7  8537   -16594.   103325.     2065.  0.02 12398734800\n 8  8542   -44108.    74711.     2588.  0.02 13489279650\n 9  8562     7399.    28907.      563.  0.02  8201500000\n10  8563     2935.    55038.     1695.  0.02  9398740000\n\ndf &lt;- df |&gt; \n  mutate(\n    RIM_DDM = (RIM_value + DDM_value) / 2,\n    RIM_DDM25 = (RIM_value * 0.25 + DDM_value * 0.75),\n    RIM_DDM12 = (RIM_value * 0.125 + DDM_value * 0.875)\n  )\n#円に戻す\ndf$DCF_value &lt;- df$DCF_value *1e6 \ndf$RIM_value &lt;- df$RIM_value *1e6\ndf$DDM_value &lt;- df$DDM_value *1e6\ndf$RIM_DDM   &lt;- df$RIM_DDM   *1e6\ndf$RIM_DDM25 &lt;- df$RIM_DDM25 *1e6\ndf$RIM_DDM12 &lt;- df$RIM_DDM12 *1e6\n#億\ndf$DCF_value &lt;- df$DCF_value /1e8 \ndf$RIM_value &lt;- df$RIM_value /1e8\ndf$DDM_value &lt;- df$DDM_value /1e8\ndf$RIM_DDM   &lt;- df$RIM_DDM   /1e8\ndf$RIM_DDM25 &lt;- df$RIM_DDM25 /1e8\ndf$RIM_DDM12 &lt;- df$RIM_DDM12 /1e8\ndf$NP_latest &lt;- df$NP_latest /1e8\n\n\n\n\ndf_plot &lt;- df[, c(\"df\", \"DCF_value\", \"RIM_value\", \"DDM_value\", \"RIM_DDM\",\"RIM_DDM25\",\"RIM_DDM12\",\"NP_latest\")]\ndf_plot$df &lt;- as.character(df_plot$df)\n# wide → long 形式に変換\ndf_long &lt;- pivot_longer(df_plot, cols = c(\"DCF_value\", \"RIM_value\", \"DDM_value\", \"RIM_DDM\",\"RIM_DDM25\",\"RIM_DDM12\",\"NP_latest\"),\n                        names_to = \"モデル\", values_to = \"時価総額\")\n\n# モデル名を整形（末尾の \"_value\" を削除）\ndf_long$モデル &lt;- sub(\"_value|_latest\", \"\", df_long$モデル)\n\n\n\n\ndf_long$モデル &lt;- factor(df_long$モデル, levels = c(\"DCF\", \"RIM\", \"DDM\", \"RIM_DDM\",\"RIM_DDM25\",\"RIM_DDM12\",\"NP\"))\n# グラフ作成\n\n#2. 各企業の最大時価総額モデルを判定\ndf_long &lt;- df_long %&gt;%\n  group_by(df) %&gt;%\n  mutate(最大モデル = ifelse(時価総額 == max(時価総額), TRUE, FALSE)) %&gt;%\n  ungroup()\n\n# 3. 企業ごとのモデル別時価総額グラフ\np1 &lt;- ggplot(df_long, aes(x = df, y = 時価総額, fill = モデル)) +\n  geom_bar(stat = \"identity\", position = position_dodge()) +\n  labs(title = \"企業ごとのモデル別時価総額\",\n       x = \"企業\", y = \"時価総額（億円）\") +\n  theme_bw()\n\nprint(p1)\n\n\n\n\n\n\n\n# 4. モデル別平均時価総額\nmodel_summary &lt;- df_long %&gt;%\n  group_by(モデル) %&gt;%\n  summarise(\n    平均 = mean(時価総額),\n    中央値 = median(時価総額),\n    最大 = max(時価総額),\n    最小 = min(時価総額),\n    SD = sd(時価総額)\n  )\n\nprint(model_summary)\n\n# A tibble: 7 × 6\n  モデル     平均 中央値   最大    最小    SD\n  &lt;fct&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;\n1 DCF       180.    16.6 1470.  -441.   535. \n2 RIM       552.   554.  1033.   207.   263. \n3 DDM        19.5   18.4   52.0    4.88  13.2\n4 RIM_DDM   286.   286.   527.   106.   132. \n5 RIM_DDM25 153.   152.   274.    55.3   67.4\n6 RIM_DDM12  86.1   85.0  147.    30.1   35.8\n7 NP        131.   104.   397.    43.3   97.4\n\n# 5. モデル別分布（箱ひげ図）\np2 &lt;- ggplot(df_long, aes(x = モデル, y = 時価総額, fill = モデル)) +\n  geom_boxplot() +\n  labs(title = \"モデル別時価総額の分布\",\n       x = \"モデル\", y = \"時価総額（億円）\") +\n  theme_bw()\n\nprint(p2)\n\n\n\n\n\n\n\n# p2 はモデル別分布の箱ひげ図\nggsave(\"モデル別時価総額分布.png\", plot = p2,\n       width = 6, height = 5, dpi = 600)\n\n\n\n# 6. 優位モデルの企業数を集計\n\n# NPの評価額を各企業ごとに取得\ndf_np &lt;- df_long %&gt;%\n  filter(モデル == \"NP\") %&gt;%\n  select(df, NP_value = 時価総額)\n\n# NPとの差を計算\ndf_comparison &lt;- df_long %&gt;%\n  filter(モデル != \"NP\") %&gt;%        # NP自体は除く\n  left_join(df_np, by = \"df\") %&gt;%   # NPの値を結合\n  mutate(\n    abs_diff = abs(時価総額 - NP_value),        # 絶対差\n    rel_diff = abs(時価総額 - NP_value) / NP_value  # 相対差\n  )\n\n# 企業ごとにNPに最も近いモデルを抽出\ndominant_model &lt;- df_comparison %&gt;%\n  group_by(df) %&gt;%\n  slice_min(order_by = abs_diff, n = 1, with_ties = FALSE) %&gt;%\n  ungroup() %&gt;%\n  select(df, モデル, 時価総額, NP_value, abs_diff, rel_diff)\n\nmodel_count &lt;- dominant_model %&gt;%\n  group_by(モデル) %&gt;%\n  summarise(企業数 = n()) %&gt;%\n  arrange(desc(企業数))\n\nprint(model_count)\n\n# A tibble: 3 × 2\n  モデル    企業数\n  &lt;fct&gt;      &lt;int&gt;\n1 RIM_DDM12      5\n2 RIM_DDM25      4\n3 RIM            1"
  },
  {
    "objectID": "11_create_website.html#gitのインストール",
    "href": "11_create_website.html#gitのインストール",
    "title": "ウェブサイトの作り方",
    "section": "1.1 Gitのインストール",
    "text": "1.1 Gitのインストール\n\nGitはソースコードやドキュメントの変更履歴を管理するツールです。\n\nGit公式サイトからOSに合ったインストーラーをダウンロードし、インストールしてください。"
  },
  {
    "objectID": "11_create_website.html#rのインストール",
    "href": "11_create_website.html#rのインストール",
    "title": "ウェブサイトの作り方",
    "section": "1.2 Rのインストール",
    "text": "1.2 Rのインストール\n\nRは統計解析・データ分析向けのプログラミング言語です。\nCRAN（The Comprehensive R Archive Network）からOSに合ったインストーラーを入手してインストールします。\nインストール後、コマンドラインまたはRStudioからRを起動できることを確認してください。"
  },
  {
    "objectID": "11_create_website.html#rstudioのインストール",
    "href": "11_create_website.html#rstudioのインストール",
    "title": "ウェブサイトの作り方",
    "section": "1.3 RStudioのインストール",
    "text": "1.3 RStudioのインストール\n\nRStudioはRを使いやすくする統合開発環境（IDE）です。\nRStudio公式サイトからインストーラーを取得しインストール。"
  },
  {
    "objectID": "11_create_website.html#quartoのインストール",
    "href": "11_create_website.html#quartoのインストール",
    "title": "ウェブサイトの作り方",
    "section": "1.4 Quartoのインストール",
    "text": "1.4 Quartoのインストール\n\nQuartoはMarkdown形式で文章やサイトを生成するツールです。\nQuarto公式サイトからインストーラーをダウンロードしインストール。\nRStudioのターミナルやコマンドラインで以下を実行し、動作確認します。"
  },
  {
    "objectID": "05_8331.html",
    "href": "05_8331.html",
    "title": "8331_千葉銀行",
    "section": "",
    "text": "# 必要なライブラリの読み込み\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.1     ✔ readr     2.1.5\n✔ ggplot2   4.0.0     ✔ stringr   1.5.2\n✔ lubridate 1.9.4     ✔ tibble    3.3.0\n✔ purrr     1.1.0     ✔ tidyr     1.3.1\n\n## 千葉銀行財務データ読み込み\ndf &lt;- read_csv(\"Processed_PrimeBank/8331.csv\", show_col_types = FALSE)\n# TOPIX年次リターンデータの読み込み\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\nprint(df)\n\n# A tibble: 1,643 × 3\n   項目                     金額            年度\n   &lt;chr&gt;                    &lt;chr&gt;          &lt;dbl&gt;\n 1 企業名                   The Chiba Bank  2025\n 2 現金預け金               4689382         2024\n 3 コールローン及び買入手形 391822          2024\n 4 債券貸借取引支払保証金   1950            2024\n 5 買入金銭債権             23121           2024\n 6 特定取引資産             27426           2024\n 7 金銭の信託               10903           2024\n 8 有価証券                 2906067         2024\n 9 貸出金                   12721829        2024\n10 外国為替                 6084            2024\n# ℹ 1,633 more rows\n\nprint(TOPIX)\n\n# A tibble: 57 × 6\n   Date        Open  High   Low Close Volume\n   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1 1969-12-31  133.  179.  133.  179.      0\n 2 1970-12-31  183.  186.  147.  148.      0\n 3 1971-12-31  149.  209   148.  199.      0\n 4 1972-12-31  200.  402.  200.  402.      0\n 5 1973-12-31  404.  422.  285.  306.      0\n 6 1974-12-31  304.  342.  252.  278.      0\n 7 1975-12-31  276.  333.  268.  323.      0\n 8 1976-12-31  326.  384.  326.  384.      0\n 9 1977-12-31  384.  391.  350.  364.      0\n10 1978-12-31  364.  453.  364.  450.      0\n# ℹ 47 more rows",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8331_千葉銀行"
    ]
  },
  {
    "objectID": "05_8331.html#負債コスト-r_d-の算出",
    "href": "05_8331.html#負債コスト-r_d-の算出",
    "title": "8331_千葉銀行",
    "section": "0.1 負債コスト (\\(r\\_D\\)) の算出",
    "text": "0.1 負債コスト (\\(r\\_D\\)) の算出\n負債コスト (\\(r\\_D\\)) は、企業が負債に対して支払う平均的な金利を指す。これは、主に支払利息の総額を負債総額で除することで算出される。銀行株の場合、前述の通り預金にかかる特定の金利も考慮に入れ、\\(D\\) と対応する利息コストを適切に計算する。 複数年度の平均(できれば加重平均をとることで偶発的な変動リスクを抑える)\n\nrD_Total_Debt &lt;- df[df$項目 == \"資金調達費用\" | df$項目 == \"預金利息\" | df$項目 == \"借用金利息\" | df$項目 == \"社債利息\",]\nrD &lt;- sum(as.numeric(rD_Total_Debt$金額)) / D # 例として42～44行目の3列目を合計しDで割る\n\n# 算出結果の確認\ncat(\"負債コスト (rD):\", round(rD * 100, 3), \"%\\n\")\n\n負債コスト (rD): 0.406 %\n\n\n\n0.1.1 株主資本コスト (\\(r\\_E\\)) の算出\n株主資本コスト (\\(r\\_E\\)) は、株主が企業に投資することで期待する最低限の収益率であり、一般的には資本資産評価モデル (CAPM: Capital Asset Pricing Model) を用いて算出される。\n\\[r_E = r_F + \\beta \\times (E_R - r_F)\\]\n\n\n0.1.2 リスクフリーレート (\\(r\\_F\\))\n日本では、通常、日本国債の利回りをその代理変数として用いる。これは、国債が信用リスクが極めて低い投資対象と見なされるためである。\n\n# リスクフリーレート (rF) の設定\n# 例として、現在の日本国債10年物利回りなどを設定します。\n# 実際の評価時点の最新の利回りを調べて入力してください。\nrF &lt;- 0.01570 # 例示の値 (1.57%)\n\n# 算出結果の確認\ncat(\"リスクフリーレート (rF):\", round(rF * 100, 3), \"%\\n\")\n\nリスクフリーレート (rF): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8331_千葉銀行"
    ]
  },
  {
    "objectID": "05_8331.html#β-ベータ",
    "href": "05_8331.html#β-ベータ",
    "title": "8331_千葉銀行",
    "section": "0.2 β (ベータ)",
    "text": "0.2 β (ベータ)\n評価対象となる特定の株式が、市場全体の動きに対してどれだけ敏感に反応するかを示す指標である。\n\n# ベータ (β) の設定\n# 評価対象企業のβ値を調べて入力してください。beta.xlsxで計算済\nbeta &lt;- 0 #-0.183376941 マイナスのため最小値である０\n# 算出結果の確認\ncat(\"ベータ (β):\", round(beta, 3), \"\\n\")\n\nベータ (β): 0 \n\n\n\n0.2.1 市場リスクプレミアム (\\(E\\_R - r\\_F\\))\n市場全体の期待されるリターン (\\(E\\_R\\)) からリスクフリーレート (\\(r\\_F\\)) を差し引いたものであり、リスクを負って株式市場に投資する投資家が要求する追加リターンを意味する。\n\\(E\\_R\\) は、TOPIXが始まった1970年から2024年までの年次リターンの平均から求める。\n\n# TOPIXの年次リターン計算 (再掲、確認のため)\n# 年初始値と年末終値をベクトルにまとめる\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\n\n# 年次リターン（価格収益率）を計算\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\n\n# 期待収益率（年平均リターン） = 市場の期待リターン (Er)\nEr &lt;- mean(topix_return)\n\n# 市場リスクプレミアムの計算\nmarket_risk_premium &lt;- Er - rF\n\n# 算出結果の確認\ncat(\"市場の期待リターン (Er):\", round(Er * 100, 3), \"%\\n\")\n\n市場の期待リターン (Er): 7.846 %\n\ncat(\"市場リスクプレミアム (Er - rF):\", round(market_risk_premium * 100, 3), \"%\\n\")\n\n市場リスクプレミアム (Er - rF): 6.276 %\n\n\n\n\n0.2.2 株主資本コスト (\\(r\\_E\\)) の最終算出\n\n# 株主資本コスト (rE) の計算\nrE &lt;- rF + beta * market_risk_premium\n\n# 算出結果の確認\ncat(\"株主資本コスト (rE):\", round(rE * 100, 3), \"%\\n\")\n\n株主資本コスト (rE): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8331_千葉銀行"
    ]
  },
  {
    "objectID": "05_8331.html#waccの最終算出",
    "href": "05_8331.html#waccの最終算出",
    "title": "8331_千葉銀行",
    "section": "0.3 WACCの最終算出",
    "text": "0.3 WACCの最終算出\n上記で計算した各要素 (\\(D\\), \\(E\\), \\(r\\_D\\), \\(r\\_E\\)) と実効税率 (\\(T\\)) を用いて、WACCを最終的に算出します。\n\n# 法人実効税率 (T) の設定 \\# 最新の法人実効税率を調べて設定してください。 T \\&lt;- 0.2320 \\# 例示の値 (23.20%)\n\n# WACCの計算\n\nWACC &lt;- D / (D + E) * rD * (1 - T) + E / (D + E) * rE\n\n# 算出結果の確認\ncat(\"加重平均資本コスト (WACC):\", round(WACC * 100, 3), \"%\\n\")\n\n加重平均資本コスト (WACC): 1.57 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8331_千葉銀行"
    ]
  },
  {
    "objectID": "05_8331.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "href": "05_8331.html#フリーキャッシュフロー-fcf-の推計と企業価値の算出",
    "title": "8331_千葉銀行",
    "section": "0.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出",
    "text": "0.4 フリーキャッシュフロー (FCF) の推計と企業価値の算出\n割引率であるWACCが算出できたら、次に企業の将来のフリーキャッシュフロー（FCF）を推計し、それらをWACCで現在価値に割り引くことで企業価値を算出します。\n\n0.4.1 フリーキャッシュフロー (FCF) の定義と推計\nフリーキャッシュフローは、企業が営業活動によって生み出したキャッシュのうち、事業の維持・拡大に必要な投資を行った後に残るキャッシュのことであり、株主や債権者に自由に分配可能なキャッシュフローを指します。一般的には、営業活動によるキャッシュ・フロー ＋ 投資活動によるキャッシュ・フローとして簡易的に計算されます。\n\n# 営業活動によるキャッシュ・フロー (CFO) の抽出\nCFO &lt;- df[df$項目 == \"営業活動によるキャッシュ・フロー\",]\n# 投資活動によるキャッシュ・フロー (CFI) の抽出\nCFI &lt;- df[df$項目 == \"投資活動によるキャッシュ・フロー\",]\nFCF_combined_df &lt;- full_join(CFO,CFI, by = \"年度\")\nFCF_combined_df &lt;- FCF_combined_df |&gt; \n  mutate(FCF = as.numeric(金額.x) + as.numeric(金額.y) )\n\nFCF_past &lt;- FCF_combined_df$FCF\n# 計算されたFCFのデータフレームを確認\ncat(\"各年度のフリーキャッシュフロー (FCF):\\n\")\n\n各年度のフリーキャッシュフロー (FCF):\n\nprint(FCF_combined_df)\n\n# A tibble: 10 × 6\n   項目.x                           金額.x   年度 項目.y          金額.y     FCF\n   &lt;chr&gt;                            &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;    &lt;dbl&gt;\n 1 営業活動によるキャッシュ・フロー 787870   2024 投資活動によるキャッシュ・フ… -1360…  651864\n 2 営業活動によるキャッシュ・フロー -20384   2023 投資活動によるキャッシュ・フ… -88492 -108876\n 3 営業活動によるキャッシュ・フロー 710040   2022 投資活動によるキャッシュ・フ… -81370  628670\n 4 営業活動によるキャッシュ・フロー 1913821  2021 投資活動によるキャッシュ・フ… -1828… 1730989\n 5 営業活動によるキャッシュ・フロー 20951    2020 投資活動によるキャッシュ・フ… -1029…  -81996\n 6 営業活動によるキャッシュ・フロー 251619   2019 投資活動によるキャッシュ・フ… 60524   312143\n 7 営業活動によるキャッシュ・フロー -100848  2018 投資活動によるキャッシュ・フ… 210197  109349\n 8 営業活動によるキャッシュ・フロー 361320   2017 投資活動によるキャッシュ・フ… 72591   433911\n 9 営業活動によるキャッシュ・フロー 350909   2016 投資活動によるキャッシュ・フ… -1447…  206146\n10 営業活動によるキャッシュ・フロー 428289   2015 投資活動によるキャッシュ・フ… -68275  360014\n\n# FCFの値をベクトルとして取り出す（今後の予測モデルや企業価値計算で使用するため）\n# この FCF_past が、将来FCF予測の基礎データとなります。\nFCF_past &lt;- FCF_combined_df$FCF\n\ncat(\"\\nFCF_past (ベクトル形式):\\n\")\n\n\nFCF_past (ベクトル形式):\n\nprint(FCF_past)\n\n [1]  651864 -108876  628670 1730989  -81996  312143  109349  433911  206146\n[10]  360014\n\n\n\n\n0.4.2 将来フリーキャッシュフローの予測\n\n# 既に計算済みの FCF_past ベクトルを使用\nfirst_fcf &lt;- FCF_past[1]\nlast_fcf &lt;- FCF_past[length(FCF_past)]\nnum_periods &lt;- length(FCF_past) - 1 # 10年データなら9期間\n\nif (first_fcf &lt;= 0 || last_fcf &lt;= 0 || num_periods == 0) {\n  warning(\"FCFが0以下の値を含む、または期間が不十分なため、CAGRの計算が不正確になる可能性があります。\")\n  cagr_fcf &lt;- NA\n} else {\n  cagr_fcf &lt;- (last_fcf / first_fcf)^(1 / num_periods) - 1\n}\n\ncat(\"--- 過去のFCF年平均成長率 (CAGR) ---\\n\")\n\n--- 過去のFCF年平均成長率 (CAGR) ---\n\nif (!is.na(cagr_fcf)) {\n  cat(sprintf(\"CAGR (過去 %d年間): %.2f%%\\n\", num_periods, cagr_fcf * 100), \"\\n\")\n} else {\n  cat(\"CAGRは計算できませんでした (FCFが0以下、または期間が不十分)。\\n\")\n}\n\nCAGR (過去 9年間): -6.38%\n \n\n# 明示的予測期間の設定（例として5年間とします）\nforecast_period &lt;- 5\n\n# 永久成長率 (g) の設定\n# 企業の長期的な安定成長率を仮定します (0%～2%程度が一般的)。\ng &lt;- 0 # 例示の値 (1%)\n# 将来FCFの予測値の計算\n# 過去のFCFの最終年度の値を基準に、一定の成長率で予測します。\n# FCF_pastの最後の値が最新年度のFCF実績値であると仮定します。\nlast_FCF_actual &lt;- FCF_past[length(FCF_past)]\n\nFCF_forecast &lt;- numeric(forecast_period)\nif (forecast_period &gt; 0) {\n  FCF_forecast[1] &lt;- last_FCF_actual * (1 + g) # 予測1年目 (最終実績値から1期成長)\n  for (i in 2:forecast_period) {\n    FCF_forecast[i] &lt;- FCF_forecast[i-1] * (1 + g)\n  }\n} else {\n  message(\"予測期間が0または負の値のため、FCF予測は行われません。\")\n}\n\ncat(\"将来FCF予測 (簡易モデル -\", forecast_period, \"年間):\\n\")\n\n将来FCF予測 (簡易モデル - 5 年間):\n\nprint(round(FCF_forecast, 0))\n\n[1] 360014 360014 360014 360014 360014\n\n\n\n\n0.4.3 ターミナルバリュー (TV) の算出\nターミナルバリューは、明示的に予測する期間（ここでは10年間）以降の、企業が永続的に生み出すと仮定されるフリーキャッシュフローの現在価値の合計を表します。ゴードン成長モデルを用いて算出します。\n\\[TV = \\frac{FCF_{N+1}}{WACC - g}\\]\nここで、\\(FCF\\_{N+1}\\) は最終予測年度の翌年のFCF、\\(WACC\\) は加重平均資本コスト、\\(g\\) は永久成長率です。\n\n# 最終予測年度の翌年 (forecast_period + 1 年目) のFCF (FCF_N_plus_1) を計算\nif (forecast_period &gt; 0) {\n  FCF_N_plus_1 &lt;- FCF_forecast[forecast_period] * (1 + g)\n} else {\n  FCF_N_plus_1 &lt;- last_FCF_actual * (1 + g)\n}\n\n# ターミナルバリュー (TV) の計算\nif (WACC - g &lt;= 0) {\n  warning(\"WACC - g が0以下になるため、ターミナルバリューの計算が適切ではありません。\")\n  TV &lt;- NA\n} else {\n  TV &lt;- FCF_N_plus_1 / (WACC - g)\n}\n\ncat(\"最終予測年度の翌年のFCF (FCF_N_plus_1):\", round(FCF_N_plus_1, 0), \"\\n\")\n\n最終予測年度の翌年のFCF (FCF_N_plus_1): 360014 \n\ncat(\"ターミナルバリュー (TV):\", round(TV, 0), \"\\n\")\n\nターミナルバリュー (TV): 22933360 \n\n\n\n\n0.4.4 企業価値 (Valuation) の算出\n各年度のフリーキャッシュフローとターミナルバリューをWACCで現在価値に割り引き、合計することで企業価値を算出します。\n\n# 企業価値の計算 (予測FCFの現在価値 + TVの現在価値)\nValuation &lt;- 0\n\n# 明示的予測期間のFCFの現在価値を合計\nif (forecast_period &gt; 0) {\n  for (i in 1:forecast_period) {\n    Valuation &lt;- Valuation + FCF_forecast[i] / (1 + WACC)^i\n  }\n}\n\n# ターミナルバリューの現在価値を加算\nif (!is.na(TV)) {\n  Valuation &lt;- Valuation + TV / (1 + WACC)^forecast_period\n} else {\n  message(\"ターミナルバリューが計算できないため、企業価値の計算はTVを含んでいません。\")\n}\n\ncat(\"DCF法による企業価値評価 (Valuation):\", round(Valuation, 0), \"\\n\")\n\nDCF法による企業価値評価 (Valuation): 22933360 \n\n\n\n\n0.4.5 時価総額とFCF\n\nFCF_E &lt;- last_fcf / (E/1e6)\ncat(\"時価総額フリーキャッシュフロー比率\", round(FCF_E * 100, 3), \"%\\n\")\n\n時価総額フリーキャッシュフロー比率 28.573 %",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8331_千葉銀行"
    ]
  },
  {
    "objectID": "05_8331.html#残余利益モデルrim",
    "href": "05_8331.html#残余利益モデルrim",
    "title": "8331_千葉銀行",
    "section": "2.1 残余利益モデル(RIM)",
    "text": "2.1 残余利益モデル(RIM)",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8331_千葉銀行"
    ]
  },
  {
    "objectID": "05_8331.html#残余利益モデルの概要",
    "href": "05_8331.html#残余利益モデルの概要",
    "title": "8331_千葉銀行",
    "section": "2.2 残余利益モデルの概要",
    "text": "2.2 残余利益モデルの概要\n残余利益モデルは、企業の株式価値を現在の自己資本の簿価と、将来の超過利益の割引現在価値の合計として算出\n\n企業の純利益から自己資本が生み出すべき正常な利益を差し引いたものである。残余の部分が株主にとっての追加的な価値を生み出すと考えられる。\n\n\\[ \\begin{align*}\\text{株式価値} =\\ & C_0 + \\frac{A_1 - r_e C_0}{1 + r_e} + \\frac{A_2 - r_e C_1}{(1 + r_e)^2} + \\frac{A_3 - r_e C_2}{(1 + r_e)^3} + \\cdots\\end{align*} \\]\n\n\\(C_t\\)：\\(t\\)期末の自己資本簿価\n\\(C_{t-1}\\)：\\(t{-}1\\)期末（すなわち\\(t\\)期首）の自己資本簿価\n\\(A_t\\)：\\(t\\)期の当期純利益\n\\(d_t\\)：\\(t\\)期の配当\n\\(r_e\\):株主が要求するリターン率。CAPM(資本資産価格モデル)を用いて算出\n\n自己資本の変動は、事業活動による利益（\\(A_t\\)）の増加と、株主への配当（\\(d_t\\)）による減少によって決まります。\n\\[ C_t = C_{t-1} + A_t - d_t\\ \\]",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8331_千葉銀行"
    ]
  },
  {
    "objectID": "05_8331.html#前提データの準備",
    "href": "05_8331.html#前提データの準備",
    "title": "8331_千葉銀行",
    "section": "2.3 前提データの準備",
    "text": "2.3 前提データの準備\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"ProcessedBankData/7150_processed_data.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(\"dfの列名:\")\n\n[1] \"dfの列名:\"\n\nprint(names(df))\n\n[1] \"No\"             \"項目\"           \"金額（百万円）\" \"ファイル名\"    \n\n\n\n# 当期純利益（Net_Income）の抽出\n# 項目名が複数ある場合もまとめて抽出\nNet_Income_U &lt;- df %&gt;%\n  filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;%\n  slice(which(row_number() %% 2 != 0)) %&gt;%\n  select(No, `金額（百万円）`)\n\n# 自己資本簿価（Net_assets）の抽出\n# 株主資本合計とその他の包括利益累計額合計を年度（No）ごとに合算\nNet_assets &lt;- df %&gt;%\n  filter(項目 %in% c(\"株主資本合計\", \"その他の包括利益累計額合計\")) %&gt;%\n  group_by(No) %&gt;%\n  summarise(自己資本 = sum(`金額（百万円）`), .groups = 'drop')\n\n# 抽出したデータの確認\nprint(\"抽出された当期純利益データ:\")\n\n[1] \"抽出された当期純利益データ:\"\n\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\nprint(\"抽出された自己資本簿価データ:\")\n\n[1] \"抽出された自己資本簿価データ:\"\n\nprint(Net_assets)\n\n# A tibble: 8 × 2\n     No 自己資本\n  &lt;dbl&gt;    &lt;dbl&gt;\n1    33    23727\n2    35    57234\n3    36    16195\n4    37    28224\n5    39    31835\n6    40     2383\n7    41     2125\n8    43    17480\n\n# C0（最も直近の自己資本簿価）の定義\nC0 &lt;- tail(Net_assets$自己資本, 1)\n\n\nrf &lt;- 0.01570\nbeta &lt;- 1.08036867948469\nTOPIX_OPEN &lt;- TOPIX$Close[1:55]\nTOPIX_CLOSE &lt;- TOPIX$Close[2:56]\ntopix_return &lt;- (TOPIX_CLOSE - TOPIX_OPEN) / TOPIX_OPEN\nEr &lt;- mean(topix_return, na.rm = TRUE) # 欠損値があれば除去\nmarket_risk_premium &lt;- Er - rf\nrE &lt;- rf +  beta * market_risk_premium\ncat(\"株主資本コスト(rE):\", round(rE * 100,3), \"%\\n\")\n\n株主資本コスト(rE): 8.35 %\n\n\n\n# 計算に必要な変数の定義\nn &lt;- nrow(Net_Income_U)\npayout_ratio &lt;- 0.30\ng &lt;- 0.02 # 永久成長率\n\n# 各期の自己資本簿価を格納するベクトル\nC &lt;- c(C0, rep(NA, n))\n# 各期の残余利益の現在価値を格納するベクトル\npv_residual_income &lt;- rep(NA, n)\n\n# ループ処理で各期の残余利益と現在価値を計算\nfor (t in 1:n) {\n  # 当期純利益 (A_t)\n  A_t &lt;- Net_Income_U$`金額（百万円）`[t]\n  \n  # 残余利益 (RI_t) = 当期純利益 - rE * 期首の自己資本簿価\n  residual_income_t &lt;- A_t - rE * C[t]\n  \n  # t期の残余利益の現在価値を計算\n  pv_residual_income[t] &lt;- residual_income_t / (1 + rE)^t\n  \n  # 次期（t+1期）の期首自己資本簿価を計算\n  # クリーン・サープラス関係: C_t = C_{t-1} + A_t - d_t\n  # d_t = 配当性向 * A_t と仮定\n  if (t &lt; n) {\n    C[t+1] &lt;- C[t] + A_t * (1 - payout_ratio)\n  }\n}\nprint(Net_Income_U)\n\n# A tibble: 10 × 2\n      No `金額（百万円）`\n   &lt;dbl&gt;            &lt;dbl&gt;\n 1    34              648\n 2    36              694\n 3    39             1031\n 4    37              633\n 5    38              365\n 6    36            -2279\n 7    39              357\n 8    37              294\n 9    36              419\n10    37              420\n\n# 最終期の残余利益\nlast_residual_income &lt;- A_t - rE * C[n]\n# 継続価値（Terminal Value）の計算\nterminal_value &lt;- last_residual_income * (1 + g) / (rE - g)\npv_terminal_value &lt;- terminal_value / (1 + rE)^n\n\n# 株式価値の計算\nequity_value &lt;- C0 + sum(pv_residual_income) + pv_terminal_value\n\n# 結果の出力\ncat(\"\\n--- RIMによる企業価値評価結果 ---\\n\")\n\n\n--- RIMによる企業価値評価結果 ---\n\ncat(\"株式価値:\", format(round(equity_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n株式価値: 864.14 百万円\n\ncat(\"  - C0（現在の自己資本簿価）:\", format(round(C0, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - C0（現在の自己資本簿価）: 17,480 百万円\n\ncat(\"  - 将来の残余利益の現在価値合計:\", format(round(sum(pv_residual_income), 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 将来の残余利益の現在価値合計: -8,217.29 百万円\n\ncat(\"  - 継続価値の現在価値:\", format(round(pv_terminal_value, 2), big.mark = \",\"), \"百万円\\n\")\n\n  - 継続価値の現在価値: -8,398.57 百万円",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8331_千葉銀行"
    ]
  },
  {
    "objectID": "05_8331.html#配当割引モデルの概要",
    "href": "05_8331.html#配当割引モデルの概要",
    "title": "8331_千葉銀行",
    "section": "3.1 配当割引モデルの概要",
    "text": "3.1 配当割引モデルの概要\n配当割引モデルは、資産が生み出す将来の現金収入の期待値を、購入者が要求する収益率で割り引いた現在価値に等しいと考える。",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8331_千葉銀行"
    ]
  },
  {
    "objectID": "05_8331.html#前提データの準備-1",
    "href": "05_8331.html#前提データの準備-1",
    "title": "8331_千葉銀行",
    "section": "3.2 前提データの準備",
    "text": "3.2 前提データの準備\n\n# パッケージの読み込み\nlibrary(tidyverse)\n\n# データの読み込み\n# 列名が自動的に変換されないように、check.names = FALSE を設定\n# データのエンコーディングに合わせて locale を指定\ndf &lt;- read_csv(\"Processed_PrimeBank/8331.csv\", show_col_types = FALSE)\nTOPIX &lt;- read_csv(\"^tpx_y.csv\", show_col_types = FALSE)\n\n# データの列名を確認\nprint(names(df))\n\n[1] \"項目\" \"金額\" \"年度\"\n\n\n#``{r} # 当期純利益（Net_Income）の抽出 # 項目名が複数ある場合もまとめて抽出 #Net_Income_U &lt;- df %&gt;% # filter(項目 %in% c(\"当期純利益\", \"当期純利益又は当期純損失（△）\")) %&gt;% #  slice(which(row_number() %% 2 != 0)) %&gt;% #  select(No,金額（百万円）`)",
    "crumbs": [
      "企業価値評価",
      "東証プライム銀行",
      "8331_千葉銀行"
    ]
  }
]